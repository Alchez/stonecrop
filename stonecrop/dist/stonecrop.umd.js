(function(E,$){typeof exports=="object"&&typeof module!="undefined"?module.exports=$(require("vue")):typeof define=="function"&&define.amd?define(["vue"],$):(E=typeof globalThis!="undefined"?globalThis:E||self,E["@sedum/stonecrop"]=$(E.Vue))})(this,function(E){"use strict";const $=(()=>{let t;try{t="production"}catch{t="development"}return t})(),j=Symbol("IS_PROXY"),U=Symbol("PATH"),Y=Symbol("VALUE"),Ct=Symbol("PROXY_TREE"),vt=t=>String(t)==="[object Object]"&&t.constructor.name==="Object",xe=new Set(["push","shift","pop","unshift","splice","reverse","sort","copyWithin"]),_e=t=>t&&t[j]?t[Y]:t,ie=t=>typeof t=="object"&&t!==null&&!Array.isArray(t)&&t.constructor.name!=="Object"&&Object.isExtensible(t),je=t=>t!==void 0&&(!ie(t)||ie(t)&&!(t instanceof Date)&&!(t instanceof Map)&&!(t instanceof Set));class he{constructor(e){this.tree=e,this.CACHED_PROXY=Symbol("CACHED_PROXY"),this.delimiter=e.master.options.delimiter,this.ssr=Boolean(e.master.options.ssr)}concat(e,n){return e?e+this.delimiter+n:n}ensureMutationTrackingIsEnabled(e){if($!=="production"&&this.tree.master.options.devmode&&!this.tree.canMutate())throw new Error(`proxy-state-tree - You are mutating the path "${e}", but it is not allowed. The following could have happened:
        
        - The mutation is explicitly being blocket
        - You are passing state to a 3rd party tool trying to manipulate the state
        - You are running asynchronous code and forgot to "await" its execution
        `)}isDefaultProxifier(){return this.tree.proxifier===this.tree.master.proxifier}ensureValueDosntExistInStateTreeElsewhere(e){if($!=="production"){if(e&&e[j]===!0)throw new Error(`proxy-state-tree - You are trying to insert a value that already exists in the state tree on path "${e[U]}"`);return e}}trackPath(e){if(!!this.tree.canTrack())if(this.isDefaultProxifier()){const n=this.tree.master.currentTree;if(!n)return;n.addTrackingPath(e)}else this.tree.addTrackingPath(e)}getTrackingTree(){return this.tree.master.currentTree&&this.isDefaultProxifier()?this.tree.master.currentTree:this.tree.canTrack()&&this.tree.canTrack()?this.tree:null}getMutationTree(){return this.tree.master.mutationTree||this.tree}isProxyCached(e,n){return e[this.CACHED_PROXY]&&String(e[this.CACHED_PROXY][U])===String(n)}createArrayProxy(e,n){if(!this.ssr&&this.isProxyCached(e,n))return e[this.CACHED_PROXY];const s=this,r=new Proxy(e,{get(i,o){if(o===j)return!0;if(o===U)return n;if(o===Y)return e;if(o==="indexOf")return(h,f)=>e.indexOf(_e(h),_e(f));if(o==="length"||typeof i[o]=="function"&&!xe.has(String(o))||typeof o=="symbol")return i[o];const u=s.getTrackingTree(),c=s.concat(n,o),a=u||s.tree;u&&u.proxifier.trackPath(c),a.trackPathListeners.forEach(h=>h(c));const l=String(o);return xe.has(l)?(...h)=>{const f=s.getMutationTree();let p;return $==="production"?p=i[o](...h):p=i[o](...h.map(y=>s.ensureValueDosntExistInStateTreeElsewhere(y))),f.addMutation({method:l,path:n,delimiter:s.delimiter,args:h,hasChangedValue:!0}),p}:je(i[o])?s.proxify(i[o],c):i[o]},set(i,o,u){const c=s.concat(n,o),a=s.getMutationTree(),l=Reflect.set(i,o,u);return a.addMutation({method:"set",path:c,args:[u],delimiter:s.delimiter,hasChangedValue:!0}),l}});return this.ssr||Object.defineProperty(e,this.CACHED_PROXY,{value:r,configurable:!0}),r}createObjectProxy(e,n){if(!this.ssr&&this.isProxyCached(e,n))return e[this.CACHED_PROXY];const s=this,r=new Proxy(e,{get(i,o){if(o===j)return!0;if(o===U)return n;if(o===Y)return e;if(o===Ct)return s.tree;if(typeof o=="symbol"||o in Object.prototype)return i[o];const u=Object.getOwnPropertyDescriptor(i,o)||Object.getPrototypeOf(i)&&Object.getOwnPropertyDescriptor(Object.getPrototypeOf(i),o);if(u&&"get"in u){const f=u.get.call(r);return s.tree.master.options.devmode&&s.tree.master.options.onGetter&&s.tree.master.options.onGetter(s.concat(n,o),f),f}const c=s.getTrackingTree(),a=i[o],l=s.concat(n,o),h=c||s.tree;return typeof a=="function"?s.tree.master.options.onGetFunction?s.tree.master.options.onGetFunction(c||s.tree,l,i,o):ie(i)?a:a.call(i,s.tree,l):(h.trackPathListeners.forEach(f=>f(l)),c&&c.proxifier.trackPath(l),je(a)?s.proxify(a,l):a)},set(i,o,u){const c=s.concat(n,o);let a;o in i||(a=n);const l=s.getMutationTree(),h=i[o];typeof u=="function"&&s.tree.master.options.onSetFunction&&(u=s.tree.master.options.onSetFunction(s.getTrackingTree()||s.tree,c,i,o,u));const f=h!==u,p=Reflect.set(i,o,u);return l.addMutation({method:"set",path:c,args:[u],delimiter:s.delimiter,hasChangedValue:f},a),p},deleteProperty(i,o){const u=s.concat(n,o);let c;o in i&&(c=n);const a=s.getMutationTree();return delete i[o],a.addMutation({method:"unset",path:u,args:[],delimiter:s.delimiter,hasChangedValue:!0},c),!0}});return this.ssr||Object.defineProperty(e,this.CACHED_PROXY,{value:r,configurable:!0}),r}proxify(e,n){if(e){if(e[j]&&(String(e[U])!==String(n)||e[Y][this.CACHED_PROXY]!==e))return this.proxify(e[Y],n);if(e[j])return e;if(Array.isArray(e))return this.createArrayProxy(e,n);if(vt(e)||ie(e))return this.createObjectProxy(e,n)}return e}}class fe{constructor(e,n){this.mutationCallbacks=[],this.mutations=[],this.objectChanges=new Set,this.isTracking=!1,this.isBlocking=!1,this.trackPathListeners=[],this.isTracking=!0,this.master=e,this.proxifier=n||new he(this),this.state=this.proxifier.proxify(e.sourceState,"")}trackPaths(){const e=new Set,n=s=>{e.add(s)};return this.trackPathListeners.push(n),()=>(this.trackPathListeners.splice(this.trackPathListeners.indexOf(n),1),e)}getMutations(){const e=this.mutations.slice();return this.mutations.length=0,e}getObjectChanges(){const e=new Set([...this.objectChanges]);return this.objectChanges.clear(),e}addMutation(e,n){const s=this.master.currentFlushId;this.mutations.push(e),n&&this.objectChanges.add(n);for(const r of this.master.mutationCallbacks)r(e,new Set(n?[e.path,n]:[e.path]),s);for(const r of this.mutationCallbacks)r(e,new Set(n?[e.path,n]:[e.path]),s)}flush(e=!1){return this.master.flush(this,e)}onMutation(e){this.mutationCallbacks.push(e)}canMutate(){return this.isTracking&&!this.isBlocking}canTrack(){return!1}blockMutations(){this.isBlocking=!0}enableMutations(){this.isBlocking=!1}dispose(){return this.isTracking=!1,this.mutationCallbacks.length=0,this.proxifier=this.master.proxifier,this}}class oe{constructor(e){this.pathDependencies=new Set,this.shouldTrack=!1,this.trackPathListeners=[],this.master=e,this.proxifier=e.proxifier,this.state=e.state}trackPaths(){const e=new Set,n=s=>{e.add(s)};return this.trackPathListeners.push(n),()=>(this.trackPathListeners.splice(this.trackPathListeners.indexOf(n),1),e)}canMutate(){return!1}canTrack(){return!0}addTrackingPath(e){!this.shouldTrack||(this.pathDependencies.add(e),this.callback&&this.master.addPathDependency(e,this.callback))}track(e){return this.master.changeTrackStateTree(this),this.shouldTrack=!0,this.clearTracking(),e&&(this.callback=(...n)=>{!this.callback||e(...n)}),this}clearTracking(){if(this.callback)for(const e of this.pathDependencies)this.master.removePathDependency(e,this.callback);this.pathDependencies.clear()}stopTracking(){this.shouldTrack=!1}trackScope(e,n){const s=this.master.previousTree,r=this.master.currentTree;this.master.currentTree=this,this.track(n);const i=e(this);return this.master.currentTree=r,this.master.previousTree=s,this.stopTracking(),i}dispose(){return this.callback?(this.clearTracking(),this.callback=null,this.proxifier=this.master.proxifier,this.master.currentTree===this&&(this.master.currentTree=null),this):(this.pathDependencies.clear(),this)}}class wt{constructor(e,n={}){this.cache={mutationTree:[],trackStateTree:[]},this.flushCallbacks=[],this.mutationCallbacks=[],this.currentFlushId=0,this.pathDependencies={},typeof n.devmode=="undefined"&&(n.devmode=!0),n.delimiter||(n.delimiter="."),this.master=this,this.sourceState=e,this.options=n,this.createTrackStateProxifier()}createTrackStateProxifier(){const e=new oe(this);this.proxifier=e.proxifier=new he(e),this.state=e.state=this.proxifier.proxify(this.sourceState,"")}getMutationTree(){return this.options.devmode?this.cache.mutationTree.pop()||new fe(this):this.mutationTree=this.mutationTree||new fe(this,this.proxifier)}getTrackStateTree(){return this.cache.trackStateTree.pop()||new oe(this)}getTrackStateTreeWithProxifier(){const e=this.getTrackStateTree();return this.options.ssr?e.state=this.sourceState:(e.proxifier=new he(e),e.state=e.proxifier.proxify(this.sourceState,"")),e}changeTrackStateTree(e){this.previousTree=this.currentTree,this.currentTree=e}disposeTree(e){e instanceof fe?this.cache.mutationTree.push(e.dispose()):e instanceof oe&&this.cache.trackStateTree.push(e.dispose())}onMutation(e){return this.mutationCallbacks.push(e),()=>{this.mutationCallbacks.splice(this.mutationCallbacks.indexOf(e),1)}}forceFlush(){const e=[],n=[];for(const s in this.pathDependencies)this.pathDependencies[s].forEach(i=>{i(e,n,this.currentFlushId++,!1)})}flush(e,n=!1){let s;if(Array.isArray(e)?s=e.reduce((a,l)=>({mutations:a.mutations.concat(l.getMutations()),objectChanges:new Set([...a.objectChanges,...l.getObjectChanges()])}),{mutations:[],objectChanges:new Set}):s={mutations:e.getMutations(),objectChanges:e.getObjectChanges()},!s.mutations.length&&!s.objectChanges.size)return{mutations:[],flushId:null};const r=new Set,i=new Set,o=this.currentFlushId++;for(const a of s.objectChanges)this.pathDependencies[a]&&r.add(a);for(const a of s.mutations)a.hasChangedValue&&r.add(a.path);const u=Array.from(r).sort();for(const a of u)if(this.pathDependencies[a])for(const l of this.pathDependencies[a])i.add(l);for(const a of i)a(s.mutations,u,o,n);const c=this.flushCallbacks.slice();for(const a of c)this.flushCallbacks.includes(a)&&a(s.mutations,u,o,n);return r.clear(),i.clear(),{mutations:s.mutations,flushId:o}}onFlush(e){return this.flushCallbacks.push(e),()=>this.flushCallbacks.splice(this.flushCallbacks.indexOf(e),1)}rescope(e,n){return e&&e[j]?n.proxifier.proxify(e[Y],e[U]):e}addPathDependency(e,n){this.pathDependencies[e]||(this.pathDependencies[e]=new Set),this.pathDependencies[e].add(n)}removePathDependency(e,n){this.pathDependencies[e].delete(n),this.pathDependencies[e].size||delete this.pathDependencies[e]}toJSON(){return this.sourceState}}var b;(function(t){t.ACTION_START="action:start",t.ACTION_END="action:end",t.OPERATOR_START="operator:start",t.OPERATOR_END="operator:end",t.OPERATOR_ASYNC="operator:async",t.MUTATIONS="mutations",t.EFFECT="effect",t.DERIVED="derived",t.DERIVED_DIRTY="derived:dirty",t.COMPONENT_ADD="component:add",t.COMPONENT_UPDATE="component:update",t.COMPONENT_REMOVE="component:remove",t.GETTER="getter"})(b||(b={}));const Me=Symbol("IS_DERIVED"),de=Symbol("IS_DERIVED_CONSTRUCTOR");class Ne{constructor(e){this.cb=e,this.isDirty=!0,this.updateCount=0;const n=this.evaluate.bind(this);return n[Me]=!0,n}runScope(e,n){const s=n.slice(0,n.length-1).reduce((r,i)=>r[i],e.state);return this.cb(s,e.state)}evaluate(e,n,s,r){if(this.disposeOnMutation||(this.disposeOnMutation=s.onMutation((i,o,u)=>{if(typeof r.reduce((c,a)=>c&&c[a],s.sourceState)!="function"){this.disposeOnMutation();return}if(!this.isDirty){for(const c of o)if(this.paths.has(c)){this.isDirty=!0,e.emitAsync(b.DERIVED_DIRTY,{derivedPath:r,path:c,flushId:u});return}}})),this.isDirty||this.previousProxifier!==n.proxifier){const i=n.trackPaths();this.value=this.runScope(n,r),this.isDirty=!1,this.paths=i()}if(n instanceof oe)for(const i of this.paths)n.addTrackingPath(i),n.trackPathListeners.forEach(o=>o(i));return this.previousProxifier=n.proxifier,this.value&&this.value[j]?s.rescope(this.value,n):this.value}}var It=function(){function t(){this.events=new Map}return t.prototype.emit=function(e,n){for(var s=this.events.get(e)||[],r=s.length-1;r>=0;r--){var i=s[r];i.cb(n),i.once&&s.splice(r,1)}},t.prototype.emitAsync=function(e,n){var s=this.events.get(e)||[];setTimeout(function(){for(var r=s.length-1;r>=0;r--){var i=s[r];i.cb(n),i.once&&s.splice(r,1)}})},t.prototype.on=function(e,n){this.addListener(e,n,!1)},t.prototype.once=function(e,n){this.addListener(e,n,!0)},t.prototype.addListener=function(e,n,s){var r=this.events.get(e)||[];r.push({once:s,cb:n}),this.events.set(e,r)},t}(),kt=Object.prototype.toString,B=function(t){var e;return kt.call(t)==="[object Object]"&&(e=Object.getPrototypeOf(t),e===null||e===Object.getPrototypeOf({}))};/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */function xt(t,e,n,s){function r(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function u(l){try{a(s.next(l))}catch(h){o(h)}}function c(l){try{a(s.throw(l))}catch(h){o(h)}}function a(l){l.done?i(l.value):r(l.value).then(u,c)}a((s=s.apply(t,e||[])).next())})}function De(t,e,n={}){if(!t||!e)throw new Error('You have to pass a "target" and "source" object to rehydrate');Object.keys(e).forEach(s=>{const r=e[s],i=n[s];typeof i=="function"&&Array.isArray(t[s])?t[s]=e[s].map(o=>i(o)):typeof i=="function"&&typeof t[s]=="object"&&t[s]!==null&&t[s].constructor.name==="Object"?t[s]=Object.keys(e[s]).reduce((o,u)=>(o[u]=i(e[s][u]),o),{}):typeof i=="function"?t[s]=i(e[s]):typeof r=="object"&&!Array.isArray(r)&&r!==null?(t[s]||(t[s]={}),De(t[s],e[s],n[s])):t[s]=e[s]})}const _t=Symbol("SERIALIZE"),Le=(t,e,n={})=>{Array.isArray(e)?e.forEach(r=>{const i=r.path.split(r.delimiter),o=i.pop(),u=i.reduce((a,l)=>a[l],t),c=i.reduce((a,l)=>a&&a[l],n);r.method==="set"?typeof c=="function"&&Array.isArray(r.args[0])?u[o]=r.args[0].map(a=>c(a)):typeof c=="function"?u[o]=c(r.args[0]):u[o]=r.args[0]:r.method==="unset"?delete u[o]:u[o][r.method].apply(u[o],typeof c=="function"?r.args.map(a=>typeof a=="object"&&a!==null?c(a):a):r.args)}):De(t,e,n)};class jt{constructor(e){this.safeClassNames=new Set,this.unsafeClassNames=new Set,this.circularReferenceCache=[],this.buffer=[],this.serializer=Promise.resolve(),this.isConnected=!1,this.doReconnect=!1,this.hasWarnedReconnect=!1,this.reconnectInterval=1e4,this.connect=(n,s)=>{n=n||"localhost:3031",this.ws=new WebSocket(`ws://${n}?name=${this.name}`),this.ws.onmessage=r=>{const i=JSON.parse(r.data);i.appName===this.name&&s(i)},this.ws.onopen=()=>{this.isConnected=!0,this.flushBuffer()},this.ws.onerror=()=>{console.error(`OVERMIND DEVTOOLS: Not able to connect. You are trying to connect to "${n}", but there was no devtool there. Try the following:
        
          - Make sure you are running the latest version of the devtools, using "npx overmind-devtools@latest" or install latest extension for VSCode
          - Close the current tab and open a new one
          - Make sure the correct port is configured in the devtools
        `)},this.ws.onclose=()=>{this.isConnected=!1,this.doReconnect&&!this.hasWarnedReconnect&&(console.warn("Debugger application is not running on selected port... will reconnect automatically behind the scenes"),this.hasWarnedReconnect=!0),this.doReconnect&&this.reconnect(n,s)}},this.sendMessage=n=>{if(!this.isConnected){this.buffer.push(n);return}this.ws.send(`{"appName":"${this.name}","message":${n}}`)},this.flushBuffer=()=>xt(this,void 0,void 0,function*(){this.buffer.forEach(n=>{this.sendMessage(n)}),this.buffer.length=0}),this.name=typeof location!="undefined"&&location.search.includes("OVERMIND_DEVTOOL")?e+" (Overmind Devtool)":e}reconnect(e,n){setTimeout(()=>this.connect(e,n),this.reconnectInterval)}send(e){const n=this.safeClassNames,s=this.unsafeClassNames,r=this.circularReferenceCache;this.sendMessage(JSON.stringify(e,function(i,o){if(typeof o=="function")return"[Function]";if(this.__CLASS__)return o;if(o&&o[_t])return{__CLASS__:!0,name:o.constructor.name,value:o};if(typeof o=="object"&&o!==null&&!Array.isArray(o)&&o.constructor&&o.constructor.name!=="Object"){if(r.includes(o))return`[CIRCULAR REFERENCE: ${o.constructor.name}]`;if(r.push(o),!n.has(o.constructor.name)&&!s.has(o.constructor.name))try{JSON.stringify(o),n.add(o.constructor.name)}catch{s.add(o.constructor.name)}return n.has(o.constructor.name)?{__CLASS__:!0,name:o.constructor.name,value:o}:`[${o.constructor.name||"NOT SERIALIZABLE"}]`}return o})),r.length=0}}function Mt(t){return typeof t=="object"&&!Array.isArray(t)&&t!==null}let He=!1,Nt=0;const Fe=Symbol("ORIGIN_TARGET");function Ve(t,e,n=""){return!Mt(t)&&typeof t!="function"?t:new Proxy(t,{apply(s,r,i){const o=Nt++,u=n.split("."),c=u.pop();return e({func:s.bind(r?r[Fe]:void 0),effectId:o,name:u.join("."),method:c,args:i})},construct(s,r){return He||(console.warn(`EFFECTS - It is highly recommended to create a custom effect, exposing a method that deals with the instantiation of "${n}". It improves readability and debugability of your app`),He=!0),new s(...r)},get(s,r){return r===Fe?s:Ve(s[r],e,n?n+"."+r.toString():r.toString())}})}const Dt=()=>({actions:t},e)=>{const n=ze("onInitializeOvermind",t);return Promise.all(n.map(s=>s(e)))},M=(()=>{let t;try{t="production"}catch{console.warn("Overmind was unable to determine the NODE_ENV, which means it will run in DEVELOPMENT mode. If this is a production app, please configure your build tool to define NODE_ENV"),t="development"}return t})(),Lt=M==="test",$e=Symbol("operator"),Ht=Symbol("origina_actions"),pe=Symbol("execution"),F=Symbol("MODE_DEFAULT"),ae=Symbol("MODE_TEST"),L=Symbol("MODE_SSR");class Ft{emit(){}emitAsync(){}on(){}once(){}addListener(){}}function Ue(t){return t instanceof Promise||t&&typeof t.then=="function"&&typeof t.catch=="function"}function me(t){return Object.keys(t).reduce((e,n)=>{if(n==="__esModule")return e;const s=Object.getOwnPropertyDescriptor(t,n);if(s&&"get"in s)return Object.defineProperty(e,n,s),e;const r=t[n];return B(r)?e[n]=me(r):Object.defineProperty(e,n,s),e},B(t)?{}:t)}const Ye=".";function Be(t,e,n=[],s=[]){const r=Object.keys(t),i=Object.keys(e);return r.forEach(o=>{i.includes(o)||s.push({delimiter:Ye,args:[],path:n.concat(o).join("."),hasChangedValue:!1,method:"unset"})}),i.forEach(o=>{B(t[o])&&B(e[o])?Be(t[o],e[o],n.concat(o),s):t[o]!==e[o]&&s.push({delimiter:Ye,args:[e[o]],path:n.concat(o).join("."),hasChangedValue:!1,method:"set"})}),s}function ze(t,e={},n=[]){return Object.keys(e).reduce((s,r)=>typeof e[r]=="function"&&r===t?s.concat(e[r]):s.concat(ze(t,e[r],n.concat(r))),[])}function ge(t={},e=[]){return Object.keys(t).reduce((n,s)=>typeof t[s]=="function"?n.concat(e.concat(s).join(".")):n.concat(ge(t[s],e.concat(s))),[])}function Ge(t,e){return new Proxy(t,{get(n,s){if(s===Ht)return t;if(typeof n[s]=="function")return e(n[s]);if(!!n[s])return Ge(n[s],e)}})}const ye={};class Vt{constructor(e,n={},s={mode:F}){this.actionReferences={},this.nextExecutionId=0,this.reydrateMutationsForHotReloading=[],this.isStrict=!1,this.reaction=(a,l,h={})=>{let f;if(h.nested){const p=a(this.state);if(!p||!p[j])throw new Error('You have to return an object or array from the Overmind state when using a "nested" reaction');const y=p[U];f=this.addFlushListener(C=>{C.forEach(v=>{v.path.startsWith(y)&&l(y?y.split(this.delimiter).reduce((P,S)=>P[S],this.state):this.state)})})}else{const p=this.proxyStateTreeInstance.getTrackStateTree();let y;const C=()=>{p.trackScope(()=>y=a(p.state),()=>{C(),l(y)})};C(),f=()=>{p.dispose()}}return h.immediate&&l(a(this.state)),f},this.addMutationListener=a=>this.proxyStateTreeInstance.onMutation(a),this.addFlushListener=a=>this.proxyStateTreeInstance.onFlush(a);const r=n.name||"OvermindApp",i=n.devEnv||"development",o=typeof process!="undefined"&&process.title&&process.title.includes("node");if(this.delimiter=n.delimiter||".",this.isStrict=Boolean(n.strict),M===i&&s.mode===F&&n.hotReloading!==!1&&!o){if(ye[r])return ye[r].reconfigure(e);ye[r]=this}const u=s.mode===L?new Ft:new It,c=this.createProxyStateTree(e,u,s.mode===ae||M===i,s.mode===L);if(this.originalConfiguration=e,this.state=c.state,this.effects=e.effects||{},this.proxyStateTreeInstance=c,this.eventHub=u,this.mode=s,this.actions=this.getActions(e.actions),s.mode!==L){if(M===i&&s.mode===F&&typeof window!="undefined"){let a="OVERMIND: You are running in DEVELOPMENT mode.";if(n.logProxies!==!0){const l=console.log;console.log=(...h)=>l.apply(console,h.map(f=>f&&f[j]?f[Y]:f)),a+=`

 - To improve debugging experience "console.log" will NOT log proxies from Overmind, but the actual value. Please see docs to turn off this behaviour`}if(n.devtools||typeof location!="undefined"&&location.hostname==="localhost"&&n.devtools!==!1){const l=n.devtools===!0?"localhost:3031":n.devtools,h=n.name?n.name:typeof document=="undefined"?"NoName":document.title||"NoName";this.initializeDevtools(l,h,u,c.sourceState,e.actions)}else n.devtools!==!1&&(a+=`

 - You are not running on localhost. You will have to manually define the devtools option to connect`);Lt||console.warn(a)}if(M==="production"&&s.mode===F){u.on(b.OPERATOR_ASYNC,h=>{(!h.parentExecution||!h.parentExecution.isRunning)&&c.getMutationTree().flush(!0)}),u.on(b.ACTION_END,h=>{(!h.parentExecution||!h.parentExecution.isRunning)&&c.getMutationTree().flush()});let a;const l=()=>{c.getMutationTree().flush(!0)};this.proxyStateTreeInstance.onMutation(()=>{a&&clearTimeout(a),a=setTimeout(l,0)})}else(s.mode===F||s.mode===ae)&&((M==="test"||this.devtools&&n.hotReloading!==!1)&&u.on(b.MUTATIONS,a=>{this.reydrateMutationsForHotReloading=this.reydrateMutationsForHotReloading.concat(a.mutations)}),u.on(b.OPERATOR_ASYNC,a=>{if(!a.parentExecution||!a.parentExecution.isRunning){const l=a.flush(!0);this.devtools&&l.mutations.length&&this.devtools.send({type:"flush",data:Object.assign(Object.assign({},a),l)})}}),u.on(b.ACTION_END,a=>{if(!a.parentExecution||!a.parentExecution.isRunning){const l=a.flush();this.devtools&&l.mutations.length&&this.devtools.send({type:"flush",data:Object.assign(Object.assign({},a),l)})}}));if(s.mode===F){const a=this.createAction("onInitialize",Dt());this.initialized=Promise.resolve(a(this))}else this.initialized=Promise.resolve(null)}}createProxyStateTree(e,n,s,r){const i=new wt(this.getState(e),{devmode:s&&!r,ssr:r,delimiter:this.delimiter,onSetFunction:(o,u,c,a,l)=>l[de]?new Ne(l):l,onGetFunction:(o,u,c,a)=>{const l=c[a];if(l[Me])return l(n,o,i,u.split(this.delimiter));if(l[de]){const h=new Ne(l);return c[a]=h,h(n,o,i,u.split(this.delimiter))}return l},onGetter:s?(o,u)=>{this.eventHub.emitAsync(b.GETTER,{path:o,value:u})}:void 0});return i}createExecution(e,n,s){const r=e.split(".");if(r.pop(),M==="production")return{[pe]:!0,parentExecution:s,namespacePath:r,actionName:e,getMutationTree:()=>this.proxyStateTreeInstance.getMutationTree(),getTrackStateTree:()=>this.proxyStateTreeInstance.getTrackStateTree(),emit:this.eventHub.emit.bind(this.eventHub)};const i=[];return{[pe]:!0,namespacePath:r,actionId:e,executionId:this.nextExecutionId++,actionName:e,operatorId:0,isRunning:!0,parentExecution:s,path:[],emit:this.eventHub.emit.bind(this.eventHub),send:this.devtools?this.devtools.send.bind(this.devtools):()=>{},trackEffects:this.trackEffects.bind(this,this.effects),getNextOperatorId:(()=>{let u=0;return()=>++u})(),flush:s?s.flush:u=>this.proxyStateTreeInstance.flush(i,u),getMutationTree:s?s.getMutationTree:()=>{const u=this.proxyStateTreeInstance.getMutationTree();return i.push(u),u},getTrackStateTree:()=>this.proxyStateTreeInstance.getTrackStateTree(),onFlush:u=>this.proxyStateTreeInstance.onFlush(u),scopeValue:(u,c)=>this.scopeValue(u,c)}}createContext(e,n){return{state:n.state,actions:Ge(this.actions,s=>r=>s(r,e.isRunning?e:null)),execution:e,proxyStateTree:this.proxyStateTreeInstance,effects:this.trackEffects(this.effects,e),addNamespace:this.addNamespace.bind(this),reaction:this.reaction.bind(this),addMutationListener:this.addMutationListener.bind(this),addFlushListener:this.addFlushListener.bind(this)}}addNamespace(e,n,s){const r=s||this.state,i=n.pop();if(e.state){const o=n.reduce((u,c)=>u[c],r);o[i]=me(e.state)}if(e.actions){const o=n.reduce((u,c)=>u[c],this.actions);o[i]=this.getActions(e.actions)}if(e.effects){const o=n.reduce((u,c)=>u[c],this.effects);o[i]=e.effects}}scopeValue(e,n){return e&&(e[j]?this.proxyStateTreeInstance.rescope(e,n):B(e)?Object.assign({},...Object.keys(e).map(s=>({[s]:this.proxyStateTreeInstance.rescope(e[s],n)}))):e)}addExecutionMutation(e){this.mutations.push(e)}createAction(e,n){return this.actionReferences[e]=n,(r,i)=>{const o=this.actionReferences[e];if(i=i&&i[pe]?i:void 0,M==="production"||o[$e]||this.mode.mode===L){const u=this.createExecution(e,o,i);if(this.eventHub.emit(b.ACTION_START,Object.assign(Object.assign({},u),{value:r})),o[$e])return new Promise((c,a)=>{o(null,Object.assign(Object.assign({},this.createContext(u,this.proxyStateTreeInstance)),{value:r}),(l,h)=>{u.isRunning=!1,h&&this.eventHub.emit(b.ACTION_END,Object.assign(Object.assign({},h.execution),{operatorId:h.execution.operatorId-1})),l?a(l):c(h.value)})});{const c=u.getMutationTree();this.isStrict&&c.blockMutations();const a=o(this.createContext(u,c),r);return this.eventHub.emit(b.ACTION_END,u),a}}else{const u=Object.assign(Object.assign({},this.createExecution(e,o,i)),{operatorId:0,type:"action"});this.eventHub.emit(b.ACTION_START,Object.assign(Object.assign({},u),{value:r})),this.eventHub.emit(b.OPERATOR_START,u);const c=u.getMutationTree();this.isStrict&&c.blockMutations(),c.onMutation(h=>{this.eventHub.emit(b.MUTATIONS,Object.assign(Object.assign({},u),{mutations:[h]}))});const a=this.scopeValue(r,c),l=this.createContext(u,c);try{let h;c.onMutation(p=>{h&&clearTimeout(h),this.mode.mode===ae?this.addExecutionMutation(p):this.mode.mode===F&&(h=setTimeout(()=>{h=null;const y=u.flush(!0);this.devtools&&y.mutations.length&&this.devtools.send({type:"flush",data:Object.assign(Object.assign(Object.assign({},u),y),{mutations:y.mutations})})}))});let f=o(l,a);return Ue(f)?(this.eventHub.emit(b.OPERATOR_ASYNC,u),f=f.then(p=>(u.isRunning=!1,i||c.dispose(),this.eventHub.emit(b.OPERATOR_END,Object.assign(Object.assign({},u),{isAsync:!0,result:void 0})),this.eventHub.emit(b.ACTION_END,u),p)).catch(p=>{throw u.isRunning=!1,i||c.dispose(),this.eventHub.emit(b.OPERATOR_END,Object.assign(Object.assign({},u),{isAsync:!0,result:void 0,error:p.message})),this.eventHub.emit(b.ACTION_END,u),p})):(u.isRunning=!1,i||c.dispose(),this.eventHub.emit(b.OPERATOR_END,Object.assign(Object.assign({},u),{isAsync:!1,result:void 0})),this.eventHub.emit(b.ACTION_END,u)),f}catch(h){throw this.eventHub.emit(b.OPERATOR_END,Object.assign(Object.assign({},u),{isAsync:!1,result:void 0,error:h.message})),this.eventHub.emit(b.ACTION_END,u),h}}}}trackEffects(e={},n){return M==="production"?e:Ve(this.effects,s=>{let r;try{this.mode.mode===ae?r=this.mode.options.effectsCallback(s):(this.eventHub.emit(b.EFFECT,Object.assign(Object.assign(Object.assign({},n),s),{args:s.args,isPending:!0,error:!1})),r=s.func.apply(this,s.args))}catch(i){throw this.eventHub.emit(b.EFFECT,Object.assign(Object.assign(Object.assign({},n),s),{args:s.args,isPending:!1,error:i.message})),i}return Ue(r)?(this.eventHub.emit(b.EFFECT,Object.assign(Object.assign(Object.assign({},n),s),{args:s.args,isPending:!0,error:!1})),r.then(i=>(this.eventHub.emit(b.EFFECT,Object.assign(Object.assign(Object.assign({},n),s),{args:s.args,result:i,isPending:!1,error:!1})),i)).catch(i=>{throw this.eventHub.emit(b.EFFECT,Object.assign(Object.assign(Object.assign({},n),s),{args:s.args,isPending:!1,error:i&&i.message})),i})):(this.eventHub.emit(b.EFFECT,Object.assign(Object.assign(Object.assign({},n),s),{args:s.args,result:r,isPending:!1,error:!1})),r)})}initializeDevtools(e,n,s,r,i){if(M==="production")return;const o=new jt(n);o.connect(e,u=>{switch(u.type){case"refresh":{location.reload();break}case"executeAction":{const c=u.data.name.split(".").reduce((a,l)=>a[l],this.actions);u.data.payload?c(JSON.parse(u.data.payload)):c();break}case"mutation":{const c=this.proxyStateTreeInstance.getMutationTree(),a=u.data.path.slice(),l=JSON.parse(`{ "value": ${u.data.value} }`).value,h=a.pop(),f=a.reduce((p,y)=>p[y],c.state);f[h]=l,c.flush(!0),c.dispose(),this.devtools.send({type:"state",data:{path:u.data.path,value:l}});break}}});for(const u in b)s.on(b[u],(c=>a=>{o.send({type:b[u],data:a}),c===b.MUTATIONS&&a.mutations.forEach(l=>{const h=l.path.split(this.delimiter).reduce((f,p)=>f[p],this.proxyStateTreeInstance.state);B(h)?Object.keys(h).forEach(f=>h[f]):Array.isArray(h)&&h.forEach(f=>{B(f)&&Object.keys(f).forEach(p=>f[p])})}),c===b.DERIVED_DIRTY&&a.derivedPath.reduce((l,h)=>l[h],this.proxyStateTreeInstance.state)})(b[u]));o.send({type:"init",data:{state:this.proxyStateTreeInstance.state,actions:ge(i),delimiter:this.delimiter}}),this.devtools=o}getState(e){let n={};return e.state&&(n=me(e.state)),n}getActions(e={},n=[]){return Object.keys(e).reduce((s,r)=>{if(typeof e[r]=="function"){const i=this.createAction(n.concat(r).join("."),e[r]);return i.displayName=n.concat(r).join("."),Object.assign(s,{[r]:i})}return Object.assign(s,{[r]:this.getActions(e[r],n.concat(r))})},{})}updateActions(e={},n=[]){Object.keys(e).forEach(s=>{if(typeof e[s]=="function"){const r=n.concat(s).join(".");if(this.actionReferences[r])this.actionReferences[r]=e[s];else{const i=n.reduce((o,u)=>(o[u]||(o[u]={}),o[u]),this.actions);i[s]=this.createAction(r,e[s]),i[s].displayName=n.concat(s).join(".")}}else this.updateActions(e[s],n.concat(s))},{})}getTrackStateTree(){return this.proxyStateTreeInstance.getTrackStateTree()}getMutationTree(){return this.proxyStateTreeInstance.getMutationTree()}reconfigure(e){const n=Be(this.originalConfiguration.state,e.state||{});this.updateActions(e.actions),this.effects=e.effects||{};const s=this.proxyStateTreeInstance.getMutationTree();return Le(s.state,n),this.reydrateMutationsForHotReloading.forEach(r=>{try{Le(s.state,[r])}catch{}}),s.flush(),s.dispose(),this.devtools&&this.devtools.send({type:"re_init",data:{state:this.state,actions:ge(e.actions)}}),this}}const $t=t=>(t[de]=!0,t);function Ut(t,e){return new Vt(t,e,{mode:F})}const I=Symbol("OVERMIND"),qe=M==="production";let Yt=0;function Bt(t,e,n=!1){const s=Yt++;let r=0;return Object.assign(Object.assign({beforeCreate(){t.mode.mode===L?(this.overmind={state:t.state,actions:t.actions,effects:t.effects,addMutationListener:t.addMutationListener,reaction:t.reaction},e&&Object.assign(this,e({state:t.state,actions:t.actions,effects:t.effects}))):(this[I]={tree:t.proxyStateTreeInstance.getTrackStateTree(),componentInstanceId:r++,onUpdate:(i,o,u)=>{this[I].currentFlushId=u,this[I].isUpdating=!0,this.$forceUpdate()},isUpdating:!1},this.overmind={state:this[I].tree.state,actions:t.actions,effects:t.effects,addMutationListener:t.addMutationListener,reaction:t.reaction},this[I].tree.track(this[I].onUpdate),e&&Object.assign(this,e({state:this[I].tree.state,actions:t.actions,effects:t.effects})))},beforeUpdate(){t.mode.mode!==L&&(this[I].tree.track(this[I].onUpdate),e&&n&&Object.assign(this,e({state:this[I].tree.state,actions:t.actions,effects:t.effects})))}},qe?{updated(){this[I].tree.stopTracking()}}:{mounted(){t.mode.mode!==L&&t.eventHub.emitAsync(b.COMPONENT_ADD,{componentId:s,componentInstanceId:this[I].componentInstanceId,name:this.$options.name||"",paths:Array.from(this[I].tree.pathDependencies)})},updated(){t.mode.mode!==L&&(this[I].tree.stopTracking(),this[I].isUpdating&&(t.eventHub.emitAsync(b.COMPONENT_UPDATE,{componentId:s,componentInstanceId:this[I].componentInstanceId,name:this.$options.name||"",flushId:this[I].currentFlushId,paths:Array.from(this[I].tree.pathDependencies)}),this[I].isUpdating=!1))}}),{beforeDestroy(){t.mode.mode!==L&&(t.proxyStateTreeInstance.disposeTree(this[I].tree),!qe&&t.eventHub.emitAsync(b.COMPONENT_REMOVE,{componentId:s,componentInstanceId:this[I].componentInstanceId,name:this.$options.name||""}))}})}const zt=t=>({install(e,n=({state:s,actions:r,effects:i})=>({state:s,actions:r,effects:i})){e.mixin(Bt(t,n))}});$t((t,e)=>{let n=[];return e.route.view=="login"||(e.route.doctype&&n.push({title:e.route.doctype,to:`/${e.route.doctype}`}),e.route.document&&n.push({title:e.route.document,to:`/${e.route.doctype}/${e.route.document}`})),n});/*!
  * vue-router v4.0.10
  * (c) 2021 Eduardo San Martin Morote
  * @license MIT
  */const Ke=typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol",K=t=>Ke?Symbol(t):"_vr_"+t,Gt=K("rvlm"),Xe=K("rvd"),Te=K("r"),We=K("rl"),be=K("rvl"),X=typeof window!="undefined";function qt(t){return t.__esModule||Ke&&t[Symbol.toStringTag]==="Module"}const A=Object.assign;function Ee(t,e){const n={};for(const s in e){const r=e[s];n[s]=Array.isArray(r)?r.map(t):t(r)}return n}let Z=()=>{};const Kt=/\/$/,Xt=t=>t.replace(Kt,"");function Oe(t,e,n="/"){let s,r={},i="",o="";const u=e.indexOf("?"),c=e.indexOf("#",u>-1?u:0);return u>-1&&(s=e.slice(0,u),i=e.slice(u+1,c>-1?c:e.length),r=t(i)),c>-1&&(s=s||e.slice(0,c),o=e.slice(c,e.length)),s=Zt(s!=null?s:e,n),{fullPath:s+(i&&"?")+i+o,path:s,query:r,hash:o}}function Wt(t,e){let n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function Qe(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function Qt(t,e,n){let s=e.matched.length-1,r=n.matched.length-1;return s>-1&&s===r&&W(e.matched[s],n.matched[r])&&Je(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function W(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function Je(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(let n in t)if(!Jt(t[n],e[n]))return!1;return!0}function Jt(t,e){return Array.isArray(t)?Ze(t,e):Array.isArray(e)?Ze(e,t):t===e}function Ze(t,e){return Array.isArray(e)?t.length===e.length&&t.every((n,s)=>n===e[s]):t.length===1&&t[0]===e}function Zt(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),s=t.split("/");let r=n.length-1,i,o;for(i=0;i<s.length;i++)if(o=s[i],!(r===1||o==="."))if(o==="..")r--;else break;return n.slice(0,r).join("/")+"/"+s.slice(i-(i===s.length?1:0)).join("/")}var ee;(function(t){t.pop="pop",t.push="push"})(ee||(ee={}));var te;(function(t){t.back="back",t.forward="forward",t.unknown=""})(te||(te={}));function en(t){if(!t)if(X){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),Xt(t)}const tn=/^[^#]+#/;function nn(t,e){return t.replace(tn,"#")+e}function sn(t,e){const n=document.documentElement.getBoundingClientRect(),s=t.getBoundingClientRect();return{behavior:e.behavior,left:s.left-n.left-(e.left||0),top:s.top-n.top-(e.top||0)}}const ce=()=>({left:window.pageXOffset,top:window.pageYOffset});function rn(t){let e;if("el"in t){let n=t.el;const s=typeof n=="string"&&n.startsWith("#"),r=typeof n=="string"?s?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!r)return;e=sn(r,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.pageXOffset,e.top!=null?e.top:window.pageYOffset)}function et(t,e){return(history.state?history.state.position-e:-1)+t}const Se=new Map;function on(t,e){Se.set(t,e)}function an(t){const e=Se.get(t);return Se.delete(t),e}let cn=()=>location.protocol+"//"+location.host;function tt(t,e){const{pathname:n,search:s,hash:r}=e,i=t.indexOf("#");if(i>-1){let u=r.includes(t.slice(i))?t.slice(i).length:1,c=r.slice(u);return c[0]!=="/"&&(c="/"+c),Qe(c,"")}return Qe(n,t)+s+r}function un(t,e,n,s){let r=[],i=[],o=null;const u=({state:f})=>{const p=tt(t,location),y=n.value,C=e.value;let v=0;if(f){if(n.value=p,e.value=f,o&&o===y){o=null;return}v=C?f.position-C.position:0}else s(p);r.forEach(P=>{P(n.value,y,{delta:v,type:ee.pop,direction:v?v>0?te.forward:te.back:te.unknown})})};function c(){o=n.value}function a(f){r.push(f);const p=()=>{const y=r.indexOf(f);y>-1&&r.splice(y,1)};return i.push(p),p}function l(){const{history:f}=window;!f.state||f.replaceState(A({},f.state,{scroll:ce()}),"")}function h(){for(const f of i)f();i=[],window.removeEventListener("popstate",u),window.removeEventListener("beforeunload",l)}return window.addEventListener("popstate",u),window.addEventListener("beforeunload",l),{pauseListeners:c,listen:a,destroy:h}}function nt(t,e,n,s=!1,r=!1){return{back:t,current:e,forward:n,replaced:s,position:window.history.length,scroll:r?ce():null}}function ln(t){const{history:e,location:n}=window;let s={value:tt(t,n)},r={value:e.state};r.value||i(s.value,{back:null,current:s.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(c,a,l){const h=t.indexOf("#"),f=h>-1?(n.host&&document.querySelector("base")?t:t.slice(h))+c:cn()+t+c;try{e[l?"replaceState":"pushState"](a,"",f),r.value=a}catch(p){console.error(p),n[l?"replace":"assign"](f)}}function o(c,a){const l=A({},e.state,nt(r.value.back,c,r.value.forward,!0),a,{position:r.value.position});i(c,l,!0),s.value=c}function u(c,a){const l=A({},r.value,e.state,{forward:c,scroll:ce()});i(l.current,l,!0);const h=A({},nt(s.value,c,null),{position:l.position+1},a);i(c,h,!1),s.value=c}return{location:s,state:r,push:u,replace:o}}function hn(t){t=en(t);const e=ln(t),n=un(t,e.state,e.location,e.replace);function s(i,o=!0){o||n.pauseListeners(),history.go(i)}const r=A({location:"",base:t,go:s,createHref:nn.bind(null,t)},e,n);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>e.state.value}),r}function fn(t){return typeof t=="string"||t&&typeof t=="object"}function st(t){return typeof t=="string"||typeof t=="symbol"}const z={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},rt=K("nf");var it;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(it||(it={}));function Q(t,e){return A(new Error,{type:t,[rt]:!0},e)}function G(t,e){return t instanceof Error&&rt in t&&(e==null||!!(t.type&e))}const ot="[^/]+?",dn={sensitive:!1,strict:!1,start:!0,end:!0},pn=/[.+*?^${}()[\]/\\]/g;function mn(t,e){const n=A({},dn,e);let s=[],r=n.start?"^":"";const i=[];for(const a of t){const l=a.length?[]:[90];n.strict&&!a.length&&(r+="/");for(let h=0;h<a.length;h++){const f=a[h];let p=40+(n.sensitive?.25:0);if(f.type===0)h||(r+="/"),r+=f.value.replace(pn,"\\$&"),p+=40;else if(f.type===1){const{value:y,repeatable:C,optional:v,regexp:P}=f;i.push({name:y,repeatable:C,optional:v});const S=P||ot;if(S!==ot){p+=10;try{new RegExp(`(${S})`)}catch(N){throw new Error(`Invalid custom RegExp for param "${y}" (${S}): `+N.message)}}let _=C?`((?:${S})(?:/(?:${S}))*)`:`(${S})`;h||(_=v&&a.length<2?`(?:/${_})`:"/"+_),v&&(_+="?"),r+=_,p+=20,v&&(p+=-8),C&&(p+=-20),S===".*"&&(p+=-50)}l.push(p)}s.push(l)}if(n.strict&&n.end){const a=s.length-1;s[a][s[a].length-1]+=.7000000000000001}n.strict||(r+="/?"),n.end?r+="$":n.strict&&(r+="(?:/|$)");const o=new RegExp(r,n.sensitive?"":"i");function u(a){const l=a.match(o),h={};if(!l)return null;for(let f=1;f<l.length;f++){const p=l[f]||"",y=i[f-1];h[y.name]=p&&y.repeatable?p.split("/"):p}return h}function c(a){let l="",h=!1;for(const f of t){(!h||!l.endsWith("/"))&&(l+="/"),h=!1;for(const p of f)if(p.type===0)l+=p.value;else if(p.type===1){const{value:y,repeatable:C,optional:v}=p,P=y in a?a[y]:"";if(Array.isArray(P)&&!C)throw new Error(`Provided param "${y}" is an array but it is not repeatable (* or + modifiers)`);const S=Array.isArray(P)?P.join("/"):P;if(!S)if(v)f.length<2&&(l.endsWith("/")?l=l.slice(0,-1):h=!0);else throw new Error(`Missing required param "${y}"`);l+=S}}return l}return{re:o,score:s,keys:i,parse:u,stringify:c}}function gn(t,e){let n=0;for(;n<t.length&&n<e.length;){const s=e[n]-t[n];if(s)return s;n++}return t.length<e.length?t.length===1&&t[0]===40+40?-1:1:t.length>e.length?e.length===1&&e[0]===40+40?1:-1:0}function yn(t,e){let n=0;const s=t.score,r=e.score;for(;n<s.length&&n<r.length;){const i=gn(s[n],r[n]);if(i)return i;n++}return r.length-s.length}const Tn={type:0,value:""},bn=/[a-zA-Z0-9_]/;function En(t){if(!t)return[[]];if(t==="/")return[[Tn]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(p){throw new Error(`ERR (${n})/"${a}": ${p}`)}let n=0,s=n;const r=[];let i;function o(){i&&r.push(i),i=[]}let u=0,c,a="",l="";function h(){!a||(n===0?i.push({type:0,value:a}):n===1||n===2||n===3?(i.length>1&&(c==="*"||c==="+")&&e(`A repeatable param (${a}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:a,regexp:l,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):e("Invalid state to consume buffer"),a="")}function f(){a+=c}for(;u<t.length;){if(c=t[u++],c==="\\"&&n!==2){s=n,n=4;continue}switch(n){case 0:c==="/"?(a&&h(),o()):c===":"?(h(),n=1):f();break;case 4:f(),n=s;break;case 1:c==="("?n=2:bn.test(c)?f():(h(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&u--);break;case 2:c===")"?l[l.length-1]=="\\"?l=l.slice(0,-1)+c:n=3:l+=c;break;case 3:h(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&u--,l="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${a}"`),h(),o(),r}function On(t,e,n){const s=mn(En(t.path),n),r=A(s,{record:t,parent:e,children:[],alias:[]});return e&&!r.record.aliasOf==!e.record.aliasOf&&e.children.push(r),r}function Sn(t,e){const n=[],s=new Map;e=ct({strict:!1,end:!0,sensitive:!1},e);function r(l){return s.get(l)}function i(l,h,f){let p=!f,y=Pn(l);y.aliasOf=f&&f.record;const C=ct(e,l),v=[y];if("alias"in l){const _=typeof l.alias=="string"?[l.alias]:l.alias;for(const N of _)v.push(A({},y,{components:f?f.record.components:y.components,path:N,aliasOf:f?f.record:y}))}let P,S;for(const _ of v){let{path:N}=_;if(h&&N[0]!=="/"){let q=h.record.path,H=q[q.length-1]==="/"?"":"/";_.path=h.record.path+(N&&H+N)}if(P=On(_,h,C),f?f.alias.push(P):(S=S||P,S!==P&&S.alias.push(P),p&&l.name&&!at(P)&&o(l.name)),"children"in y){let q=y.children;for(let H=0;H<q.length;H++)i(q[H],P,f&&f.children[H])}f=f||P,c(P)}return S?()=>{o(S)}:Z}function o(l){if(st(l)){const h=s.get(l);h&&(s.delete(l),n.splice(n.indexOf(h),1),h.children.forEach(o),h.alias.forEach(o))}else{let h=n.indexOf(l);h>-1&&(n.splice(h,1),l.record.name&&s.delete(l.record.name),l.children.forEach(o),l.alias.forEach(o))}}function u(){return n}function c(l){let h=0;for(;h<n.length&&yn(l,n[h])>=0;)h++;n.splice(h,0,l),l.record.name&&!at(l)&&s.set(l.record.name,l)}function a(l,h){let f,p={},y,C;if("name"in l&&l.name){if(f=s.get(l.name),!f)throw Q(1,{location:l});C=f.record.name,p=A(Rn(h.params,f.keys.filter(S=>!S.optional).map(S=>S.name)),l.params),y=f.stringify(p)}else if("path"in l)y=l.path,f=n.find(S=>S.re.test(y)),f&&(p=f.parse(y),C=f.record.name);else{if(f=h.name?s.get(h.name):n.find(S=>S.re.test(h.path)),!f)throw Q(1,{location:l,currentLocation:h});C=f.record.name,p=A({},h.params,l.params),y=f.stringify(p)}const v=[];let P=f;for(;P;)v.unshift(P.record),P=P.parent;return{name:C,path:y,params:p,matched:v,meta:Cn(v)}}return t.forEach(l=>i(l)),{addRoute:i,resolve:a,removeRoute:o,getRoutes:u,getRecordMatcher:r}}function Rn(t,e){let n={};for(let s of e)s in t&&(n[s]=t[s]);return n}function Pn(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:An(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||{}:{default:t.component}}}function An(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(let s in t.components)e[s]=typeof n=="boolean"?n:n[s];return e}function at(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function Cn(t){return t.reduce((e,n)=>A(e,n.meta),{})}function ct(t,e){let n={};for(let s in t)n[s]=s in e?e[s]:t[s];return n}const ut=/#/g,vn=/&/g,wn=/\//g,In=/=/g,kn=/\?/g,lt=/\+/g,xn=/%5B/g,_n=/%5D/g,ht=/%5E/g,jn=/%60/g,ft=/%7B/g,Mn=/%7C/g,dt=/%7D/g,Nn=/%20/g;function Re(t){return encodeURI(""+t).replace(Mn,"|").replace(xn,"[").replace(_n,"]")}function Dn(t){return Re(t).replace(ft,"{").replace(dt,"}").replace(ht,"^")}function Pe(t){return Re(t).replace(lt,"%2B").replace(Nn,"+").replace(ut,"%23").replace(vn,"%26").replace(jn,"`").replace(ft,"{").replace(dt,"}").replace(ht,"^")}function Ln(t){return Pe(t).replace(In,"%3D")}function Hn(t){return Re(t).replace(ut,"%23").replace(kn,"%3F")}function Fn(t){return Hn(t).replace(wn,"%2F")}function ue(t){try{return decodeURIComponent(""+t)}catch{}return""+t}function Vn(t){const e={};if(t===""||t==="?")return e;const s=(t[0]==="?"?t.slice(1):t).split("&");for(let r=0;r<s.length;++r){const i=s[r].replace(lt," ");let o=i.indexOf("="),u=ue(o<0?i:i.slice(0,o)),c=o<0?null:ue(i.slice(o+1));if(u in e){let a=e[u];Array.isArray(a)||(a=e[u]=[a]),a.push(c)}else e[u]=c}return e}function pt(t){let e="";for(let n in t){const s=t[n];if(n=Ln(n),s==null){s!==void 0&&(e+=(e.length?"&":"")+n);continue}(Array.isArray(s)?s.map(i=>i&&Pe(i)):[s&&Pe(s)]).forEach(i=>{i!==void 0&&(e+=(e.length?"&":"")+n,i!=null&&(e+="="+i))})}return e}function $n(t){const e={};for(let n in t){let s=t[n];s!==void 0&&(e[n]=Array.isArray(s)?s.map(r=>r==null?null:""+r):s==null?s:""+s)}return e}function ne(){let t=[];function e(s){return t.push(s),()=>{const r=t.indexOf(s);r>-1&&t.splice(r,1)}}function n(){t=[]}return{add:e,list:()=>t,reset:n}}function V(t,e,n,s,r){const i=s&&(s.enterCallbacks[r]=s.enterCallbacks[r]||[]);return()=>new Promise((o,u)=>{const c=h=>{h===!1?u(Q(4,{from:n,to:e})):h instanceof Error?u(h):fn(h)?u(Q(2,{from:e,to:h})):(i&&s.enterCallbacks[r]===i&&typeof h=="function"&&i.push(h),o())},a=t.call(s&&s.instances[r],e,n,c);let l=Promise.resolve(a);t.length<3&&(l=l.then(c)),l.catch(h=>u(h))})}function Ae(t,e,n,s){const r=[];for(const i of t)for(const o in i.components){let u=i.components[o];if(!(e!=="beforeRouteEnter"&&!i.instances[o]))if(Un(u)){const a=(u.__vccOpts||u)[e];a&&r.push(V(a,n,s,i,o))}else{let c=u();r.push(()=>c.then(a=>{if(!a)return Promise.reject(new Error(`Couldn't resolve component "${o}" at "${i.path}"`));const l=qt(a)?a.default:a;i.components[o]=l;const f=(l.__vccOpts||l)[e];return f&&V(f,n,s,i,o)()}))}}return r}function Un(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function mt(t){const e=E.inject(Te),n=E.inject(We),s=E.computed(()=>e.resolve(E.unref(t.to))),r=E.computed(()=>{let{matched:c}=s.value,{length:a}=c;const l=c[a-1];let h=n.matched;if(!l||!h.length)return-1;let f=h.findIndex(W.bind(null,l));if(f>-1)return f;let p=gt(c[a-2]);return a>1&&gt(l)===p&&h[h.length-1].path!==p?h.findIndex(W.bind(null,c[a-2])):f}),i=E.computed(()=>r.value>-1&&zn(n.params,s.value.params)),o=E.computed(()=>r.value>-1&&r.value===n.matched.length-1&&Je(n.params,s.value.params));function u(c={}){return Bn(c)?e[E.unref(t.replace)?"replace":"push"](E.unref(t.to)).catch(Z):Promise.resolve()}return{route:s,href:E.computed(()=>s.value.href),isActive:i,isExactActive:o,navigate:u}}const Yn=E.defineComponent({name:"RouterLink",props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:mt,setup(t,{slots:e}){const n=E.reactive(mt(t)),{options:s}=E.inject(Te),r=E.computed(()=>({[yt(t.activeClass,s.linkActiveClass,"router-link-active")]:n.isActive,[yt(t.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=e.default&&e.default(n);return t.custom?i:E.h("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:r.value},i)}}});function Bn(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function zn(t,e){for(let n in e){let s=e[n],r=t[n];if(typeof s=="string"){if(s!==r)return!1}else if(!Array.isArray(r)||r.length!==s.length||s.some((i,o)=>i!==r[o]))return!1}return!0}function gt(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const yt=(t,e,n)=>t!=null?t:e!=null?e:n,Gn=E.defineComponent({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},setup(t,{attrs:e,slots:n}){const s=E.inject(be),r=E.computed(()=>t.route||s.value),i=E.inject(Xe,0),o=E.computed(()=>r.value.matched[i]);E.provide(Xe,i+1),E.provide(Gt,o),E.provide(be,r);const u=E.ref();return E.watch(()=>[u.value,o.value,t.name],([c,a,l],[h,f,p])=>{a&&(a.instances[l]=c,f&&f!==a&&c&&c===h&&(a.leaveGuards.size||(a.leaveGuards=f.leaveGuards),a.updateGuards.size||(a.updateGuards=f.updateGuards))),c&&a&&(!f||!W(a,f)||!h)&&(a.enterCallbacks[l]||[]).forEach(y=>y(c))},{flush:"post"}),()=>{const c=r.value,a=o.value,l=a&&a.components[t.name],h=t.name;if(!l)return Tt(n.default,{Component:l,route:c});const f=a.props[t.name],p=f?f===!0?c.params:typeof f=="function"?f(c):f:null,y=v=>{v.component.isUnmounted&&(a.instances[h]=null)},C=E.h(l,A({},p,e,{onVnodeUnmounted:y,ref:u}));return Tt(n.default,{Component:C,route:c})||C}}});function Tt(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const qn=Gn;function Kn(t){const e=Sn(t.routes,t);let n=t.parseQuery||Vn,s=t.stringifyQuery||pt,r=t.history;const i=ne(),o=ne(),u=ne(),c=E.shallowRef(z);let a=z;X&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const l=Ee.bind(null,d=>""+d),h=Ee.bind(null,Fn),f=Ee.bind(null,ue);function p(d,g){let m,T;return st(d)?(m=e.getRecordMatcher(d),T=g):T=d,e.addRoute(T,m)}function y(d){let g=e.getRecordMatcher(d);g&&e.removeRoute(g)}function C(){return e.getRoutes().map(d=>d.record)}function v(d){return!!e.getRecordMatcher(d)}function P(d,g){if(g=A({},g||c.value),typeof d=="string"){let R=Oe(n,d,g.path),x=e.resolve({path:R.path},g),re=r.createHref(R.fullPath);return A(R,x,{params:f(x.params),hash:ue(R.hash),redirectedFrom:void 0,href:re})}let m;"path"in d?m=A({},d,{path:Oe(n,d.path,g.path).path}):(m=A({},d,{params:h(d.params)}),g.params=h(g.params));let T=e.resolve(m,g);const w=d.hash||"";T.params=l(f(T.params));const k=Wt(s,A({},d,{hash:Dn(w),path:T.path}));let O=r.createHref(k);return A({fullPath:k,hash:w,query:s===pt?$n(d.query):d.query},T,{redirectedFrom:void 0,href:O})}function S(d){return typeof d=="string"?Oe(n,d,c.value.path):A({},d)}function _(d,g){if(a!==d)return Q(8,{from:g,to:d})}function N(d){return se(d)}function q(d){return N(A(S(d),{replace:!0}))}function H(d){const g=d.matched[d.matched.length-1];if(g&&g.redirect){const{redirect:m}=g;let T=typeof m=="function"?m(d):m;return typeof T=="string"&&(T=T.includes("?")||T.includes("#")?T=S(T):{path:T},T.params={}),A({query:d.query,hash:d.hash,params:d.params},T)}}function se(d,g){const m=a=P(d),T=c.value,w=d.state,k=d.force,O=d.replace===!0,R=H(m);if(R)return se(A(S(R),{state:w,force:k,replace:O}),g||m);const x=m;x.redirectedFrom=g;let re;return!k&&Qt(s,T,m)&&(re=Q(16,{to:x,from:T}),At(T,T,!0,!1)),(re?Promise.resolve(re):bt(x,T)).catch(D=>G(D)?D:ve(D,x,T)).then(D=>{if(D){if(G(D,2))return se(A(S(D.to),{state:w,force:k,replace:O}),g||x)}else D=Ot(x,T,!0,O,w);return Et(x,T,D),D})}function ts(d,g){const m=_(d,g);return m?Promise.reject(m):Promise.resolve()}function bt(d,g){let m;const[T,w,k]=Xn(d,g);m=Ae(T.reverse(),"beforeRouteLeave",d,g);for(const R of T)R.leaveGuards.forEach(x=>{m.push(V(x,d,g))});const O=ts.bind(null,d,g);return m.push(O),J(m).then(()=>{m=[];for(const R of i.list())m.push(V(R,d,g));return m.push(O),J(m)}).then(()=>{m=Ae(w,"beforeRouteUpdate",d,g);for(const R of w)R.updateGuards.forEach(x=>{m.push(V(x,d,g))});return m.push(O),J(m)}).then(()=>{m=[];for(const R of d.matched)if(R.beforeEnter&&!g.matched.includes(R))if(Array.isArray(R.beforeEnter))for(const x of R.beforeEnter)m.push(V(x,d,g));else m.push(V(R.beforeEnter,d,g));return m.push(O),J(m)}).then(()=>(d.matched.forEach(R=>R.enterCallbacks={}),m=Ae(k,"beforeRouteEnter",d,g),m.push(O),J(m))).then(()=>{m=[];for(const R of o.list())m.push(V(R,d,g));return m.push(O),J(m)}).catch(R=>G(R,8)?R:Promise.reject(R))}function Et(d,g,m){for(const T of u.list())T(d,g,m)}function Ot(d,g,m,T,w){const k=_(d,g);if(k)return k;const O=g===z,R=X?history.state:{};m&&(T||O?r.replace(d.fullPath,A({scroll:O&&R&&R.scroll},w)):r.push(d.fullPath,w)),c.value=d,At(d,g,m,O),Pt()}let St;function ns(){St=r.listen((d,g,m)=>{let T=P(d);const w=H(T);if(w){se(A(w,{replace:!0}),T).catch(Z);return}a=T;const k=c.value;X&&on(et(k.fullPath,m.delta),ce()),bt(T,k).catch(O=>G(O,12)?O:G(O,2)?(se(O.to,T).then(R=>{G(R,20)&&!m.delta&&m.type===ee.pop&&r.go(-1,!1)}).catch(Z),Promise.reject()):(m.delta&&r.go(-m.delta,!1),ve(O,T,k))).then(O=>{O=O||Ot(T,k,!1),O&&(m.delta?r.go(-m.delta,!1):m.type===ee.pop&&G(O,20)&&r.go(-1,!1)),Et(T,k,O)}).catch(Z)})}let Ce=ne(),Rt=ne(),le;function ve(d,g,m){Pt(d);const T=Rt.list();return T.length?T.forEach(w=>w(d,g,m)):console.error(d),Promise.reject(d)}function ss(){return le&&c.value!==z?Promise.resolve():new Promise((d,g)=>{Ce.add([d,g])})}function Pt(d){le||(le=!0,ns(),Ce.list().forEach(([g,m])=>d?m(d):g()),Ce.reset())}function At(d,g,m,T){const{scrollBehavior:w}=t;if(!X||!w)return Promise.resolve();let k=!m&&an(et(d.fullPath,0))||(T||!m)&&history.state&&history.state.scroll||null;return E.nextTick().then(()=>w(d,g,k)).then(O=>O&&rn(O)).catch(O=>ve(O,d,g))}const we=d=>r.go(d);let Ie;const ke=new Set;return{currentRoute:c,addRoute:p,removeRoute:y,hasRoute:v,getRoutes:C,resolve:P,options:t,push:N,replace:q,go:we,back:()=>we(-1),forward:()=>we(1),beforeEach:i.add,beforeResolve:o.add,afterEach:u.add,onError:Rt.add,isReady:ss,install(d){const g=this;d.component("RouterLink",Yn),d.component("RouterView",qn),d.config.globalProperties.$router=g,Object.defineProperty(d.config.globalProperties,"$route",{enumerable:!0,get:()=>E.unref(c)}),X&&!Ie&&c.value===z&&(Ie=!0,N(r.location).catch(w=>{}));const m={};for(let w in z)m[w]=E.computed(()=>c.value[w]);d.provide(Te,g),d.provide(We,E.reactive(m)),d.provide(be,c);let T=d.unmount;ke.add(d),d.unmount=function(){ke.delete(d),ke.size<1&&(St(),c.value=z,Ie=!1,le=!1),T()}}}}function J(t){return t.reduce((e,n)=>e.then(()=>n()),Promise.resolve())}function Xn(t,e){const n=[],s=[],r=[],i=Math.max(e.matched.length,t.matched.length);for(let o=0;o<i;o++){const u=e.matched[o];u&&(t.matched.find(a=>W(a,u))?s.push(u):n.push(u));const c=t.matched[o];c&&(e.matched.find(a=>W(a,c))||r.push(c))}return[n,s,r]}const Wn=[{path:"/",component:{template:"<div><br>Login</div>"},props:!0},{path:"/home",component:"<div><h1>HOME</h1></div>",props:!0},{path:"/404",component:{template:"<h1>404</h1>"}},{path:"/:table",component:"<div><h1>TABLE</h1></div>"},{path:"/:table/:id",component:"<div><h1>FORM</h1></div>"}],Qn=Kn({history:hn(),routes:Wn});class Jn{constructor(e=void 0){e===void 0||import(resolve(e)).then(n=>{console.log(n)})}loadRoutes(){}loadEvents(){}loadClient(){}loadCustomComponents(){}}function Zn(t,e){const n=Ut(r),s=zt(n);t.use(s),t.use(Qn);const r=new Jn}var es={install:Zn};return es});
