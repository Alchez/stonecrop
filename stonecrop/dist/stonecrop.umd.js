!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("vue")):"function"==typeof define&&define.amd?define(["vue"],e):(t="undefined"!=typeof globalThis?globalThis:t||self).Stonecrop=e(t.Vue)}(this,(function(t){"use strict";const e=(()=>{let t;try{t="production"}catch(e){t="development"}return t})(),n=Symbol("IS_PROXY"),r=Symbol("PATH"),s=Symbol("VALUE"),o=Symbol("PROXY_TREE"),i=new Set(["push","shift","pop","unshift","splice","reverse","sort","copyWithin"]),a=t=>t&&t[n]?t[s]:t,c=t=>"object"==typeof t&&null!==t&&!Array.isArray(t)&&"Object"!==t.constructor.name&&Object.isExtensible(t),u=t=>void 0!==t&&(!c(t)||c(t)&&!(t instanceof Date)&&!(t instanceof Map)&&!(t instanceof Set));class l{constructor(t){this.tree=t,this.CACHED_PROXY=Symbol("CACHED_PROXY"),this.delimiter=t.master.options.delimiter,this.ssr=Boolean(t.master.options.ssr)}concat(t,e){return t?t+this.delimiter+e:e}ensureMutationTrackingIsEnabled(t){if("production"!==e&&this.tree.master.options.devmode&&!this.tree.canMutate())throw new Error(`proxy-state-tree - You are mutating the path "${t}", but it is not allowed. The following could have happened:\n        \n        - The mutation is explicitly being blocket\n        - You are passing state to a 3rd party tool trying to manipulate the state\n        - You are running asynchronous code and forgot to "await" its execution\n        `)}isDefaultProxifier(){return this.tree.proxifier===this.tree.master.proxifier}ensureValueDosntExistInStateTreeElsewhere(t){if("production"!==e){if(t&&!0===t[n])throw new Error(`proxy-state-tree - You are trying to insert a value that already exists in the state tree on path "${t[r]}"`);return t}}trackPath(t){if(this.tree.canTrack())if(this.isDefaultProxifier()){const e=this.tree.master.currentTree;if(!e)return;e.addTrackingPath(t)}else this.tree.addTrackingPath(t)}getTrackingTree(){return this.tree.master.currentTree&&this.isDefaultProxifier()?this.tree.master.currentTree:this.tree.canTrack()&&this.tree.canTrack()?this.tree:null}getMutationTree(){return this.tree.master.mutationTree||this.tree}isProxyCached(t,e){return t[this.CACHED_PROXY]&&String(t[this.CACHED_PROXY][r])===String(e)}createArrayProxy(t,o){if(!this.ssr&&this.isProxyCached(t,o))return t[this.CACHED_PROXY];const c=this,l=new Proxy(t,{get(l,h){if(h===n)return!0;if(h===r)return o;if(h===s)return t;if("indexOf"===h)return(e,n)=>t.indexOf(a(e),a(n));if("length"===h||"function"==typeof l[h]&&!i.has(String(h))||"symbol"==typeof h)return l[h];const d=c.getTrackingTree(),f=c.concat(o,h),p=d||c.tree;d&&d.proxifier.trackPath(f),p.trackPathListeners.forEach((t=>t(f)));const m=String(h);return i.has(m)?(...t)=>{const n=c.getMutationTree();let r;return r="production"===e?l[h](...t):l[h](...t.map((t=>c.ensureValueDosntExistInStateTreeElsewhere(t)))),n.addMutation({method:m,path:o,delimiter:c.delimiter,args:t,hasChangedValue:!0}),r}:u(l[h])?c.proxify(l[h],f):l[h]},set(t,e,n){const r=c.concat(o,e),s=c.getMutationTree(),i=Reflect.set(t,e,n);return s.addMutation({method:"set",path:r,args:[n],delimiter:c.delimiter,hasChangedValue:!0}),i}});return this.ssr||Object.defineProperty(t,this.CACHED_PROXY,{value:l,configurable:!0}),l}createObjectProxy(t,e){if(!this.ssr&&this.isProxyCached(t,e))return t[this.CACHED_PROXY];const i=this,a=new Proxy(t,{get(l,h){if(h===n)return!0;if(h===r)return e;if(h===s)return t;if(h===o)return i.tree;if("symbol"==typeof h||h in Object.prototype)return l[h];const d=Object.getOwnPropertyDescriptor(l,h)||Object.getPrototypeOf(l)&&Object.getOwnPropertyDescriptor(Object.getPrototypeOf(l),h);if(d&&"get"in d){const t=d.get.call(a);return i.tree.master.options.devmode&&i.tree.master.options.onGetter&&i.tree.master.options.onGetter(i.concat(e,h),t),t}const f=i.getTrackingTree(),p=l[h],m=i.concat(e,h),g=f||i.tree;return"function"==typeof p?i.tree.master.options.onGetFunction?i.tree.master.options.onGetFunction(f||i.tree,m,l,h):c(l)?p:p.call(l,i.tree,m):(g.trackPathListeners.forEach((t=>t(m))),f&&f.proxifier.trackPath(m),u(p)?i.proxify(p,m):p)},set(t,n,r){const s=i.concat(e,n);let o;n in t||(o=e);const a=i.getMutationTree(),c=t[n];"function"==typeof r&&i.tree.master.options.onSetFunction&&(r=i.tree.master.options.onSetFunction(i.getTrackingTree()||i.tree,s,t,n,r));const u=c!==r,l=Reflect.set(t,n,r);return a.addMutation({method:"set",path:s,args:[r],delimiter:i.delimiter,hasChangedValue:u},o),l},deleteProperty(t,n){const r=i.concat(e,n);let s;n in t&&(s=e);const o=i.getMutationTree();return delete t[n],o.addMutation({method:"unset",path:r,args:[],delimiter:i.delimiter,hasChangedValue:!0},s),!0}});return this.ssr||Object.defineProperty(t,this.CACHED_PROXY,{value:a,configurable:!0}),a}proxify(t,e){if(t){if(t[n]&&(String(t[r])!==String(e)||t[s][this.CACHED_PROXY]!==t))return this.proxify(t[s],e);if(t[n])return t;if(Array.isArray(t))return this.createArrayProxy(t,e);if((t=>"[object Object]"===String(t)&&"Object"===t.constructor.name)(t)||c(t))return this.createObjectProxy(t,e)}return t}}class h{constructor(t,e){this.mutationCallbacks=[],this.mutations=[],this.objectChanges=new Set,this.isTracking=!1,this.isBlocking=!1,this.trackPathListeners=[],this.isTracking=!0,this.master=t,this.proxifier=e||new l(this),this.state=this.proxifier.proxify(t.sourceState,"")}trackPaths(){const t=new Set,e=e=>{t.add(e)};return this.trackPathListeners.push(e),()=>(this.trackPathListeners.splice(this.trackPathListeners.indexOf(e),1),t)}getMutations(){const t=this.mutations.slice();return this.mutations.length=0,t}getObjectChanges(){const t=new Set([...this.objectChanges]);return this.objectChanges.clear(),t}addMutation(t,e){const n=this.master.currentFlushId;this.mutations.push(t),e&&this.objectChanges.add(e);for(const r of this.master.mutationCallbacks)r(t,new Set(e?[t.path,e]:[t.path]),n);for(const r of this.mutationCallbacks)r(t,new Set(e?[t.path,e]:[t.path]),n)}flush(t=!1){return this.master.flush(this,t)}onMutation(t){this.mutationCallbacks.push(t)}canMutate(){return this.isTracking&&!this.isBlocking}canTrack(){return!1}blockMutations(){this.isBlocking=!0}enableMutations(){this.isBlocking=!1}dispose(){return this.isTracking=!1,this.mutationCallbacks.length=0,this.proxifier=this.master.proxifier,this}}class d{constructor(t){this.pathDependencies=new Set,this.shouldTrack=!1,this.trackPathListeners=[],this.master=t,this.proxifier=t.proxifier,this.state=t.state}trackPaths(){const t=new Set,e=e=>{t.add(e)};return this.trackPathListeners.push(e),()=>(this.trackPathListeners.splice(this.trackPathListeners.indexOf(e),1),t)}canMutate(){return!1}canTrack(){return!0}addTrackingPath(t){this.shouldTrack&&(this.pathDependencies.add(t),this.callback&&this.master.addPathDependency(t,this.callback))}track(t){return this.master.changeTrackStateTree(this),this.shouldTrack=!0,this.clearTracking(),t&&(this.callback=(...e)=>{this.callback&&t(...e)}),this}clearTracking(){if(this.callback)for(const t of this.pathDependencies)this.master.removePathDependency(t,this.callback);this.pathDependencies.clear()}stopTracking(){this.shouldTrack=!1}trackScope(t,e){const n=this.master.previousTree,r=this.master.currentTree;this.master.currentTree=this,this.track(e);const s=t(this);return this.master.currentTree=r,this.master.previousTree=n,this.stopTracking(),s}dispose(){return this.callback?(this.clearTracking(),this.callback=null,this.proxifier=this.master.proxifier,this.master.currentTree===this&&(this.master.currentTree=null),this):(this.pathDependencies.clear(),this)}}class f{constructor(t,e={}){this.cache={mutationTree:[],trackStateTree:[]},this.flushCallbacks=[],this.mutationCallbacks=[],this.currentFlushId=0,this.pathDependencies={},void 0===e.devmode&&(e.devmode=!0),e.delimiter||(e.delimiter="."),this.master=this,this.sourceState=t,this.options=e,this.createTrackStateProxifier()}createTrackStateProxifier(){const t=new d(this);this.proxifier=t.proxifier=new l(t),this.state=t.state=this.proxifier.proxify(this.sourceState,"")}getMutationTree(){if(!this.options.devmode)return this.mutationTree=this.mutationTree||new h(this,this.proxifier);return this.cache.mutationTree.pop()||new h(this)}getTrackStateTree(){return this.cache.trackStateTree.pop()||new d(this)}getTrackStateTreeWithProxifier(){const t=this.getTrackStateTree();return this.options.ssr?t.state=this.sourceState:(t.proxifier=new l(t),t.state=t.proxifier.proxify(this.sourceState,"")),t}changeTrackStateTree(t){this.previousTree=this.currentTree,this.currentTree=t}disposeTree(t){t instanceof h?this.cache.mutationTree.push(t.dispose()):t instanceof d&&this.cache.trackStateTree.push(t.dispose())}onMutation(t){return this.mutationCallbacks.push(t),()=>{this.mutationCallbacks.splice(this.mutationCallbacks.indexOf(t),1)}}forceFlush(){const t=[],e=[];for(const n in this.pathDependencies){this.pathDependencies[n].forEach((n=>{n(t,e,this.currentFlushId++,!1)}))}}flush(t,e=!1){let n;if(n=Array.isArray(t)?t.reduce(((t,e)=>({mutations:t.mutations.concat(e.getMutations()),objectChanges:new Set([...t.objectChanges,...e.getObjectChanges()])})),{mutations:[],objectChanges:new Set}):{mutations:t.getMutations(),objectChanges:t.getObjectChanges()},!n.mutations.length&&!n.objectChanges.size)return{mutations:[],flushId:null};const r=new Set,s=new Set,o=this.currentFlushId++;for(const c of n.objectChanges)this.pathDependencies[c]&&r.add(c);for(const c of n.mutations)c.hasChangedValue&&r.add(c.path);const i=Array.from(r).sort();for(const c of i)if(this.pathDependencies[c])for(const t of this.pathDependencies[c])s.add(t);for(const c of s)c(n.mutations,i,o,e);const a=this.flushCallbacks.slice();for(const c of a)this.flushCallbacks.includes(c)&&c(n.mutations,i,o,e);return r.clear(),s.clear(),{mutations:n.mutations,flushId:o}}onFlush(t){return this.flushCallbacks.push(t),()=>this.flushCallbacks.splice(this.flushCallbacks.indexOf(t),1)}rescope(t,e){return t&&t[n]?e.proxifier.proxify(t[s],t[r]):t}addPathDependency(t,e){this.pathDependencies[t]||(this.pathDependencies[t]=new Set),this.pathDependencies[t].add(e)}removePathDependency(t,e){this.pathDependencies[t].delete(e),this.pathDependencies[t].size||delete this.pathDependencies[t]}toJSON(){return this.sourceState}}var p,m;(m=p||(p={})).ACTION_START="action:start",m.ACTION_END="action:end",m.OPERATOR_START="operator:start",m.OPERATOR_END="operator:end",m.OPERATOR_ASYNC="operator:async",m.MUTATIONS="mutations",m.EFFECT="effect",m.DERIVED="derived",m.DERIVED_DIRTY="derived:dirty",m.COMPONENT_ADD="component:add",m.COMPONENT_UPDATE="component:update",m.COMPONENT_REMOVE="component:remove",m.GETTER="getter";const g=Symbol("IS_DERIVED"),y=Symbol("IS_DERIVED_CONSTRUCTOR");class v{constructor(t){this.cb=t,this.isDirty=!0,this.updateCount=0;const e=this.evaluate.bind(this);return e[g]=!0,e}runScope(t,e){const n=e.slice(0,e.length-1).reduce(((t,e)=>t[e]),t.state);return this.cb(n,t.state)}evaluate(t,e,r,s){if(this.disposeOnMutation||(this.disposeOnMutation=r.onMutation(((e,n,o)=>{if("function"==typeof s.reduce(((t,e)=>t&&t[e]),r.sourceState)){if(!this.isDirty)for(const r of n)if(this.paths.has(r))return this.isDirty=!0,void t.emitAsync(p.DERIVED_DIRTY,{derivedPath:s,path:r,flushId:o})}else this.disposeOnMutation()}))),this.isDirty||this.previousProxifier!==e.proxifier){const t=e.trackPaths();this.value=this.runScope(e,s),this.isDirty=!1,this.paths=t()}if(e instanceof d)for(const n of this.paths)e.addTrackingPath(n),e.trackPathListeners.forEach((t=>t(n)));return this.previousProxifier=e.proxifier,this.value&&this.value[n]?r.rescope(this.value,e):this.value}}var b=function(){function t(){this.events=new Map}return t.prototype.emit=function(t,e){for(var n=this.events.get(t)||[],r=n.length-1;r>=0;r--){var s=n[r];s.cb(e),s.once&&n.splice(r,1)}},t.prototype.emitAsync=function(t,e){var n=this.events.get(t)||[];setTimeout((function(){for(var t=n.length-1;t>=0;t--){var r=n[t];r.cb(e),r.once&&n.splice(t,1)}}))},t.prototype.on=function(t,e){this.addListener(t,e,!1)},t.prototype.once=function(t,e){this.addListener(t,e,!0)},t.prototype.addListener=function(t,e,n){var r=this.events.get(t)||[];r.push({once:n,cb:e}),this.events.set(t,r)},t}(),O=Object.prototype.toString,T=function(t){var e;return"[object Object]"===O.call(t)&&(null===(e=Object.getPrototypeOf(t))||e===Object.getPrototypeOf({}))};
/*! *****************************************************************************
      Copyright (c) Microsoft Corporation.
  
      Permission to use, copy, modify, and/or distribute this software for any
      purpose with or without fee is hereby granted.
  
      THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
      REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
      AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
      INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
      LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
      OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
      PERFORMANCE OF THIS SOFTWARE.
      ***************************************************************************** */
function E(t,e,n,r){return new(n||(n=Promise))((function(s,o){function i(t){try{c(r.next(t))}catch(e){o(e)}}function a(t){try{c(r.throw(t))}catch(e){o(e)}}function c(t){var e;t.done?s(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,a)}c((r=r.apply(t,e||[])).next())}))}function w(t,e,n={}){if(!t||!e)throw new Error('You have to pass a "target" and "source" object to rehydrate');Object.keys(e).forEach((r=>{const s=e[r],o=n[r];"function"==typeof o&&Array.isArray(t[r])?t[r]=e[r].map((t=>o(t))):"function"==typeof o&&"object"==typeof t[r]&&null!==t[r]&&"Object"===t[r].constructor.name?t[r]=Object.keys(e[r]).reduce(((t,n)=>(t[n]=o(e[r][n]),t)),{}):"function"==typeof o?t[r]=o(e[r]):"object"!=typeof s||Array.isArray(s)||null===s?t[r]=e[r]:(t[r]||(t[r]={}),w(t[r],e[r],n[r]))}))}const S=Symbol("SERIALIZE"),k=(t,e,n={})=>{if(Array.isArray(e)){e.forEach((e=>{const r=e.path.split(e.delimiter),s=r.pop(),o=r.reduce(((t,e)=>t[e]),t),i=r.reduce(((t,e)=>t&&t[e]),n);"set"===e.method?"function"==typeof i&&Array.isArray(e.args[0])?o[s]=e.args[0].map((t=>i(t))):o[s]="function"==typeof i?i(e.args[0]):e.args[0]:"unset"===e.method?delete o[s]:o[s][e.method].apply(o[s],"function"==typeof i?e.args.map((t=>"object"==typeof t&&null!==t?i(t):t)):e.args)}))}else w(t,e,n)};class x{constructor(t){this.safeClassNames=new Set,this.unsafeClassNames=new Set,this.circularReferenceCache=[],this.buffer=[],this.serializer=Promise.resolve(),this.isConnected=!1,this.doReconnect=!1,this.hasWarnedReconnect=!1,this.reconnectInterval=1e4,this.connect=(t,e)=>{t=t||"localhost:3031",this.ws=new WebSocket(`ws://${t}?name=${this.name}`),this.ws.onmessage=t=>{const n=JSON.parse(t.data);n.appName===this.name&&e(n)},this.ws.onopen=()=>{this.isConnected=!0,this.flushBuffer()},this.ws.onerror=()=>{console.error(`OVERMIND DEVTOOLS: Not able to connect. You are trying to connect to "${t}", but there was no devtool there. Try the following:\n        \n          - Make sure you are running the latest version of the devtools, using "npx overmind-devtools@latest" or install latest extension for VSCode\n          - Close the current tab and open a new one\n          - Make sure the correct port is configured in the devtools\n        `)},this.ws.onclose=()=>{this.isConnected=!1,this.doReconnect&&!this.hasWarnedReconnect&&(console.warn("Debugger application is not running on selected port... will reconnect automatically behind the scenes"),this.hasWarnedReconnect=!0),this.doReconnect&&this.reconnect(t,e)}},this.sendMessage=t=>{this.isConnected?this.ws.send(`{"appName":"${this.name}","message":${t}}`):this.buffer.push(t)},this.flushBuffer=()=>E(this,void 0,void 0,(function*(){this.buffer.forEach((t=>{this.sendMessage(t)})),this.buffer.length=0})),this.name="undefined"!=typeof location&&location.search.includes("OVERMIND_DEVTOOL")?t+" (Overmind Devtool)":t}reconnect(t,e){setTimeout((()=>this.connect(t,e)),this.reconnectInterval)}send(t){const e=this.safeClassNames,n=this.unsafeClassNames,r=this.circularReferenceCache;this.sendMessage(JSON.stringify(t,(function(t,s){if("function"==typeof s)return"[Function]";if(this.__CLASS__)return s;if(s&&s[S])return{__CLASS__:!0,name:s.constructor.name,value:s};if("object"==typeof s&&null!==s&&!Array.isArray(s)&&s.constructor&&"Object"!==s.constructor.name){if(r.includes(s))return`[CIRCULAR REFERENCE: ${s.constructor.name}]`;if(r.push(s),!e.has(s.constructor.name)&&!n.has(s.constructor.name))try{JSON.stringify(s),e.add(s.constructor.name)}catch(o){n.add(s.constructor.name)}return e.has(s.constructor.name)?{__CLASS__:!0,name:s.constructor.name,value:s}:`[${s.constructor.name||"NOT SERIALIZABLE"}]`}return s}))),r.length=0}}let j=!1,A=0;const R=Symbol("ORIGIN_TARGET");function C(t,e,n=""){return"object"==typeof(r=t)&&!Array.isArray(r)&&null!==r||"function"==typeof t?new Proxy(t,{apply(t,r,s){const o=A++,i=n.split("."),a=i.pop();return e({func:t.bind(r?r[R]:void 0),effectId:o,name:i.join("."),method:a,args:s})},construct:(t,e)=>(j||(console.warn(`EFFECTS - It is highly recommended to create a custom effect, exposing a method that deals with the instantiation of "${n}". It improves readability and debugability of your app`),j=!0),new t(...e)),get:(t,r)=>r===R?t:C(t[r],e,n?n+"."+r.toString():r.toString())}):t;var r}const P=()=>({actions:t},e)=>{const n=B("onInitializeOvermind",t);return Promise.all(n.map((t=>t(e))))},I=(()=>{let t;try{t="production"}catch(e){console.warn("Overmind was unable to determine the NODE_ENV, which means it will run in DEVELOPMENT mode. If this is a production app, please configure your build tool to define NODE_ENV"),t="development"}return t})(),D="test"===I,M=Symbol("operator"),_=Symbol("origina_actions"),N=Symbol("execution"),L=Symbol("MODE_DEFAULT"),F=Symbol("MODE_TEST"),$=Symbol("MODE_SSR");class H{emit(){}emitAsync(){}on(){}once(){}addListener(){}}function V(t){return t instanceof Promise||t&&"function"==typeof t.then&&"function"==typeof t.catch}function Y(t){return Object.keys(t).reduce(((e,n)=>{if("__esModule"===n)return e;const r=Object.getOwnPropertyDescriptor(t,n);if(r&&"get"in r)return Object.defineProperty(e,n,r),e;const s=t[n];return T(s)?e[n]=Y(s):Object.defineProperty(e,n,r),e}),T(t)?{}:t)}function U(t,e,n=[],r=[]){const s=Object.keys(t),o=Object.keys(e);return s.forEach((t=>{o.includes(t)||r.push({delimiter:".",args:[],path:n.concat(t).join("."),hasChangedValue:!1,method:"unset"})})),o.forEach((s=>{T(t[s])&&T(e[s])?U(t[s],e[s],n.concat(s),r):t[s]!==e[s]&&r.push({delimiter:".",args:[e[s]],path:n.concat(s).join("."),hasChangedValue:!1,method:"set"})})),r}function B(t,e={},n=[]){return Object.keys(e).reduce(((r,s)=>"function"==typeof e[s]&&s===t?r.concat(e[s]):r.concat(B(t,e[s],n.concat(s)))),[])}function G(t={},e=[]){return Object.keys(t).reduce(((n,r)=>"function"==typeof t[r]?n.concat(e.concat(r).join(".")):n.concat(G(t[r],e.concat(r)))),[])}function q(t,e){return new Proxy(t,{get:(n,r)=>r===_?t:"function"==typeof n[r]?e(n[r]):n[r]?q(n[r],e):void 0})}const z={};class W{constructor(t,e={},o={mode:L}){this.actionReferences={},this.nextExecutionId=0,this.reydrateMutationsForHotReloading=[],this.isStrict=!1,this.reaction=(t,e,s={})=>{let o;if(s.nested){const s=t(this.state);if(!s||!s[n])throw new Error('You have to return an object or array from the Overmind state when using a "nested" reaction');const i=s[r];o=this.addFlushListener((t=>{t.forEach((t=>{t.path.startsWith(i)&&e(i?i.split(this.delimiter).reduce(((t,e)=>t[e]),this.state):this.state)}))}))}else{const n=this.proxyStateTreeInstance.getTrackStateTree();let r;const s=()=>{n.trackScope((()=>r=t(n.state)),(()=>{s(),e(r)}))};s(),o=()=>{n.dispose()}}return s.immediate&&e(t(this.state)),o},this.addMutationListener=t=>this.proxyStateTreeInstance.onMutation(t),this.addFlushListener=t=>this.proxyStateTreeInstance.onFlush(t);const i=e.name||"OvermindApp",a=e.devEnv||"development",c="undefined"!=typeof process&&process.title&&process.title.includes("node");if(this.delimiter=e.delimiter||".",this.isStrict=Boolean(e.strict),I===a&&o.mode===L&&!1!==e.hotReloading&&!c){if(z[i])return z[i].reconfigure(t);z[i]=this}const u=o.mode===$?new H:new b,l=this.createProxyStateTree(t,u,o.mode===F||I===a,o.mode===$);if(this.originalConfiguration=t,this.state=l.state,this.effects=t.effects||{},this.proxyStateTreeInstance=l,this.eventHub=u,this.mode=o,this.actions=this.getActions(t.actions),o.mode!==$){if(I===a&&o.mode===L&&"undefined"!=typeof window){let r="OVERMIND: You are running in DEVELOPMENT mode.";if(!0!==e.logProxies){const t=console.log;console.log=(...e)=>t.apply(console,e.map((t=>t&&t[n]?t[s]:t))),r+='\n\n - To improve debugging experience "console.log" will NOT log proxies from Overmind, but the actual value. Please see docs to turn off this behaviour'}if(e.devtools||"undefined"!=typeof location&&"localhost"===location.hostname&&!1!==e.devtools){const n=!0===e.devtools?"localhost:3031":e.devtools,r=e.name?e.name:"undefined"==typeof document?"NoName":document.title||"NoName";this.initializeDevtools(n,r,u,l.sourceState,t.actions)}else!1!==e.devtools&&(r+="\n\n - You are not running on localhost. You will have to manually define the devtools option to connect");D||console.warn(r)}if("production"===I&&o.mode===L){let t;u.on(p.OPERATOR_ASYNC,(t=>{t.parentExecution&&t.parentExecution.isRunning||l.getMutationTree().flush(!0)})),u.on(p.ACTION_END,(t=>{t.parentExecution&&t.parentExecution.isRunning||l.getMutationTree().flush()}));const e=()=>{l.getMutationTree().flush(!0)};this.proxyStateTreeInstance.onMutation((()=>{t&&clearTimeout(t),t=setTimeout(e,0)}))}else o.mode!==L&&o.mode!==F||(("test"===I||this.devtools&&!1!==e.hotReloading)&&u.on(p.MUTATIONS,(t=>{this.reydrateMutationsForHotReloading=this.reydrateMutationsForHotReloading.concat(t.mutations)})),u.on(p.OPERATOR_ASYNC,(t=>{if(!t.parentExecution||!t.parentExecution.isRunning){const e=t.flush(!0);this.devtools&&e.mutations.length&&this.devtools.send({type:"flush",data:Object.assign(Object.assign({},t),e)})}})),u.on(p.ACTION_END,(t=>{if(!t.parentExecution||!t.parentExecution.isRunning){const e=t.flush();this.devtools&&e.mutations.length&&this.devtools.send({type:"flush",data:Object.assign(Object.assign({},t),e)})}})));if(o.mode===L){const t=this.createAction("onInitialize",P());this.initialized=Promise.resolve(t(this))}else this.initialized=Promise.resolve(null)}}createProxyStateTree(t,e,n,r){const s=new f(this.getState(t),{devmode:n&&!r,ssr:r,delimiter:this.delimiter,onSetFunction:(t,e,n,r,s)=>s[y]?new v(s):s,onGetFunction:(t,n,r,o)=>{const i=r[o];if(i[g])return i(e,t,s,n.split(this.delimiter));if(i[y]){const a=new v(i);return r[o]=a,a(e,t,s,n.split(this.delimiter))}return i},onGetter:n?(t,e)=>{this.eventHub.emitAsync(p.GETTER,{path:t,value:e})}:void 0});return s}createExecution(t,e,n){const r=t.split(".");if(r.pop(),"production"===I)return{[N]:!0,parentExecution:n,namespacePath:r,actionName:t,getMutationTree:()=>this.proxyStateTreeInstance.getMutationTree(),getTrackStateTree:()=>this.proxyStateTreeInstance.getTrackStateTree(),emit:this.eventHub.emit.bind(this.eventHub)};const s=[];return{[N]:!0,namespacePath:r,actionId:t,executionId:this.nextExecutionId++,actionName:t,operatorId:0,isRunning:!0,parentExecution:n,path:[],emit:this.eventHub.emit.bind(this.eventHub),send:this.devtools?this.devtools.send.bind(this.devtools):()=>{},trackEffects:this.trackEffects.bind(this,this.effects),getNextOperatorId:(()=>{let t=0;return()=>++t})(),flush:n?n.flush:t=>this.proxyStateTreeInstance.flush(s,t),getMutationTree:n?n.getMutationTree:()=>{const t=this.proxyStateTreeInstance.getMutationTree();return s.push(t),t},getTrackStateTree:()=>this.proxyStateTreeInstance.getTrackStateTree(),onFlush:t=>this.proxyStateTreeInstance.onFlush(t),scopeValue:(t,e)=>this.scopeValue(t,e)}}createContext(t,e){return{state:e.state,actions:q(this.actions,(e=>n=>e(n,t.isRunning?t:null))),execution:t,proxyStateTree:this.proxyStateTreeInstance,effects:this.trackEffects(this.effects,t),addNamespace:this.addNamespace.bind(this),reaction:this.reaction.bind(this),addMutationListener:this.addMutationListener.bind(this),addFlushListener:this.addFlushListener.bind(this)}}addNamespace(t,e,n){const r=n||this.state,s=e.pop();if(t.state){e.reduce(((t,e)=>t[e]),r)[s]=Y(t.state)}if(t.actions){e.reduce(((t,e)=>t[e]),this.actions)[s]=this.getActions(t.actions)}if(t.effects){e.reduce(((t,e)=>t[e]),this.effects)[s]=t.effects}}scopeValue(t,e){return t?t[n]?this.proxyStateTreeInstance.rescope(t,e):T(t)?Object.assign({},...Object.keys(t).map((n=>({[n]:this.proxyStateTreeInstance.rescope(t[n],e)})))):t:t}addExecutionMutation(t){this.mutations.push(t)}createAction(t,e){this.actionReferences[t]=e;return(e,n)=>{const r=this.actionReferences[t];if(n=n&&n[N]?n:void 0,"production"===I||r[M]||this.mode.mode===$){const s=this.createExecution(t,r,n);if(this.eventHub.emit(p.ACTION_START,Object.assign(Object.assign({},s),{value:e})),r[M])return new Promise(((t,n)=>{r(null,Object.assign(Object.assign({},this.createContext(s,this.proxyStateTreeInstance)),{value:e}),((e,r)=>{s.isRunning=!1,r&&this.eventHub.emit(p.ACTION_END,Object.assign(Object.assign({},r.execution),{operatorId:r.execution.operatorId-1})),e?n(e):t(r.value)}))}));{const t=s.getMutationTree();this.isStrict&&t.blockMutations();const n=r(this.createContext(s,t),e);return this.eventHub.emit(p.ACTION_END,s),n}}{const o=Object.assign(Object.assign({},this.createExecution(t,r,n)),{operatorId:0,type:"action"});this.eventHub.emit(p.ACTION_START,Object.assign(Object.assign({},o),{value:e})),this.eventHub.emit(p.OPERATOR_START,o);const i=o.getMutationTree();this.isStrict&&i.blockMutations(),i.onMutation((t=>{this.eventHub.emit(p.MUTATIONS,Object.assign(Object.assign({},o),{mutations:[t]}))}));const a=this.scopeValue(e,i),c=this.createContext(o,i);try{let t;i.onMutation((e=>{t&&clearTimeout(t),this.mode.mode===F?this.addExecutionMutation(e):this.mode.mode===L&&(t=setTimeout((()=>{t=null;const e=o.flush(!0);this.devtools&&e.mutations.length&&this.devtools.send({type:"flush",data:Object.assign(Object.assign(Object.assign({},o),e),{mutations:e.mutations})})})))}));let e=r(c,a);return V(e)?(this.eventHub.emit(p.OPERATOR_ASYNC,o),e=e.then((t=>(o.isRunning=!1,n||i.dispose(),this.eventHub.emit(p.OPERATOR_END,Object.assign(Object.assign({},o),{isAsync:!0,result:void 0})),this.eventHub.emit(p.ACTION_END,o),t))).catch((t=>{throw o.isRunning=!1,n||i.dispose(),this.eventHub.emit(p.OPERATOR_END,Object.assign(Object.assign({},o),{isAsync:!0,result:void 0,error:t.message})),this.eventHub.emit(p.ACTION_END,o),t}))):(o.isRunning=!1,n||i.dispose(),this.eventHub.emit(p.OPERATOR_END,Object.assign(Object.assign({},o),{isAsync:!1,result:void 0})),this.eventHub.emit(p.ACTION_END,o)),e}catch(s){throw this.eventHub.emit(p.OPERATOR_END,Object.assign(Object.assign({},o),{isAsync:!1,result:void 0,error:s.message})),this.eventHub.emit(p.ACTION_END,o),s}}}}trackEffects(t={},e){return"production"===I?t:C(this.effects,(t=>{let n;try{if(this.mode.mode===F){n=this.mode.options.effectsCallback(t)}else this.eventHub.emit(p.EFFECT,Object.assign(Object.assign(Object.assign({},e),t),{args:t.args,isPending:!0,error:!1})),n=t.func.apply(this,t.args)}catch(r){throw this.eventHub.emit(p.EFFECT,Object.assign(Object.assign(Object.assign({},e),t),{args:t.args,isPending:!1,error:r.message})),r}return V(n)?(this.eventHub.emit(p.EFFECT,Object.assign(Object.assign(Object.assign({},e),t),{args:t.args,isPending:!0,error:!1})),n.then((n=>(this.eventHub.emit(p.EFFECT,Object.assign(Object.assign(Object.assign({},e),t),{args:t.args,result:n,isPending:!1,error:!1})),n))).catch((n=>{throw this.eventHub.emit(p.EFFECT,Object.assign(Object.assign(Object.assign({},e),t),{args:t.args,isPending:!1,error:n&&n.message})),n}))):(this.eventHub.emit(p.EFFECT,Object.assign(Object.assign(Object.assign({},e),t),{args:t.args,result:n,isPending:!1,error:!1})),n)}))}initializeDevtools(t,e,n,r,s){if("production"===I)return;const o=new x(e);o.connect(t,(t=>{switch(t.type){case"refresh":location.reload();break;case"executeAction":{const e=t.data.name.split(".").reduce(((t,e)=>t[e]),this.actions);t.data.payload?e(JSON.parse(t.data.payload)):e();break}case"mutation":{const e=this.proxyStateTreeInstance.getMutationTree(),n=t.data.path.slice(),r=JSON.parse(`{ "value": ${t.data.value} }`).value,s=n.pop();n.reduce(((t,e)=>t[e]),e.state)[s]=r,e.flush(!0),e.dispose(),this.devtools.send({type:"state",data:{path:t.data.path,value:r}});break}}}));for(const i in p)n.on(p[i],(t=>e=>{o.send({type:p[i],data:e}),t===p.MUTATIONS&&e.mutations.forEach((t=>{const e=t.path.split(this.delimiter).reduce(((t,e)=>t[e]),this.proxyStateTreeInstance.state);T(e)?Object.keys(e).forEach((t=>e[t])):Array.isArray(e)&&e.forEach((t=>{T(t)&&Object.keys(t).forEach((e=>t[e]))}))})),t===p.DERIVED_DIRTY&&e.derivedPath.reduce(((t,e)=>t[e]),this.proxyStateTreeInstance.state)})(p[i]));o.send({type:"init",data:{state:this.proxyStateTreeInstance.state,actions:G(s),delimiter:this.delimiter}}),this.devtools=o}getState(t){let e={};return t.state&&(e=Y(t.state)),e}getActions(t={},e=[]){return Object.keys(t).reduce(((n,r)=>{if("function"==typeof t[r]){const s=this.createAction(e.concat(r).join("."),t[r]);return s.displayName=e.concat(r).join("."),Object.assign(n,{[r]:s})}return Object.assign(n,{[r]:this.getActions(t[r],e.concat(r))})}),{})}updateActions(t={},e=[]){Object.keys(t).forEach((n=>{if("function"==typeof t[n]){const r=e.concat(n).join(".");if(this.actionReferences[r])this.actionReferences[r]=t[n];else{const s=e.reduce(((t,e)=>(t[e]||(t[e]={}),t[e])),this.actions);s[n]=this.createAction(r,t[n]),s[n].displayName=e.concat(n).join(".")}}else this.updateActions(t[n],e.concat(n))}),{})}getTrackStateTree(){return this.proxyStateTreeInstance.getTrackStateTree()}getMutationTree(){return this.proxyStateTreeInstance.getMutationTree()}reconfigure(t){const e=U(this.originalConfiguration.state,t.state||{});this.updateActions(t.actions),this.effects=t.effects||{};const n=this.proxyStateTreeInstance.getMutationTree();return k(n.state,e),this.reydrateMutationsForHotReloading.forEach((t=>{try{k(n.state,[t])}catch(e){}})),n.flush(),n.dispose(),this.devtools&&this.devtools.send({type:"re_init",data:{state:this.state,actions:G(t.actions)}}),this}}const X=Symbol("OVERMIND"),J="production"===I;let K=0;const Z=t=>({install(e,n=(({state:t,actions:e,effects:n})=>({state:t,actions:e,effects:n}))){e.mixin(function(t,e,n=!1){const r=K++;let s=0;return Object.assign(Object.assign({beforeCreate(){t.mode.mode===$?(this.overmind={state:t.state,actions:t.actions,effects:t.effects,addMutationListener:t.addMutationListener,reaction:t.reaction},e&&Object.assign(this,e({state:t.state,actions:t.actions,effects:t.effects}))):(this[X]={tree:t.proxyStateTreeInstance.getTrackStateTree(),componentInstanceId:s++,onUpdate:(t,e,n)=>{this[X].currentFlushId=n,this[X].isUpdating=!0,this.$forceUpdate()},isUpdating:!1},this.overmind={state:this[X].tree.state,actions:t.actions,effects:t.effects,addMutationListener:t.addMutationListener,reaction:t.reaction},this[X].tree.track(this[X].onUpdate),e&&Object.assign(this,e({state:this[X].tree.state,actions:t.actions,effects:t.effects})))},beforeUpdate(){t.mode.mode!==$&&(this[X].tree.track(this[X].onUpdate),e&&n&&Object.assign(this,e({state:this[X].tree.state,actions:t.actions,effects:t.effects})))}},J?{updated(){this[X].tree.stopTracking()}}:{mounted(){t.mode.mode!==$&&t.eventHub.emitAsync(p.COMPONENT_ADD,{componentId:r,componentInstanceId:this[X].componentInstanceId,name:this.$options.name||"",paths:Array.from(this[X].tree.pathDependencies)})},updated(){t.mode.mode!==$&&(this[X].tree.stopTracking(),this[X].isUpdating&&(t.eventHub.emitAsync(p.COMPONENT_UPDATE,{componentId:r,componentInstanceId:this[X].componentInstanceId,name:this.$options.name||"",flushId:this[X].currentFlushId,paths:Array.from(this[X].tree.pathDependencies)}),this[X].isUpdating=!1))}}),{beforeDestroy(){t.mode.mode!==$&&(t.proxyStateTreeInstance.disposeTree(this[X].tree),J||t.eventHub.emitAsync(p.COMPONENT_REMOVE,{componentId:r,componentInstanceId:this[X].componentInstanceId,name:this.$options.name||""}))}})}(t,n))}});var Q;const tt={loadRoutes:async function(t){let e={};return await fetch(`${t.user.server}/load_routes`).then((t=>{e=t.json()})).then((t=>console.log(t))),e},loadMeta:async function(t){let e={};return await fetch(`${t.user.server}/api/load_meta?doctype=${t.route.doctype}`).then((t=>{e=t.json()})),e},loadData:async function(t){let e=`${t.user.server}/api/load_data?doctype=${t.routes.currentDoctype}`;t.route.document&&(e+=`&document=${t.routes.currentDocument}`);let n={};return console.log(e),await fetch(e).then((t=>{n=t.json()})).then((t=>console.log(t))),n},saveData:function(t){},ping:function(){return console.log("ping"),"http://localhost:3000"}},et={loadRoutes:function(t){let e={};return fetch(`${t.server}/load_routes`).then((t=>{e=t.json()})),e},loadMeta:function(t){},loadData:function(t){},saveData:function(t){}},nt={loadRoutes:function(t){let e={};return fetch(`${user.server}/load_routes`).then((t=>{e=t.json()})).then((t=>console.log(t))),e},loadMeta:function(t){},loadData:function(t){},saveData:function(t){}};const rt={state:{user:{adaptor:"http",server:"",username:"",token:""},route:{view:"login",module:"",doctype:"",document:"",breadcrumbs:(Q=(t,e)=>{let n=[];return"login"==e.route.view||(e.route.doctype&&n.push({title:e.route.doctype,to:`/${e.route.doctype}`}),e.route.document&&n.push({title:e.route.document,to:`/${e.route.doctype}/${e.route.document}`})),n},Q[y]=!0,Q)},meta:{},data:{}},actions:Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",routeChange:async({state:t,effects:e,actions:n},r)=>{let s=r.path.split("/"),o=r.query.view;1==s.length?(t.route.view=o||"login",t.route.doctype=null,t.route.document=null):2==s.length?(t.route.view=o||"table",t.route.doctype=decodeURI(s[1]),t.route.document=null):3==s.length&&(t.route.view=o||"form",t.route.doctype=decodeURI(s[1]),t.route.document=decodeURI(s[2]))},loadRoutes:async({state:t,effects:e,actions:n})=>{t.route=await e[t.user.adaptor].loadRoutes(t)},loadMeta:async({state:t,effects:e,actions:n})=>{t.route.doctype&&(t.meta[t.route.doctype]=await e[t.user.adaptor].loadMeta(t))},loadData:async({state:t,effects:e,actions:n},r)=>{t.data=await e[t.user.adaptor].loadData(t)},saveData:async({state:t,effects:e,actions:n},r)=>{t.data=await e[t.user.adaptor].saveData(t)},pretend:async({state:t,effects:e,actions:n},r)=>{t.user.server=e.fetch.ping()},onInitializeOvermind:async({state:t,localStorage:e},n)=>{n.addMutationListener((t=>{t.path.split(".")}))}}),effects:Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",http:tt,graphql:et,frappe:nt})},st="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,ot=t=>st?Symbol(t):"_vr_"+t,it=ot("rvlm"),at=ot("rvd"),ct=ot("r"),ut=ot("rl"),lt=ot("rvl"),ht="undefined"!=typeof window;
/*!
    * vue-router v4.0.10
    * (c) 2021 Eduardo San Martin Morote
    * @license MIT
    */const dt=Object.assign;function ft(t,e){const n={};for(const r in e){const s=e[r];n[r]=Array.isArray(s)?s.map(t):t(s)}return n}let pt=()=>{};const mt=/\/$/;function gt(t,e,n="/"){let r,s={},o="",i="";const a=e.indexOf("?"),c=e.indexOf("#",a>-1?a:0);return a>-1&&(r=e.slice(0,a),o=e.slice(a+1,c>-1?c:e.length),s=t(o)),c>-1&&(r=r||e.slice(0,c),i=e.slice(c,e.length)),r=function(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/");let s,o,i=n.length-1;for(s=0;s<r.length;s++)if(o=r[s],1!==i&&"."!==o){if(".."!==o)break;i--}return n.slice(0,i).join("/")+"/"+r.slice(s-(s===r.length?1:0)).join("/")}(null!=r?r:e,n),{fullPath:r+(o&&"?")+o+i,path:r,query:s,hash:i}}function yt(t,e){return e&&t.toLowerCase().startsWith(e.toLowerCase())?t.slice(e.length)||"/":t}function vt(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function bt(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(let n in t)if(!Ot(t[n],e[n]))return!1;return!0}function Ot(t,e){return Array.isArray(t)?Tt(t,e):Array.isArray(e)?Tt(e,t):t===e}function Tt(t,e){return Array.isArray(e)?t.length===e.length&&t.every(((t,n)=>t===e[n])):1===t.length&&t[0]===e}var Et,wt,St,kt;function xt(t){if(!t)if(ht){const e=document.querySelector("base");t=(t=e&&e.getAttribute("href")||"/").replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return"/"!==t[0]&&"#"!==t[0]&&(t="/"+t),t.replace(mt,"")}(wt=Et||(Et={})).pop="pop",wt.push="push",(kt=St||(St={})).back="back",kt.forward="forward",kt.unknown="";const jt=/^[^#]+#/;function At(t,e){return t.replace(jt,"#")+e}const Rt=()=>({left:window.pageXOffset,top:window.pageYOffset});function Ct(t){let e;if("el"in t){let n=t.el;const r="string"==typeof n&&n.startsWith("#"),s="string"==typeof n?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;e=function(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}(s,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(null!=e.left?e.left:window.pageXOffset,null!=e.top?e.top:window.pageYOffset)}function Pt(t,e){return(history.state?history.state.position-e:-1)+t}const It=new Map;function Dt(t,e){const{pathname:n,search:r,hash:s}=e,o=t.indexOf("#");if(o>-1){let e=s.includes(t.slice(o))?t.slice(o).length:1,n=s.slice(e);return"/"!==n[0]&&(n="/"+n),yt(n,"")}return yt(n,t)+r+s}function Mt(t,e,n,r=!1,s=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:s?Rt():null}}function _t(t){const{history:e,location:n}=window;let r={value:Dt(t,n)},s={value:e.state};function o(r,o,i){const a=t.indexOf("#"),c=a>-1?(n.host&&document.querySelector("base")?t:t.slice(a))+r:location.protocol+"//"+location.host+t+r;try{e[i?"replaceState":"pushState"](o,"",c),s.value=o}catch(u){console.error(u),n[i?"replace":"assign"](c)}}return s.value||o(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0),{location:r,state:s,push:function(t,n){const i=dt({},s.value,e.state,{forward:t,scroll:Rt()});o(i.current,i,!0),o(t,dt({},Mt(r.value,t,null),{position:i.position+1},n),!1),r.value=t},replace:function(t,n){o(t,dt({},e.state,Mt(s.value.back,t,s.value.forward,!0),n,{position:s.value.position}),!0),r.value=t}}}function Nt(t){return"string"==typeof t||"symbol"==typeof t}const Lt={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},Ft=ot("nf");var $t,Ht;function Vt(t,e){return dt(new Error,{type:t,[Ft]:!0},e)}function Yt(t,e){return t instanceof Error&&Ft in t&&(null==e||!!(t.type&e))}(Ht=$t||($t={}))[Ht.aborted=4]="aborted",Ht[Ht.cancelled=8]="cancelled",Ht[Ht.duplicated=16]="duplicated";const Ut="[^/]+?",Bt={sensitive:!1,strict:!1,start:!0,end:!0},Gt=/[.+*?^${}()[\]/\\]/g;function qt(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?1===t.length&&80===t[0]?-1:1:t.length>e.length?1===e.length&&80===e[0]?1:-1:0}function zt(t,e){let n=0;const r=t.score,s=e.score;for(;n<r.length&&n<s.length;){const t=qt(r[n],s[n]);if(t)return t;n++}return s.length-r.length}const Wt={type:0,value:""},Xt=/[a-zA-Z0-9_]/;function Jt(t,e,n){const r=function(t,e){const n=dt({},Bt,e);let r=[],s=n.start?"^":"";const o=[];for(const c of t){const t=c.length?[]:[90];n.strict&&!c.length&&(s+="/");for(let e=0;e<c.length;e++){const r=c[e];let i=40+(n.sensitive?.25:0);if(0===r.type)e||(s+="/"),s+=r.value.replace(Gt,"\\$&"),i+=40;else if(1===r.type){const{value:t,repeatable:n,optional:u,regexp:l}=r;o.push({name:t,repeatable:n,optional:u});const h=l||Ut;if(h!==Ut){i+=10;try{new RegExp(`(${h})`)}catch(a){throw new Error(`Invalid custom RegExp for param "${t}" (${h}): `+a.message)}}let d=n?`((?:${h})(?:/(?:${h}))*)`:`(${h})`;e||(d=u&&c.length<2?`(?:/${d})`:"/"+d),u&&(d+="?"),s+=d,i+=20,u&&(i+=-8),n&&(i+=-20),".*"===h&&(i+=-50)}t.push(i)}r.push(t)}if(n.strict&&n.end){const t=r.length-1;r[t][r[t].length-1]+=.7000000000000001}n.strict||(s+="/?"),n.end?s+="$":n.strict&&(s+="(?:/|$)");const i=new RegExp(s,n.sensitive?"":"i");return{re:i,score:r,keys:o,parse:function(t){const e=t.match(i),n={};if(!e)return null;for(let r=1;r<e.length;r++){const t=e[r]||"",s=o[r-1];n[s.name]=t&&s.repeatable?t.split("/"):t}return n},stringify:function(e){let n="",r=!1;for(const s of t){r&&n.endsWith("/")||(n+="/"),r=!1;for(const t of s)if(0===t.type)n+=t.value;else if(1===t.type){const{value:o,repeatable:i,optional:a}=t,c=o in e?e[o]:"";if(Array.isArray(c)&&!i)throw new Error(`Provided param "${o}" is an array but it is not repeatable (* or + modifiers)`);const u=Array.isArray(c)?c.join("/"):c;if(!u){if(!a)throw new Error(`Missing required param "${o}"`);s.length<2&&(n.endsWith("/")?n=n.slice(0,-1):r=!0)}n+=u}}return n}}}(function(t){if(!t)return[[]];if("/"===t)return[[Wt]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(t){throw new Error(`ERR (${n})/"${u}": ${t}`)}let n=0,r=n;const s=[];let o;function i(){o&&s.push(o),o=[]}let a,c=0,u="",l="";function h(){u&&(0===n?o.push({type:0,value:u}):1===n||2===n||3===n?(o.length>1&&("*"===a||"+"===a)&&e(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),o.push({type:1,value:u,regexp:l,repeatable:"*"===a||"+"===a,optional:"*"===a||"?"===a})):e("Invalid state to consume buffer"),u="")}function d(){u+=a}for(;c<t.length;)if(a=t[c++],"\\"!==a||2===n)switch(n){case 0:"/"===a?(u&&h(),i()):":"===a?(h(),n=1):d();break;case 4:d(),n=r;break;case 1:"("===a?n=2:Xt.test(a)?d():(h(),n=0,"*"!==a&&"?"!==a&&"+"!==a&&c--);break;case 2:")"===a?"\\"==l[l.length-1]?l=l.slice(0,-1)+a:n=3:l+=a;break;case 3:h(),n=0,"*"!==a&&"?"!==a&&"+"!==a&&c--,l="";break;default:e("Unknown state")}else r=n,n=4;return 2===n&&e(`Unfinished custom RegExp for param "${u}"`),h(),i(),s}(t.path),n),s=dt(r,{record:t,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf==!e.record.aliasOf&&e.children.push(s),s}function Kt(t,e){const n=[],r=new Map;function s(t,n,r){let a=!r,c=function(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:Zt(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||{}:{default:t.component}}}(t);c.aliasOf=r&&r.record;const u=ee(e,t),l=[c];if("alias"in t){const e="string"==typeof t.alias?[t.alias]:t.alias;for(const t of e)l.push(dt({},c,{components:r?r.record.components:c.components,path:t,aliasOf:r?r.record:c}))}let h,d;for(const e of l){let{path:l}=e;if(n&&"/"!==l[0]){let t=n.record.path,r="/"===t[t.length-1]?"":"/";e.path=n.record.path+(l&&r+l)}if(h=Jt(e,n,u),r?r.alias.push(h):(d=d||h,d!==h&&d.alias.push(h),a&&t.name&&!Qt(h)&&o(t.name)),"children"in c){let t=c.children;for(let e=0;e<t.length;e++)s(t[e],h,r&&r.children[e])}r=r||h,i(h)}return d?()=>{o(d)}:pt}function o(t){if(Nt(t)){const e=r.get(t);e&&(r.delete(t),n.splice(n.indexOf(e),1),e.children.forEach(o),e.alias.forEach(o))}else{let e=n.indexOf(t);e>-1&&(n.splice(e,1),t.record.name&&r.delete(t.record.name),t.children.forEach(o),t.alias.forEach(o))}}function i(t){let e=0;for(;e<n.length&&zt(t,n[e])>=0;)e++;n.splice(e,0,t),t.record.name&&!Qt(t)&&r.set(t.record.name,t)}return e=ee({strict:!1,end:!0,sensitive:!1},e),t.forEach((t=>s(t))),{addRoute:s,resolve:function(t,e){let s,o,i,a={};if("name"in t&&t.name){if(s=r.get(t.name),!s)throw Vt(1,{location:t});i=s.record.name,a=dt(function(t,e){let n={};for(let r of e)r in t&&(n[r]=t[r]);return n}(e.params,s.keys.filter((t=>!t.optional)).map((t=>t.name))),t.params),o=s.stringify(a)}else if("path"in t)o=t.path,s=n.find((t=>t.re.test(o))),s&&(a=s.parse(o),i=s.record.name);else{if(s=e.name?r.get(e.name):n.find((t=>t.re.test(e.path))),!s)throw Vt(1,{location:t,currentLocation:e});i=s.record.name,a=dt({},e.params,t.params),o=s.stringify(a)}const c=[];let u=s;for(;u;)c.unshift(u.record),u=u.parent;return{name:i,path:o,params:a,matched:c,meta:te(c)}},removeRoute:o,getRoutes:function(){return n},getRecordMatcher:function(t){return r.get(t)}}}function Zt(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(let r in t.components)e[r]="boolean"==typeof n?n:n[r];return e}function Qt(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function te(t){return t.reduce(((t,e)=>dt(t,e.meta)),{})}function ee(t,e){let n={};for(let r in t)n[r]=r in e?e[r]:t[r];return n}const ne=/#/g,re=/&/g,se=/\//g,oe=/=/g,ie=/\?/g,ae=/\+/g,ce=/%5B/g,ue=/%5D/g,le=/%5E/g,he=/%60/g,de=/%7B/g,fe=/%7C/g,pe=/%7D/g,me=/%20/g;function ge(t){return encodeURI(""+t).replace(fe,"|").replace(ce,"[").replace(ue,"]")}function ye(t){return ge(t).replace(ae,"%2B").replace(me,"+").replace(ne,"%23").replace(re,"%26").replace(he,"`").replace(de,"{").replace(pe,"}").replace(le,"^")}function ve(t){return function(t){return ge(t).replace(ne,"%23").replace(ie,"%3F")}(t).replace(se,"%2F")}function be(t){try{return decodeURIComponent(""+t)}catch(e){}return""+t}function Oe(t){const e={};if(""===t||"?"===t)return e;const n=("?"===t[0]?t.slice(1):t).split("&");for(let r=0;r<n.length;++r){const t=n[r].replace(ae," ");let s=t.indexOf("="),o=be(s<0?t:t.slice(0,s)),i=s<0?null:be(t.slice(s+1));if(o in e){let t=e[o];Array.isArray(t)||(t=e[o]=[t]),t.push(i)}else e[o]=i}return e}function Te(t){let e="";for(let n in t){const r=t[n];if(n=ye(n).replace(oe,"%3D"),null==r){void 0!==r&&(e+=(e.length?"&":"")+n);continue}(Array.isArray(r)?r.map((t=>t&&ye(t))):[r&&ye(r)]).forEach((t=>{void 0!==t&&(e+=(e.length?"&":"")+n,null!=t&&(e+="="+t))}))}return e}function Ee(t){const e={};for(let n in t){let r=t[n];void 0!==r&&(e[n]=Array.isArray(r)?r.map((t=>null==t?null:""+t)):null==r?r:""+r)}return e}function we(){let t=[];return{add:function(e){return t.push(e),()=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)}},list:()=>t,reset:function(){t=[]}}}function Se(t,e,n,r,s){const o=r&&(r.enterCallbacks[s]=r.enterCallbacks[s]||[]);return()=>new Promise(((i,a)=>{const c=t=>{var c;!1===t?a(Vt(4,{from:n,to:e})):t instanceof Error?a(t):"string"==typeof(c=t)||c&&"object"==typeof c?a(Vt(2,{from:e,to:t})):(o&&r.enterCallbacks[s]===o&&"function"==typeof t&&o.push(t),i())},u=t.call(r&&r.instances[s],e,n,c);let l=Promise.resolve(u);t.length<3&&(l=l.then(c)),l.catch((t=>a(t)))}))}function ke(t,e,n,r){const s=[];for(const i of t)for(const t in i.components){let a=i.components[t];if("beforeRouteEnter"===e||i.instances[t])if("object"==typeof(o=a)||"displayName"in o||"props"in o||"__vccOpts"in o){const o=(a.__vccOpts||a)[e];o&&s.push(Se(o,n,r,i,t))}else{let o=a();s.push((()=>o.then((s=>{if(!s)return Promise.reject(new Error(`Couldn't resolve component "${t}" at "${i.path}"`));const o=(a=s).__esModule||st&&"Module"===a[Symbol.toStringTag]?s.default:s;var a;i.components[t]=o;const c=(o.__vccOpts||o)[e];return c&&Se(c,n,r,i,t)()}))))}}var o;return s}function xe(e){const n=t.inject(ct),r=t.inject(ut),s=t.computed((()=>n.resolve(t.unref(e.to)))),o=t.computed((()=>{let{matched:t}=s.value,{length:e}=t;const n=t[e-1];let o=r.matched;if(!n||!o.length)return-1;let i=o.findIndex(vt.bind(null,n));if(i>-1)return i;let a=Ae(t[e-2]);return e>1&&Ae(n)===a&&o[o.length-1].path!==a?o.findIndex(vt.bind(null,t[e-2])):i})),i=t.computed((()=>o.value>-1&&function(t,e){for(let n in e){let r=e[n],s=t[n];if("string"==typeof r){if(r!==s)return!1}else if(!Array.isArray(s)||s.length!==r.length||r.some(((t,e)=>t!==s[e])))return!1}return!0}(r.params,s.value.params))),a=t.computed((()=>o.value>-1&&o.value===r.matched.length-1&&bt(r.params,s.value.params)));return{route:s,href:t.computed((()=>s.value.href)),isActive:i,isExactActive:a,navigate:function(r={}){return function(t){if(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)return;if(t.defaultPrevented)return;if(void 0!==t.button&&0!==t.button)return;if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}t.preventDefault&&t.preventDefault();return!0}(r)?n[t.unref(e.replace)?"replace":"push"](t.unref(e.to)).catch(pt):Promise.resolve()}}}const je=t.defineComponent({name:"RouterLink",props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:xe,setup(e,{slots:n}){const r=t.reactive(xe(e)),{options:s}=t.inject(ct),o=t.computed((()=>({[Re(e.activeClass,s.linkActiveClass,"router-link-active")]:r.isActive,[Re(e.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:r.isExactActive})));return()=>{const s=n.default&&n.default(r);return e.custom?s:t.h("a",{"aria-current":r.isExactActive?e.ariaCurrentValue:null,href:r.href,onClick:r.navigate,class:o.value},s)}}});function Ae(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const Re=(t,e,n)=>null!=t?t:null!=e?e:n;function Ce(t,e){if(!t)return null;const n=t(e);return 1===n.length?n[0]:n}const Pe=t.defineComponent({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},setup(e,{attrs:n,slots:r}){const s=t.inject(lt),o=t.computed((()=>e.route||s.value)),i=t.inject(at,0),a=t.computed((()=>o.value.matched[i]));t.provide(at,i+1),t.provide(it,a),t.provide(lt,o);const c=t.ref();return t.watch((()=>[c.value,a.value,e.name]),(([t,e,n],[r,s,o])=>{e&&(e.instances[n]=t,s&&s!==e&&t&&t===r&&(e.leaveGuards.size||(e.leaveGuards=s.leaveGuards),e.updateGuards.size||(e.updateGuards=s.updateGuards))),!t||!e||s&&vt(e,s)&&r||(e.enterCallbacks[n]||[]).forEach((e=>e(t)))}),{flush:"post"}),()=>{const s=o.value,i=a.value,u=i&&i.components[e.name],l=e.name;if(!u)return Ce(r.default,{Component:u,route:s});const h=i.props[e.name],d=h?!0===h?s.params:"function"==typeof h?h(s):h:null,f=t.h(u,dt({},d,n,{onVnodeUnmounted:t=>{t.component.isUnmounted&&(i.instances[l]=null)},ref:c}));return Ce(r.default,{Component:f,route:s})||f}}});function Ie(t){return t.reduce(((t,e)=>t.then((()=>e()))),Promise.resolve())}const De=function(e){const n=Kt(e.routes,e);let r=e.parseQuery||Oe,s=e.stringifyQuery||Te,o=e.history;const i=we(),a=we(),c=we(),u=t.shallowRef(Lt);let l=Lt;ht&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const h=ft.bind(null,(t=>""+t)),d=ft.bind(null,ve),f=ft.bind(null,be);function p(t,e){if(e=dt({},e||u.value),"string"==typeof t){let s=gt(r,t,e.path),i=n.resolve({path:s.path},e),a=o.createHref(s.fullPath);return dt(s,i,{params:f(i.params),hash:be(s.hash),redirectedFrom:void 0,href:a})}let i;"path"in t?i=dt({},t,{path:gt(r,t.path,e.path).path}):(i=dt({},t,{params:d(t.params)}),e.params=d(e.params));let a=n.resolve(i,e);const c=t.hash||"";a.params=h(f(a.params));const l=function(t,e){let n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}(s,dt({},t,{hash:(p=c,ge(p).replace(de,"{").replace(pe,"}").replace(le,"^")),path:a.path}));var p;let m=o.createHref(l);return dt({fullPath:l,hash:c,query:s===Te?Ee(t.query):t.query},a,{redirectedFrom:void 0,href:m})}function m(t){return"string"==typeof t?gt(r,t,u.value.path):dt({},t)}function g(t,e){if(l!==t)return Vt(8,{from:e,to:t})}function y(t){return b(t)}function v(t){const e=t.matched[t.matched.length-1];if(e&&e.redirect){const{redirect:n}=e;let r="function"==typeof n?n(t):n;return"string"==typeof r&&(r=r.includes("?")||r.includes("#")?r=m(r):{path:r},r.params={}),dt({query:t.query,hash:t.hash,params:t.params},r)}}function b(t,e){const n=l=p(t),r=u.value,o=t.state,i=t.force,a=!0===t.replace,c=v(n);if(c)return b(dt(m(c),{state:o,force:i,replace:a}),e||n);const h=n;let d;return h.redirectedFrom=e,!i&&function(t,e,n){let r=e.matched.length-1,s=n.matched.length-1;return r>-1&&r===s&&vt(e.matched[r],n.matched[s])&&bt(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}(s,r,n)&&(d=Vt(16,{to:h,from:r}),P(r,r,!0,!1)),(d?Promise.resolve(d):T(h,r)).catch((t=>Yt(t)?t:R(t,h,r))).then((t=>{if(t){if(Yt(t,2))return b(dt(m(t.to),{state:o,force:i,replace:a}),e||h)}else t=w(h,r,!0,a,o);return E(h,r,t),t}))}function O(t,e){const n=g(t,e);return n?Promise.reject(n):Promise.resolve()}function T(t,e){let n;const[r,s,o]=function(t,e){const n=[],r=[],s=[],o=Math.max(e.matched.length,t.matched.length);for(let i=0;i<o;i++){const o=e.matched[i];o&&(t.matched.find((t=>vt(t,o)))?r.push(o):n.push(o));const a=t.matched[i];a&&(e.matched.find((t=>vt(t,a)))||s.push(a))}return[n,r,s]}(t,e);n=ke(r.reverse(),"beforeRouteLeave",t,e);for(const i of r)i.leaveGuards.forEach((r=>{n.push(Se(r,t,e))}));const c=O.bind(null,t,e);return n.push(c),Ie(n).then((()=>{n=[];for(const r of i.list())n.push(Se(r,t,e));return n.push(c),Ie(n)})).then((()=>{n=ke(s,"beforeRouteUpdate",t,e);for(const r of s)r.updateGuards.forEach((r=>{n.push(Se(r,t,e))}));return n.push(c),Ie(n)})).then((()=>{n=[];for(const r of t.matched)if(r.beforeEnter&&!e.matched.includes(r))if(Array.isArray(r.beforeEnter))for(const s of r.beforeEnter)n.push(Se(s,t,e));else n.push(Se(r.beforeEnter,t,e));return n.push(c),Ie(n)})).then((()=>(t.matched.forEach((t=>t.enterCallbacks={})),n=ke(o,"beforeRouteEnter",t,e),n.push(c),Ie(n)))).then((()=>{n=[];for(const r of a.list())n.push(Se(r,t,e));return n.push(c),Ie(n)})).catch((t=>Yt(t,8)?t:Promise.reject(t)))}function E(t,e,n){for(const r of c.list())r(t,e,n)}function w(t,e,n,r,s){const i=g(t,e);if(i)return i;const a=e===Lt,c=ht?history.state:{};n&&(r||a?o.replace(t.fullPath,dt({scroll:a&&c&&c.scroll},s)):o.push(t.fullPath,s)),u.value=t,P(t,e,n,a),C()}let S;function k(){S=o.listen(((t,e,n)=>{let r=p(t);const s=v(r);if(s)return void b(dt(s,{replace:!0}),r).catch(pt);l=r;const i=u.value;var a,c;ht&&(a=Pt(i.fullPath,n.delta),c=Rt(),It.set(a,c)),T(r,i).catch((t=>Yt(t,12)?t:Yt(t,2)?(b(t.to,r).then((t=>{Yt(t,20)&&!n.delta&&n.type===Et.pop&&o.go(-1,!1)})).catch(pt),Promise.reject()):(n.delta&&o.go(-n.delta,!1),R(t,r,i)))).then((t=>{(t=t||w(r,i,!1))&&(n.delta?o.go(-n.delta,!1):n.type===Et.pop&&Yt(t,20)&&o.go(-1,!1)),E(r,i,t)})).catch(pt)}))}let x,j=we(),A=we();function R(t,e,n){C(t);const r=A.list();return r.length?r.forEach((r=>r(t,e,n))):console.error(t),Promise.reject(t)}function C(t){x||(x=!0,k(),j.list().forEach((([e,n])=>t?n(t):e())),j.reset())}function P(n,r,s,o){const{scrollBehavior:i}=e;if(!ht||!i)return Promise.resolve();let a=!s&&function(t){const e=It.get(t);return It.delete(t),e}(Pt(n.fullPath,0))||(o||!s)&&history.state&&history.state.scroll||null;return t.nextTick().then((()=>i(n,r,a))).then((t=>t&&Ct(t))).catch((t=>R(t,n,r)))}const I=t=>o.go(t);let D;const M=new Set;return{currentRoute:u,addRoute:function(t,e){let r,s;return Nt(t)?(r=n.getRecordMatcher(t),s=e):s=t,n.addRoute(s,r)},removeRoute:function(t){let e=n.getRecordMatcher(t);e&&n.removeRoute(e)},hasRoute:function(t){return!!n.getRecordMatcher(t)},getRoutes:function(){return n.getRoutes().map((t=>t.record))},resolve:p,options:e,push:y,replace:function(t){return y(dt(m(t),{replace:!0}))},go:I,back:()=>I(-1),forward:()=>I(1),beforeEach:i.add,beforeResolve:a.add,afterEach:c.add,onError:A.add,isReady:function(){return x&&u.value!==Lt?Promise.resolve():new Promise(((t,e)=>{j.add([t,e])}))},install(e){e.component("RouterLink",je),e.component("RouterView",Pe),e.config.globalProperties.$router=this,Object.defineProperty(e.config.globalProperties,"$route",{enumerable:!0,get:()=>t.unref(u)}),ht&&!D&&u.value===Lt&&(D=!0,y(o.location).catch((t=>{})));const n={};for(let s in Lt)n[s]=t.computed((()=>u.value[s]));e.provide(ct,this),e.provide(ut,t.reactive(n)),e.provide(lt,u);let r=e.unmount;M.add(e),e.unmount=function(){M.delete(e),M.size<1&&(S(),u.value=Lt,D=!1,x=!1),r()}}}}({history:function(t){const e=_t(t=xt(t)),n=function(t,e,n,r){let s=[],o=[],i=null;const a=({state:o})=>{const a=Dt(t,location),c=n.value,u=e.value;let l=0;if(o){if(n.value=a,e.value=o,i&&i===c)return void(i=null);l=u?o.position-u.position:0}else r(a);s.forEach((t=>{t(n.value,c,{delta:l,type:Et.pop,direction:l?l>0?St.forward:St.back:St.unknown})}))};function c(){const{history:t}=window;t.state&&t.replaceState(dt({},t.state,{scroll:Rt()}),"")}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",c),{pauseListeners:function(){i=n.value},listen:function(t){s.push(t);const e=()=>{const e=s.indexOf(t);e>-1&&s.splice(e,1)};return o.push(e),e},destroy:function(){for(const t of o)t();o=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",c)}}}(t,e.state,e.location,e.replace),r=dt({location:"",base:t,go:function(t,e=!0){e||n.pauseListeners(),history.go(t)},createHref:At.bind(null,t)},e,n);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>e.state.value}),r}(),routes:[{path:"/",component:{template:"<div><br>Login</div>"},props:!0},{path:"/home",component:"<div><h1>HOME</h1></div>",props:!0},{path:"/404",component:{template:"<h1>404</h1>"}},{path:"/:table",component:"<div><h1>TABLE</h1></div>"},{path:"/:table/:id",component:"<div><h1>FORM</h1></div>"}]});function Me(t,e){const n=function(t,e){return new W(t,e,{mode:L})}(rt),r=Z(n);t.use(r),t.use(De)}return"undefined"!=typeof window&&window.Vue&&Me(window.Vue),{version:"0.1.0",install:Me}}));
