import{shallowRef as t,unref as e,computed as n,reactive as r,nextTick as s,defineComponent as o,inject as i,h as a,provide as c,ref as u,watch as l}from"vue";const h=(()=>{let t;try{t="production"}catch(e){t="development"}return t})(),f=Symbol("IS_PROXY"),d=Symbol("PATH"),p=Symbol("VALUE"),m=Symbol("PROXY_TREE"),g=new Set(["push","shift","pop","unshift","splice","reverse","sort","copyWithin"]),y=t=>t&&t[f]?t[p]:t,b=t=>"object"==typeof t&&null!==t&&!Array.isArray(t)&&"Object"!==t.constructor.name&&Object.isExtensible(t),v=t=>void 0!==t&&(!b(t)||b(t)&&!(t instanceof Date)&&!(t instanceof Map)&&!(t instanceof Set));class O{constructor(t){this.tree=t,this.CACHED_PROXY=Symbol("CACHED_PROXY"),this.delimiter=t.master.options.delimiter,this.ssr=Boolean(t.master.options.ssr)}concat(t,e){return t?t+this.delimiter+e:e}ensureMutationTrackingIsEnabled(t){if("production"!==h&&this.tree.master.options.devmode&&!this.tree.canMutate())throw new Error(`proxy-state-tree - You are mutating the path "${t}", but it is not allowed. The following could have happened:\n        \n        - The mutation is explicitly being blocket\n        - You are passing state to a 3rd party tool trying to manipulate the state\n        - You are running asynchronous code and forgot to "await" its execution\n        `)}isDefaultProxifier(){return this.tree.proxifier===this.tree.master.proxifier}ensureValueDosntExistInStateTreeElsewhere(t){if("production"!==h){if(t&&!0===t[f])throw new Error(`proxy-state-tree - You are trying to insert a value that already exists in the state tree on path "${t[d]}"`);return t}}trackPath(t){if(this.tree.canTrack())if(this.isDefaultProxifier()){const e=this.tree.master.currentTree;if(!e)return;e.addTrackingPath(t)}else this.tree.addTrackingPath(t)}getTrackingTree(){return this.tree.master.currentTree&&this.isDefaultProxifier()?this.tree.master.currentTree:this.tree.canTrack()&&this.tree.canTrack()?this.tree:null}getMutationTree(){return this.tree.master.mutationTree||this.tree}isProxyCached(t,e){return t[this.CACHED_PROXY]&&String(t[this.CACHED_PROXY][d])===String(e)}createArrayProxy(t,e){if(!this.ssr&&this.isProxyCached(t,e))return t[this.CACHED_PROXY];const n=this,r=new Proxy(t,{get(r,s){if(s===f)return!0;if(s===d)return e;if(s===p)return t;if("indexOf"===s)return(e,n)=>t.indexOf(y(e),y(n));if("length"===s||"function"==typeof r[s]&&!g.has(String(s))||"symbol"==typeof s)return r[s];const o=n.getTrackingTree(),i=n.concat(e,s),a=o||n.tree;o&&o.proxifier.trackPath(i),a.trackPathListeners.forEach((t=>t(i)));const c=String(s);return g.has(c)?(...t)=>{const o=n.getMutationTree();let i;return i="production"===h?r[s](...t):r[s](...t.map((t=>n.ensureValueDosntExistInStateTreeElsewhere(t)))),o.addMutation({method:c,path:e,delimiter:n.delimiter,args:t,hasChangedValue:!0}),i}:v(r[s])?n.proxify(r[s],i):r[s]},set(t,r,s){const o=n.concat(e,r),i=n.getMutationTree(),a=Reflect.set(t,r,s);return i.addMutation({method:"set",path:o,args:[s],delimiter:n.delimiter,hasChangedValue:!0}),a}});return this.ssr||Object.defineProperty(t,this.CACHED_PROXY,{value:r,configurable:!0}),r}createObjectProxy(t,e){if(!this.ssr&&this.isProxyCached(t,e))return t[this.CACHED_PROXY];const n=this,r=new Proxy(t,{get(s,o){if(o===f)return!0;if(o===d)return e;if(o===p)return t;if(o===m)return n.tree;if("symbol"==typeof o||o in Object.prototype)return s[o];const i=Object.getOwnPropertyDescriptor(s,o)||Object.getPrototypeOf(s)&&Object.getOwnPropertyDescriptor(Object.getPrototypeOf(s),o);if(i&&"get"in i){const t=i.get.call(r);return n.tree.master.options.devmode&&n.tree.master.options.onGetter&&n.tree.master.options.onGetter(n.concat(e,o),t),t}const a=n.getTrackingTree(),c=s[o],u=n.concat(e,o),l=a||n.tree;return"function"==typeof c?n.tree.master.options.onGetFunction?n.tree.master.options.onGetFunction(a||n.tree,u,s,o):b(s)?c:c.call(s,n.tree,u):(l.trackPathListeners.forEach((t=>t(u))),a&&a.proxifier.trackPath(u),v(c)?n.proxify(c,u):c)},set(t,r,s){const o=n.concat(e,r);let i;r in t||(i=e);const a=n.getMutationTree(),c=t[r];"function"==typeof s&&n.tree.master.options.onSetFunction&&(s=n.tree.master.options.onSetFunction(n.getTrackingTree()||n.tree,o,t,r,s));const u=c!==s,l=Reflect.set(t,r,s);return a.addMutation({method:"set",path:o,args:[s],delimiter:n.delimiter,hasChangedValue:u},i),l},deleteProperty(t,r){const s=n.concat(e,r);let o;r in t&&(o=e);const i=n.getMutationTree();return delete t[r],i.addMutation({method:"unset",path:s,args:[],delimiter:n.delimiter,hasChangedValue:!0},o),!0}});return this.ssr||Object.defineProperty(t,this.CACHED_PROXY,{value:r,configurable:!0}),r}proxify(t,e){if(t){if(t[f]&&(String(t[d])!==String(e)||t[p][this.CACHED_PROXY]!==t))return this.proxify(t[p],e);if(t[f])return t;if(Array.isArray(t))return this.createArrayProxy(t,e);if((t=>"[object Object]"===String(t)&&"Object"===t.constructor.name)(t)||b(t))return this.createObjectProxy(t,e)}return t}}class T{constructor(t,e){this.mutationCallbacks=[],this.mutations=[],this.objectChanges=new Set,this.isTracking=!1,this.isBlocking=!1,this.trackPathListeners=[],this.isTracking=!0,this.master=t,this.proxifier=e||new O(this),this.state=this.proxifier.proxify(t.sourceState,"")}trackPaths(){const t=new Set,e=e=>{t.add(e)};return this.trackPathListeners.push(e),()=>(this.trackPathListeners.splice(this.trackPathListeners.indexOf(e),1),t)}getMutations(){const t=this.mutations.slice();return this.mutations.length=0,t}getObjectChanges(){const t=new Set([...this.objectChanges]);return this.objectChanges.clear(),t}addMutation(t,e){const n=this.master.currentFlushId;this.mutations.push(t),e&&this.objectChanges.add(e);for(const r of this.master.mutationCallbacks)r(t,new Set(e?[t.path,e]:[t.path]),n);for(const r of this.mutationCallbacks)r(t,new Set(e?[t.path,e]:[t.path]),n)}flush(t=!1){return this.master.flush(this,t)}onMutation(t){this.mutationCallbacks.push(t)}canMutate(){return this.isTracking&&!this.isBlocking}canTrack(){return!1}blockMutations(){this.isBlocking=!0}enableMutations(){this.isBlocking=!1}dispose(){return this.isTracking=!1,this.mutationCallbacks.length=0,this.proxifier=this.master.proxifier,this}}class E{constructor(t){this.pathDependencies=new Set,this.shouldTrack=!1,this.trackPathListeners=[],this.master=t,this.proxifier=t.proxifier,this.state=t.state}trackPaths(){const t=new Set,e=e=>{t.add(e)};return this.trackPathListeners.push(e),()=>(this.trackPathListeners.splice(this.trackPathListeners.indexOf(e),1),t)}canMutate(){return!1}canTrack(){return!0}addTrackingPath(t){this.shouldTrack&&(this.pathDependencies.add(t),this.callback&&this.master.addPathDependency(t,this.callback))}track(t){return this.master.changeTrackStateTree(this),this.shouldTrack=!0,this.clearTracking(),t&&(this.callback=(...e)=>{this.callback&&t(...e)}),this}clearTracking(){if(this.callback)for(const t of this.pathDependencies)this.master.removePathDependency(t,this.callback);this.pathDependencies.clear()}stopTracking(){this.shouldTrack=!1}trackScope(t,e){const n=this.master.previousTree,r=this.master.currentTree;this.master.currentTree=this,this.track(e);const s=t(this);return this.master.currentTree=r,this.master.previousTree=n,this.stopTracking(),s}dispose(){return this.callback?(this.clearTracking(),this.callback=null,this.proxifier=this.master.proxifier,this.master.currentTree===this&&(this.master.currentTree=null),this):(this.pathDependencies.clear(),this)}}class S{constructor(t,e={}){this.cache={mutationTree:[],trackStateTree:[]},this.flushCallbacks=[],this.mutationCallbacks=[],this.currentFlushId=0,this.pathDependencies={},void 0===e.devmode&&(e.devmode=!0),e.delimiter||(e.delimiter="."),this.master=this,this.sourceState=t,this.options=e,this.createTrackStateProxifier()}createTrackStateProxifier(){const t=new E(this);this.proxifier=t.proxifier=new O(t),this.state=t.state=this.proxifier.proxify(this.sourceState,"")}getMutationTree(){if(!this.options.devmode)return this.mutationTree=this.mutationTree||new T(this,this.proxifier);return this.cache.mutationTree.pop()||new T(this)}getTrackStateTree(){return this.cache.trackStateTree.pop()||new E(this)}getTrackStateTreeWithProxifier(){const t=this.getTrackStateTree();return this.options.ssr?t.state=this.sourceState:(t.proxifier=new O(t),t.state=t.proxifier.proxify(this.sourceState,"")),t}changeTrackStateTree(t){this.previousTree=this.currentTree,this.currentTree=t}disposeTree(t){t instanceof T?this.cache.mutationTree.push(t.dispose()):t instanceof E&&this.cache.trackStateTree.push(t.dispose())}onMutation(t){return this.mutationCallbacks.push(t),()=>{this.mutationCallbacks.splice(this.mutationCallbacks.indexOf(t),1)}}forceFlush(){const t=[],e=[];for(const n in this.pathDependencies){this.pathDependencies[n].forEach((n=>{n(t,e,this.currentFlushId++,!1)}))}}flush(t,e=!1){let n;if(n=Array.isArray(t)?t.reduce(((t,e)=>({mutations:t.mutations.concat(e.getMutations()),objectChanges:new Set([...t.objectChanges,...e.getObjectChanges()])})),{mutations:[],objectChanges:new Set}):{mutations:t.getMutations(),objectChanges:t.getObjectChanges()},!n.mutations.length&&!n.objectChanges.size)return{mutations:[],flushId:null};const r=new Set,s=new Set,o=this.currentFlushId++;for(const c of n.objectChanges)this.pathDependencies[c]&&r.add(c);for(const c of n.mutations)c.hasChangedValue&&r.add(c.path);const i=Array.from(r).sort();for(const c of i)if(this.pathDependencies[c])for(const t of this.pathDependencies[c])s.add(t);for(const c of s)c(n.mutations,i,o,e);const a=this.flushCallbacks.slice();for(const c of a)this.flushCallbacks.includes(c)&&c(n.mutations,i,o,e);return r.clear(),s.clear(),{mutations:n.mutations,flushId:o}}onFlush(t){return this.flushCallbacks.push(t),()=>this.flushCallbacks.splice(this.flushCallbacks.indexOf(t),1)}rescope(t,e){return t&&t[f]?e.proxifier.proxify(t[p],t[d]):t}addPathDependency(t,e){this.pathDependencies[t]||(this.pathDependencies[t]=new Set),this.pathDependencies[t].add(e)}removePathDependency(t,e){this.pathDependencies[t].delete(e),this.pathDependencies[t].size||delete this.pathDependencies[t]}toJSON(){return this.sourceState}}var w,k;(k=w||(w={})).ACTION_START="action:start",k.ACTION_END="action:end",k.OPERATOR_START="operator:start",k.OPERATOR_END="operator:end",k.OPERATOR_ASYNC="operator:async",k.MUTATIONS="mutations",k.EFFECT="effect",k.DERIVED="derived",k.DERIVED_DIRTY="derived:dirty",k.COMPONENT_ADD="component:add",k.COMPONENT_UPDATE="component:update",k.COMPONENT_REMOVE="component:remove",k.GETTER="getter";const x=Symbol("IS_DERIVED"),A=Symbol("IS_DERIVED_CONSTRUCTOR");class R{constructor(t){this.cb=t,this.isDirty=!0,this.updateCount=0;const e=this.evaluate.bind(this);return e[x]=!0,e}runScope(t,e){const n=e.slice(0,e.length-1).reduce(((t,e)=>t[e]),t.state);return this.cb(n,t.state)}evaluate(t,e,n,r){if(this.disposeOnMutation||(this.disposeOnMutation=n.onMutation(((e,s,o)=>{if("function"==typeof r.reduce(((t,e)=>t&&t[e]),n.sourceState)){if(!this.isDirty)for(const n of s)if(this.paths.has(n))return this.isDirty=!0,void t.emitAsync(w.DERIVED_DIRTY,{derivedPath:r,path:n,flushId:o})}else this.disposeOnMutation()}))),this.isDirty||this.previousProxifier!==e.proxifier){const t=e.trackPaths();this.value=this.runScope(e,r),this.isDirty=!1,this.paths=t()}if(e instanceof E)for(const s of this.paths)e.addTrackingPath(s),e.trackPathListeners.forEach((t=>t(s)));return this.previousProxifier=e.proxifier,this.value&&this.value[f]?n.rescope(this.value,e):this.value}}var j=function(){function t(){this.events=new Map}return t.prototype.emit=function(t,e){for(var n=this.events.get(t)||[],r=n.length-1;r>=0;r--){var s=n[r];s.cb(e),s.once&&n.splice(r,1)}},t.prototype.emitAsync=function(t,e){var n=this.events.get(t)||[];setTimeout((function(){for(var t=n.length-1;t>=0;t--){var r=n[t];r.cb(e),r.once&&n.splice(t,1)}}))},t.prototype.on=function(t,e){this.addListener(t,e,!1)},t.prototype.once=function(t,e){this.addListener(t,e,!0)},t.prototype.addListener=function(t,e,n){var r=this.events.get(t)||[];r.push({once:n,cb:e}),this.events.set(t,r)},t}(),C=Object.prototype.toString,P=function(t){var e;return"[object Object]"===C.call(t)&&(null===(e=Object.getPrototypeOf(t))||e===Object.getPrototypeOf({}))};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
function I(t,e,n,r){return new(n||(n=Promise))((function(s,o){function i(t){try{c(r.next(t))}catch(e){o(e)}}function a(t){try{c(r.throw(t))}catch(e){o(e)}}function c(t){var e;t.done?s(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,a)}c((r=r.apply(t,e||[])).next())}))}function D(t,e,n={}){if(!t||!e)throw new Error('You have to pass a "target" and "source" object to rehydrate');Object.keys(e).forEach((r=>{const s=e[r],o=n[r];"function"==typeof o&&Array.isArray(t[r])?t[r]=e[r].map((t=>o(t))):"function"==typeof o&&"object"==typeof t[r]&&null!==t[r]&&"Object"===t[r].constructor.name?t[r]=Object.keys(e[r]).reduce(((t,n)=>(t[n]=o(e[r][n]),t)),{}):"function"==typeof o?t[r]=o(e[r]):"object"!=typeof s||Array.isArray(s)||null===s?t[r]=e[r]:(t[r]||(t[r]={}),D(t[r],e[r],n[r]))}))}const M=Symbol("SERIALIZE"),_=(t,e,n={})=>{if(Array.isArray(e)){e.forEach((e=>{const r=e.path.split(e.delimiter),s=r.pop(),o=r.reduce(((t,e)=>t[e]),t),i=r.reduce(((t,e)=>t&&t[e]),n);"set"===e.method?"function"==typeof i&&Array.isArray(e.args[0])?o[s]=e.args[0].map((t=>i(t))):o[s]="function"==typeof i?i(e.args[0]):e.args[0]:"unset"===e.method?delete o[s]:o[s][e.method].apply(o[s],"function"==typeof i?e.args.map((t=>"object"==typeof t&&null!==t?i(t):t)):e.args)}))}else D(t,e,n)};class N{constructor(t){this.safeClassNames=new Set,this.unsafeClassNames=new Set,this.circularReferenceCache=[],this.buffer=[],this.serializer=Promise.resolve(),this.isConnected=!1,this.doReconnect=!1,this.hasWarnedReconnect=!1,this.reconnectInterval=1e4,this.connect=(t,e)=>{t=t||"localhost:3031",this.ws=new WebSocket(`ws://${t}?name=${this.name}`),this.ws.onmessage=t=>{const n=JSON.parse(t.data);n.appName===this.name&&e(n)},this.ws.onopen=()=>{this.isConnected=!0,this.flushBuffer()},this.ws.onerror=()=>{console.error(`OVERMIND DEVTOOLS: Not able to connect. You are trying to connect to "${t}", but there was no devtool there. Try the following:\n        \n          - Make sure you are running the latest version of the devtools, using "npx overmind-devtools@latest" or install latest extension for VSCode\n          - Close the current tab and open a new one\n          - Make sure the correct port is configured in the devtools\n        `)},this.ws.onclose=()=>{this.isConnected=!1,this.doReconnect&&!this.hasWarnedReconnect&&(console.warn("Debugger application is not running on selected port... will reconnect automatically behind the scenes"),this.hasWarnedReconnect=!0),this.doReconnect&&this.reconnect(t,e)}},this.sendMessage=t=>{this.isConnected?this.ws.send(`{"appName":"${this.name}","message":${t}}`):this.buffer.push(t)},this.flushBuffer=()=>I(this,void 0,void 0,(function*(){this.buffer.forEach((t=>{this.sendMessage(t)})),this.buffer.length=0})),this.name="undefined"!=typeof location&&location.search.includes("OVERMIND_DEVTOOL")?t+" (Overmind Devtool)":t}reconnect(t,e){setTimeout((()=>this.connect(t,e)),this.reconnectInterval)}send(t){const e=this.safeClassNames,n=this.unsafeClassNames,r=this.circularReferenceCache;this.sendMessage(JSON.stringify(t,(function(t,s){if("function"==typeof s)return"[Function]";if(this.__CLASS__)return s;if(s&&s[M])return{__CLASS__:!0,name:s.constructor.name,value:s};if("object"==typeof s&&null!==s&&!Array.isArray(s)&&s.constructor&&"Object"!==s.constructor.name){if(r.includes(s))return`[CIRCULAR REFERENCE: ${s.constructor.name}]`;if(r.push(s),!e.has(s.constructor.name)&&!n.has(s.constructor.name))try{JSON.stringify(s),e.add(s.constructor.name)}catch(o){n.add(s.constructor.name)}return e.has(s.constructor.name)?{__CLASS__:!0,name:s.constructor.name,value:s}:`[${s.constructor.name||"NOT SERIALIZABLE"}]`}return s}))),r.length=0}}let L=!1,F=0;const $=Symbol("ORIGIN_TARGET");function H(t,e,n=""){return"object"==typeof(r=t)&&!Array.isArray(r)&&null!==r||"function"==typeof t?new Proxy(t,{apply(t,r,s){const o=F++,i=n.split("."),a=i.pop();return e({func:t.bind(r?r[$]:void 0),effectId:o,name:i.join("."),method:a,args:s})},construct:(t,e)=>(L||(console.warn(`EFFECTS - It is highly recommended to create a custom effect, exposing a method that deals with the instantiation of "${n}". It improves readability and debugability of your app`),L=!0),new t(...e)),get:(t,r)=>r===$?t:H(t[r],e,n?n+"."+r.toString():r.toString())}):t;var r}const V=()=>({actions:t},e)=>{const n=tt("onInitializeOvermind",t);return Promise.all(n.map((t=>t(e))))},Y=(()=>{let t;try{t="production"}catch(e){console.warn("Overmind was unable to determine the NODE_ENV, which means it will run in DEVELOPMENT mode. If this is a production app, please configure your build tool to define NODE_ENV"),t="development"}return t})(),U="test"===Y,B=Symbol("operator"),G=Symbol("origina_actions"),q=Symbol("execution"),z=Symbol("MODE_DEFAULT"),W=Symbol("MODE_TEST"),X=Symbol("MODE_SSR");class J{emit(){}emitAsync(){}on(){}once(){}addListener(){}}function K(t){return t instanceof Promise||t&&"function"==typeof t.then&&"function"==typeof t.catch}function Z(t){return Object.keys(t).reduce(((e,n)=>{if("__esModule"===n)return e;const r=Object.getOwnPropertyDescriptor(t,n);if(r&&"get"in r)return Object.defineProperty(e,n,r),e;const s=t[n];return P(s)?e[n]=Z(s):Object.defineProperty(e,n,r),e}),P(t)?{}:t)}function Q(t,e,n=[],r=[]){const s=Object.keys(t),o=Object.keys(e);return s.forEach((t=>{o.includes(t)||r.push({delimiter:".",args:[],path:n.concat(t).join("."),hasChangedValue:!1,method:"unset"})})),o.forEach((s=>{P(t[s])&&P(e[s])?Q(t[s],e[s],n.concat(s),r):t[s]!==e[s]&&r.push({delimiter:".",args:[e[s]],path:n.concat(s).join("."),hasChangedValue:!1,method:"set"})})),r}function tt(t,e={},n=[]){return Object.keys(e).reduce(((r,s)=>"function"==typeof e[s]&&s===t?r.concat(e[s]):r.concat(tt(t,e[s],n.concat(s)))),[])}function et(t={},e=[]){return Object.keys(t).reduce(((n,r)=>"function"==typeof t[r]?n.concat(e.concat(r).join(".")):n.concat(et(t[r],e.concat(r)))),[])}function nt(t,e){return new Proxy(t,{get:(n,r)=>r===G?t:"function"==typeof n[r]?e(n[r]):n[r]?nt(n[r],e):void 0})}const rt={};class st{constructor(t,e={},n={mode:z}){this.actionReferences={},this.nextExecutionId=0,this.reydrateMutationsForHotReloading=[],this.isStrict=!1,this.reaction=(t,e,n={})=>{let r;if(n.nested){const n=t(this.state);if(!n||!n[f])throw new Error('You have to return an object or array from the Overmind state when using a "nested" reaction');const s=n[d];r=this.addFlushListener((t=>{t.forEach((t=>{t.path.startsWith(s)&&e(s?s.split(this.delimiter).reduce(((t,e)=>t[e]),this.state):this.state)}))}))}else{const n=this.proxyStateTreeInstance.getTrackStateTree();let s;const o=()=>{n.trackScope((()=>s=t(n.state)),(()=>{o(),e(s)}))};o(),r=()=>{n.dispose()}}return n.immediate&&e(t(this.state)),r},this.addMutationListener=t=>this.proxyStateTreeInstance.onMutation(t),this.addFlushListener=t=>this.proxyStateTreeInstance.onFlush(t);const r=e.name||"OvermindApp",s=e.devEnv||"development",o="undefined"!=typeof process&&process.title&&process.title.includes("node");if(this.delimiter=e.delimiter||".",this.isStrict=Boolean(e.strict),Y===s&&n.mode===z&&!1!==e.hotReloading&&!o){if(rt[r])return rt[r].reconfigure(t);rt[r]=this}const i=n.mode===X?new J:new j,a=this.createProxyStateTree(t,i,n.mode===W||Y===s,n.mode===X);if(this.originalConfiguration=t,this.state=a.state,this.effects=t.effects||{},this.proxyStateTreeInstance=a,this.eventHub=i,this.mode=n,this.actions=this.getActions(t.actions),n.mode!==X){if(Y===s&&n.mode===z&&"undefined"!=typeof window){let n="OVERMIND: You are running in DEVELOPMENT mode.";if(!0!==e.logProxies){const t=console.log;console.log=(...e)=>t.apply(console,e.map((t=>t&&t[f]?t[p]:t))),n+='\n\n - To improve debugging experience "console.log" will NOT log proxies from Overmind, but the actual value. Please see docs to turn off this behaviour'}if(e.devtools||"undefined"!=typeof location&&"localhost"===location.hostname&&!1!==e.devtools){const n=!0===e.devtools?"localhost:3031":e.devtools,r=e.name?e.name:"undefined"==typeof document?"NoName":document.title||"NoName";this.initializeDevtools(n,r,i,a.sourceState,t.actions)}else!1!==e.devtools&&(n+="\n\n - You are not running on localhost. You will have to manually define the devtools option to connect");U||console.warn(n)}if("production"===Y&&n.mode===z){let t;i.on(w.OPERATOR_ASYNC,(t=>{t.parentExecution&&t.parentExecution.isRunning||a.getMutationTree().flush(!0)})),i.on(w.ACTION_END,(t=>{t.parentExecution&&t.parentExecution.isRunning||a.getMutationTree().flush()}));const e=()=>{a.getMutationTree().flush(!0)};this.proxyStateTreeInstance.onMutation((()=>{t&&clearTimeout(t),t=setTimeout(e,0)}))}else n.mode!==z&&n.mode!==W||(("test"===Y||this.devtools&&!1!==e.hotReloading)&&i.on(w.MUTATIONS,(t=>{this.reydrateMutationsForHotReloading=this.reydrateMutationsForHotReloading.concat(t.mutations)})),i.on(w.OPERATOR_ASYNC,(t=>{if(!t.parentExecution||!t.parentExecution.isRunning){const e=t.flush(!0);this.devtools&&e.mutations.length&&this.devtools.send({type:"flush",data:Object.assign(Object.assign({},t),e)})}})),i.on(w.ACTION_END,(t=>{if(!t.parentExecution||!t.parentExecution.isRunning){const e=t.flush();this.devtools&&e.mutations.length&&this.devtools.send({type:"flush",data:Object.assign(Object.assign({},t),e)})}})));if(n.mode===z){const t=this.createAction("onInitialize",V());this.initialized=Promise.resolve(t(this))}else this.initialized=Promise.resolve(null)}}createProxyStateTree(t,e,n,r){const s=new S(this.getState(t),{devmode:n&&!r,ssr:r,delimiter:this.delimiter,onSetFunction:(t,e,n,r,s)=>s[A]?new R(s):s,onGetFunction:(t,n,r,o)=>{const i=r[o];if(i[x])return i(e,t,s,n.split(this.delimiter));if(i[A]){const a=new R(i);return r[o]=a,a(e,t,s,n.split(this.delimiter))}return i},onGetter:n?(t,e)=>{this.eventHub.emitAsync(w.GETTER,{path:t,value:e})}:void 0});return s}createExecution(t,e,n){const r=t.split(".");if(r.pop(),"production"===Y)return{[q]:!0,parentExecution:n,namespacePath:r,actionName:t,getMutationTree:()=>this.proxyStateTreeInstance.getMutationTree(),getTrackStateTree:()=>this.proxyStateTreeInstance.getTrackStateTree(),emit:this.eventHub.emit.bind(this.eventHub)};const s=[];return{[q]:!0,namespacePath:r,actionId:t,executionId:this.nextExecutionId++,actionName:t,operatorId:0,isRunning:!0,parentExecution:n,path:[],emit:this.eventHub.emit.bind(this.eventHub),send:this.devtools?this.devtools.send.bind(this.devtools):()=>{},trackEffects:this.trackEffects.bind(this,this.effects),getNextOperatorId:(()=>{let t=0;return()=>++t})(),flush:n?n.flush:t=>this.proxyStateTreeInstance.flush(s,t),getMutationTree:n?n.getMutationTree:()=>{const t=this.proxyStateTreeInstance.getMutationTree();return s.push(t),t},getTrackStateTree:()=>this.proxyStateTreeInstance.getTrackStateTree(),onFlush:t=>this.proxyStateTreeInstance.onFlush(t),scopeValue:(t,e)=>this.scopeValue(t,e)}}createContext(t,e){return{state:e.state,actions:nt(this.actions,(e=>n=>e(n,t.isRunning?t:null))),execution:t,proxyStateTree:this.proxyStateTreeInstance,effects:this.trackEffects(this.effects,t),addNamespace:this.addNamespace.bind(this),reaction:this.reaction.bind(this),addMutationListener:this.addMutationListener.bind(this),addFlushListener:this.addFlushListener.bind(this)}}addNamespace(t,e,n){const r=n||this.state,s=e.pop();if(t.state){e.reduce(((t,e)=>t[e]),r)[s]=Z(t.state)}if(t.actions){e.reduce(((t,e)=>t[e]),this.actions)[s]=this.getActions(t.actions)}if(t.effects){e.reduce(((t,e)=>t[e]),this.effects)[s]=t.effects}}scopeValue(t,e){return t?t[f]?this.proxyStateTreeInstance.rescope(t,e):P(t)?Object.assign({},...Object.keys(t).map((n=>({[n]:this.proxyStateTreeInstance.rescope(t[n],e)})))):t:t}addExecutionMutation(t){this.mutations.push(t)}createAction(t,e){this.actionReferences[t]=e;return(e,n)=>{const r=this.actionReferences[t];if(n=n&&n[q]?n:void 0,"production"===Y||r[B]||this.mode.mode===X){const s=this.createExecution(t,r,n);if(this.eventHub.emit(w.ACTION_START,Object.assign(Object.assign({},s),{value:e})),r[B])return new Promise(((t,n)=>{r(null,Object.assign(Object.assign({},this.createContext(s,this.proxyStateTreeInstance)),{value:e}),((e,r)=>{s.isRunning=!1,r&&this.eventHub.emit(w.ACTION_END,Object.assign(Object.assign({},r.execution),{operatorId:r.execution.operatorId-1})),e?n(e):t(r.value)}))}));{const t=s.getMutationTree();this.isStrict&&t.blockMutations();const n=r(this.createContext(s,t),e);return this.eventHub.emit(w.ACTION_END,s),n}}{const o=Object.assign(Object.assign({},this.createExecution(t,r,n)),{operatorId:0,type:"action"});this.eventHub.emit(w.ACTION_START,Object.assign(Object.assign({},o),{value:e})),this.eventHub.emit(w.OPERATOR_START,o);const i=o.getMutationTree();this.isStrict&&i.blockMutations(),i.onMutation((t=>{this.eventHub.emit(w.MUTATIONS,Object.assign(Object.assign({},o),{mutations:[t]}))}));const a=this.scopeValue(e,i),c=this.createContext(o,i);try{let t;i.onMutation((e=>{t&&clearTimeout(t),this.mode.mode===W?this.addExecutionMutation(e):this.mode.mode===z&&(t=setTimeout((()=>{t=null;const e=o.flush(!0);this.devtools&&e.mutations.length&&this.devtools.send({type:"flush",data:Object.assign(Object.assign(Object.assign({},o),e),{mutations:e.mutations})})})))}));let e=r(c,a);return K(e)?(this.eventHub.emit(w.OPERATOR_ASYNC,o),e=e.then((t=>(o.isRunning=!1,n||i.dispose(),this.eventHub.emit(w.OPERATOR_END,Object.assign(Object.assign({},o),{isAsync:!0,result:void 0})),this.eventHub.emit(w.ACTION_END,o),t))).catch((t=>{throw o.isRunning=!1,n||i.dispose(),this.eventHub.emit(w.OPERATOR_END,Object.assign(Object.assign({},o),{isAsync:!0,result:void 0,error:t.message})),this.eventHub.emit(w.ACTION_END,o),t}))):(o.isRunning=!1,n||i.dispose(),this.eventHub.emit(w.OPERATOR_END,Object.assign(Object.assign({},o),{isAsync:!1,result:void 0})),this.eventHub.emit(w.ACTION_END,o)),e}catch(s){throw this.eventHub.emit(w.OPERATOR_END,Object.assign(Object.assign({},o),{isAsync:!1,result:void 0,error:s.message})),this.eventHub.emit(w.ACTION_END,o),s}}}}trackEffects(t={},e){return"production"===Y?t:H(this.effects,(t=>{let n;try{if(this.mode.mode===W){n=this.mode.options.effectsCallback(t)}else this.eventHub.emit(w.EFFECT,Object.assign(Object.assign(Object.assign({},e),t),{args:t.args,isPending:!0,error:!1})),n=t.func.apply(this,t.args)}catch(r){throw this.eventHub.emit(w.EFFECT,Object.assign(Object.assign(Object.assign({},e),t),{args:t.args,isPending:!1,error:r.message})),r}return K(n)?(this.eventHub.emit(w.EFFECT,Object.assign(Object.assign(Object.assign({},e),t),{args:t.args,isPending:!0,error:!1})),n.then((n=>(this.eventHub.emit(w.EFFECT,Object.assign(Object.assign(Object.assign({},e),t),{args:t.args,result:n,isPending:!1,error:!1})),n))).catch((n=>{throw this.eventHub.emit(w.EFFECT,Object.assign(Object.assign(Object.assign({},e),t),{args:t.args,isPending:!1,error:n&&n.message})),n}))):(this.eventHub.emit(w.EFFECT,Object.assign(Object.assign(Object.assign({},e),t),{args:t.args,result:n,isPending:!1,error:!1})),n)}))}initializeDevtools(t,e,n,r,s){if("production"===Y)return;const o=new N(e);o.connect(t,(t=>{switch(t.type){case"refresh":location.reload();break;case"executeAction":{const e=t.data.name.split(".").reduce(((t,e)=>t[e]),this.actions);t.data.payload?e(JSON.parse(t.data.payload)):e();break}case"mutation":{const e=this.proxyStateTreeInstance.getMutationTree(),n=t.data.path.slice(),r=JSON.parse(`{ "value": ${t.data.value} }`).value,s=n.pop();n.reduce(((t,e)=>t[e]),e.state)[s]=r,e.flush(!0),e.dispose(),this.devtools.send({type:"state",data:{path:t.data.path,value:r}});break}}}));for(const i in w)n.on(w[i],(t=>e=>{o.send({type:w[i],data:e}),t===w.MUTATIONS&&e.mutations.forEach((t=>{const e=t.path.split(this.delimiter).reduce(((t,e)=>t[e]),this.proxyStateTreeInstance.state);P(e)?Object.keys(e).forEach((t=>e[t])):Array.isArray(e)&&e.forEach((t=>{P(t)&&Object.keys(t).forEach((e=>t[e]))}))})),t===w.DERIVED_DIRTY&&e.derivedPath.reduce(((t,e)=>t[e]),this.proxyStateTreeInstance.state)})(w[i]));o.send({type:"init",data:{state:this.proxyStateTreeInstance.state,actions:et(s),delimiter:this.delimiter}}),this.devtools=o}getState(t){let e={};return t.state&&(e=Z(t.state)),e}getActions(t={},e=[]){return Object.keys(t).reduce(((n,r)=>{if("function"==typeof t[r]){const s=this.createAction(e.concat(r).join("."),t[r]);return s.displayName=e.concat(r).join("."),Object.assign(n,{[r]:s})}return Object.assign(n,{[r]:this.getActions(t[r],e.concat(r))})}),{})}updateActions(t={},e=[]){Object.keys(t).forEach((n=>{if("function"==typeof t[n]){const r=e.concat(n).join(".");if(this.actionReferences[r])this.actionReferences[r]=t[n];else{const s=e.reduce(((t,e)=>(t[e]||(t[e]={}),t[e])),this.actions);s[n]=this.createAction(r,t[n]),s[n].displayName=e.concat(n).join(".")}}else this.updateActions(t[n],e.concat(n))}),{})}getTrackStateTree(){return this.proxyStateTreeInstance.getTrackStateTree()}getMutationTree(){return this.proxyStateTreeInstance.getMutationTree()}reconfigure(t){const e=Q(this.originalConfiguration.state,t.state||{});this.updateActions(t.actions),this.effects=t.effects||{};const n=this.proxyStateTreeInstance.getMutationTree();return _(n.state,e),this.reydrateMutationsForHotReloading.forEach((t=>{try{_(n.state,[t])}catch(e){}})),n.flush(),n.dispose(),this.devtools&&this.devtools.send({type:"re_init",data:{state:this.state,actions:et(t.actions)}}),this}}const ot=Symbol("OVERMIND"),it="production"===Y;let at=0;const ct=t=>({install(e,n=(({state:t,actions:e,effects:n})=>({state:t,actions:e,effects:n}))){e.mixin(function(t,e,n=!1){const r=at++;let s=0;return Object.assign(Object.assign({beforeCreate(){t.mode.mode===X?(this.overmind={state:t.state,actions:t.actions,effects:t.effects,addMutationListener:t.addMutationListener,reaction:t.reaction},e&&Object.assign(this,e({state:t.state,actions:t.actions,effects:t.effects}))):(this[ot]={tree:t.proxyStateTreeInstance.getTrackStateTree(),componentInstanceId:s++,onUpdate:(t,e,n)=>{this[ot].currentFlushId=n,this[ot].isUpdating=!0,this.$forceUpdate()},isUpdating:!1},this.overmind={state:this[ot].tree.state,actions:t.actions,effects:t.effects,addMutationListener:t.addMutationListener,reaction:t.reaction},this[ot].tree.track(this[ot].onUpdate),e&&Object.assign(this,e({state:this[ot].tree.state,actions:t.actions,effects:t.effects})))},beforeUpdate(){t.mode.mode!==X&&(this[ot].tree.track(this[ot].onUpdate),e&&n&&Object.assign(this,e({state:this[ot].tree.state,actions:t.actions,effects:t.effects})))}},it?{updated(){this[ot].tree.stopTracking()}}:{mounted(){t.mode.mode!==X&&t.eventHub.emitAsync(w.COMPONENT_ADD,{componentId:r,componentInstanceId:this[ot].componentInstanceId,name:this.$options.name||"",paths:Array.from(this[ot].tree.pathDependencies)})},updated(){t.mode.mode!==X&&(this[ot].tree.stopTracking(),this[ot].isUpdating&&(t.eventHub.emitAsync(w.COMPONENT_UPDATE,{componentId:r,componentInstanceId:this[ot].componentInstanceId,name:this.$options.name||"",flushId:this[ot].currentFlushId,paths:Array.from(this[ot].tree.pathDependencies)}),this[ot].isUpdating=!1))}}),{beforeDestroy(){t.mode.mode!==X&&(t.proxyStateTreeInstance.disposeTree(this[ot].tree),it||t.eventHub.emitAsync(w.COMPONENT_REMOVE,{componentId:r,componentInstanceId:this[ot].componentInstanceId,name:this.$options.name||""}))}})}(t,n))}});var ut;const lt={loadRoutes:async function(t){let e={};return await fetch(`${t.user.server}/load_routes`).then((t=>{e=t.json()})).then((t=>console.log(t))),e},loadMeta:async function(t){let e={};return await fetch(`${t.user.server}/api/load_meta?doctype=${t.route.doctype}`).then((t=>{e=t.json()})),e},loadData:async function(t){let e=`${t.user.server}/api/load_data?doctype=${t.routes.currentDoctype}`;t.route.document&&(e+=`&document=${t.routes.currentDocument}`);let n={};return console.log(e),await fetch(e).then((t=>{n=t.json()})).then((t=>console.log(t))),n},saveData:function(t){},ping:function(){return console.log("ping"),"http://localhost:3000"}},ht={loadRoutes:function(t){let e={};return fetch(`${t.server}/load_routes`).then((t=>{e=t.json()})),e},loadMeta:function(t){},loadData:function(t){},saveData:function(t){}},ft={loadRoutes:function(t){let e={};return fetch(`${user.server}/load_routes`).then((t=>{e=t.json()})).then((t=>console.log(t))),e},loadMeta:function(t){},loadData:function(t){},saveData:function(t){}};const dt={state:{user:{adaptor:"http",server:"",username:"",token:""},route:{view:"login",module:"",doctype:"",document:"",breadcrumbs:(ut=(t,e)=>{let n=[];return"login"==e.route.view||(e.route.doctype&&n.push({title:e.route.doctype,to:`/${e.route.doctype}`}),e.route.document&&n.push({title:e.route.document,to:`/${e.route.doctype}/${e.route.document}`})),n},ut[A]=!0,ut)},meta:{},data:{}},actions:Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",routeChange:async({state:t,effects:e,actions:n},r)=>{let s=r.path.split("/"),o=r.query.view;1==s.length?(t.route.view=o||"login",t.route.doctype=null,t.route.document=null):2==s.length?(t.route.view=o||"table",t.route.doctype=decodeURI(s[1]),t.route.document=null):3==s.length&&(t.route.view=o||"form",t.route.doctype=decodeURI(s[1]),t.route.document=decodeURI(s[2]))},loadRoutes:async({state:t,effects:e,actions:n})=>{t.route=await e[t.user.adaptor].loadRoutes(t)},loadMeta:async({state:t,effects:e,actions:n})=>{t.route.doctype&&(t.meta[t.route.doctype]=await e[t.user.adaptor].loadMeta(t))},loadData:async({state:t,effects:e,actions:n},r)=>{t.data=await e[t.user.adaptor].loadData(t)},saveData:async({state:t,effects:e,actions:n},r)=>{t.data=await e[t.user.adaptor].saveData(t)},pretend:async({state:t,effects:e,actions:n},r)=>{t.user.server=e.fetch.ping()},onInitializeOvermind:async({state:t,localStorage:e},n)=>{n.addMutationListener((t=>{t.path.split(".")}))}}),effects:Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",http:lt,graphql:ht,frappe:ft})},pt="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,mt=t=>pt?Symbol(t):"_vr_"+t,gt=mt("rvlm"),yt=mt("rvd"),bt=mt("r"),vt=mt("rl"),Ot=mt("rvl"),Tt="undefined"!=typeof window;
/*!
  * vue-router v4.0.10
  * (c) 2021 Eduardo San Martin Morote
  * @license MIT
  */const Et=Object.assign;function St(t,e){const n={};for(const r in e){const s=e[r];n[r]=Array.isArray(s)?s.map(t):t(s)}return n}let wt=()=>{};const kt=/\/$/;function xt(t,e,n="/"){let r,s={},o="",i="";const a=e.indexOf("?"),c=e.indexOf("#",a>-1?a:0);return a>-1&&(r=e.slice(0,a),o=e.slice(a+1,c>-1?c:e.length),s=t(o)),c>-1&&(r=r||e.slice(0,c),i=e.slice(c,e.length)),r=function(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/");let s,o,i=n.length-1;for(s=0;s<r.length;s++)if(o=r[s],1!==i&&"."!==o){if(".."!==o)break;i--}return n.slice(0,i).join("/")+"/"+r.slice(s-(s===r.length?1:0)).join("/")}(null!=r?r:e,n),{fullPath:r+(o&&"?")+o+i,path:r,query:s,hash:i}}function At(t,e){return e&&t.toLowerCase().startsWith(e.toLowerCase())?t.slice(e.length)||"/":t}function Rt(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function jt(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(let n in t)if(!Ct(t[n],e[n]))return!1;return!0}function Ct(t,e){return Array.isArray(t)?Pt(t,e):Array.isArray(e)?Pt(e,t):t===e}function Pt(t,e){return Array.isArray(e)?t.length===e.length&&t.every(((t,n)=>t===e[n])):1===t.length&&t[0]===e}var It,Dt,Mt,_t;function Nt(t){if(!t)if(Tt){const e=document.querySelector("base");t=(t=e&&e.getAttribute("href")||"/").replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return"/"!==t[0]&&"#"!==t[0]&&(t="/"+t),t.replace(kt,"")}(Dt=It||(It={})).pop="pop",Dt.push="push",(_t=Mt||(Mt={})).back="back",_t.forward="forward",_t.unknown="";const Lt=/^[^#]+#/;function Ft(t,e){return t.replace(Lt,"#")+e}const $t=()=>({left:window.pageXOffset,top:window.pageYOffset});function Ht(t){let e;if("el"in t){let n=t.el;const r="string"==typeof n&&n.startsWith("#"),s="string"==typeof n?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;e=function(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}(s,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(null!=e.left?e.left:window.pageXOffset,null!=e.top?e.top:window.pageYOffset)}function Vt(t,e){return(history.state?history.state.position-e:-1)+t}const Yt=new Map;function Ut(t,e){const{pathname:n,search:r,hash:s}=e,o=t.indexOf("#");if(o>-1){let e=s.includes(t.slice(o))?t.slice(o).length:1,n=s.slice(e);return"/"!==n[0]&&(n="/"+n),At(n,"")}return At(n,t)+r+s}function Bt(t,e,n,r=!1,s=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:s?$t():null}}function Gt(t){const{history:e,location:n}=window;let r={value:Ut(t,n)},s={value:e.state};function o(r,o,i){const a=t.indexOf("#"),c=a>-1?(n.host&&document.querySelector("base")?t:t.slice(a))+r:location.protocol+"//"+location.host+t+r;try{e[i?"replaceState":"pushState"](o,"",c),s.value=o}catch(u){console.error(u),n[i?"replace":"assign"](c)}}return s.value||o(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0),{location:r,state:s,push:function(t,n){const i=Et({},s.value,e.state,{forward:t,scroll:$t()});o(i.current,i,!0),o(t,Et({},Bt(r.value,t,null),{position:i.position+1},n),!1),r.value=t},replace:function(t,n){o(t,Et({},e.state,Bt(s.value.back,t,s.value.forward,!0),n,{position:s.value.position}),!0),r.value=t}}}function qt(t){return"string"==typeof t||"symbol"==typeof t}const zt={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},Wt=mt("nf");var Xt,Jt;function Kt(t,e){return Et(new Error,{type:t,[Wt]:!0},e)}function Zt(t,e){return t instanceof Error&&Wt in t&&(null==e||!!(t.type&e))}(Jt=Xt||(Xt={}))[Jt.aborted=4]="aborted",Jt[Jt.cancelled=8]="cancelled",Jt[Jt.duplicated=16]="duplicated";const Qt={sensitive:!1,strict:!1,start:!0,end:!0},te=/[.+*?^${}()[\]/\\]/g;function ee(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?1===t.length&&80===t[0]?-1:1:t.length>e.length?1===e.length&&80===e[0]?1:-1:0}function ne(t,e){let n=0;const r=t.score,s=e.score;for(;n<r.length&&n<s.length;){const t=ee(r[n],s[n]);if(t)return t;n++}return s.length-r.length}const re={type:0,value:""},se=/[a-zA-Z0-9_]/;function oe(t,e,n){const r=function(t,e){const n=Et({},Qt,e);let r=[],s=n.start?"^":"";const o=[];for(const c of t){const t=c.length?[]:[90];n.strict&&!c.length&&(s+="/");for(let e=0;e<c.length;e++){const r=c[e];let i=40+(n.sensitive?.25:0);if(0===r.type)e||(s+="/"),s+=r.value.replace(te,"\\$&"),i+=40;else if(1===r.type){const{value:t,repeatable:n,optional:u,regexp:l}=r;o.push({name:t,repeatable:n,optional:u});const h=l||"[^/]+?";if("[^/]+?"!==h){i+=10;try{new RegExp(`(${h})`)}catch(a){throw new Error(`Invalid custom RegExp for param "${t}" (${h}): `+a.message)}}let f=n?`((?:${h})(?:/(?:${h}))*)`:`(${h})`;e||(f=u&&c.length<2?`(?:/${f})`:"/"+f),u&&(f+="?"),s+=f,i+=20,u&&(i+=-8),n&&(i+=-20),".*"===h&&(i+=-50)}t.push(i)}r.push(t)}if(n.strict&&n.end){const t=r.length-1;r[t][r[t].length-1]+=.7000000000000001}n.strict||(s+="/?"),n.end?s+="$":n.strict&&(s+="(?:/|$)");const i=new RegExp(s,n.sensitive?"":"i");return{re:i,score:r,keys:o,parse:function(t){const e=t.match(i),n={};if(!e)return null;for(let r=1;r<e.length;r++){const t=e[r]||"",s=o[r-1];n[s.name]=t&&s.repeatable?t.split("/"):t}return n},stringify:function(e){let n="",r=!1;for(const s of t){r&&n.endsWith("/")||(n+="/"),r=!1;for(const t of s)if(0===t.type)n+=t.value;else if(1===t.type){const{value:o,repeatable:i,optional:a}=t,c=o in e?e[o]:"";if(Array.isArray(c)&&!i)throw new Error(`Provided param "${o}" is an array but it is not repeatable (* or + modifiers)`);const u=Array.isArray(c)?c.join("/"):c;if(!u){if(!a)throw new Error(`Missing required param "${o}"`);s.length<2&&(n.endsWith("/")?n=n.slice(0,-1):r=!0)}n+=u}}return n}}}(function(t){if(!t)return[[]];if("/"===t)return[[re]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(t){throw new Error(`ERR (${n})/"${u}": ${t}`)}let n=0,r=n;const s=[];let o;function i(){o&&s.push(o),o=[]}let a,c=0,u="",l="";function h(){u&&(0===n?o.push({type:0,value:u}):1===n||2===n||3===n?(o.length>1&&("*"===a||"+"===a)&&e(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),o.push({type:1,value:u,regexp:l,repeatable:"*"===a||"+"===a,optional:"*"===a||"?"===a})):e("Invalid state to consume buffer"),u="")}function f(){u+=a}for(;c<t.length;)if(a=t[c++],"\\"!==a||2===n)switch(n){case 0:"/"===a?(u&&h(),i()):":"===a?(h(),n=1):f();break;case 4:f(),n=r;break;case 1:"("===a?n=2:se.test(a)?f():(h(),n=0,"*"!==a&&"?"!==a&&"+"!==a&&c--);break;case 2:")"===a?"\\"==l[l.length-1]?l=l.slice(0,-1)+a:n=3:l+=a;break;case 3:h(),n=0,"*"!==a&&"?"!==a&&"+"!==a&&c--,l="";break;default:e("Unknown state")}else r=n,n=4;return 2===n&&e(`Unfinished custom RegExp for param "${u}"`),h(),i(),s}(t.path),n),s=Et(r,{record:t,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf==!e.record.aliasOf&&e.children.push(s),s}function ie(t,e){const n=[],r=new Map;function s(t,n,r){let a=!r,c=function(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:ae(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||{}:{default:t.component}}}(t);c.aliasOf=r&&r.record;const u=le(e,t),l=[c];if("alias"in t){const e="string"==typeof t.alias?[t.alias]:t.alias;for(const t of e)l.push(Et({},c,{components:r?r.record.components:c.components,path:t,aliasOf:r?r.record:c}))}let h,f;for(const e of l){let{path:l}=e;if(n&&"/"!==l[0]){let t=n.record.path,r="/"===t[t.length-1]?"":"/";e.path=n.record.path+(l&&r+l)}if(h=oe(e,n,u),r?r.alias.push(h):(f=f||h,f!==h&&f.alias.push(h),a&&t.name&&!ce(h)&&o(t.name)),"children"in c){let t=c.children;for(let e=0;e<t.length;e++)s(t[e],h,r&&r.children[e])}r=r||h,i(h)}return f?()=>{o(f)}:wt}function o(t){if(qt(t)){const e=r.get(t);e&&(r.delete(t),n.splice(n.indexOf(e),1),e.children.forEach(o),e.alias.forEach(o))}else{let e=n.indexOf(t);e>-1&&(n.splice(e,1),t.record.name&&r.delete(t.record.name),t.children.forEach(o),t.alias.forEach(o))}}function i(t){let e=0;for(;e<n.length&&ne(t,n[e])>=0;)e++;n.splice(e,0,t),t.record.name&&!ce(t)&&r.set(t.record.name,t)}return e=le({strict:!1,end:!0,sensitive:!1},e),t.forEach((t=>s(t))),{addRoute:s,resolve:function(t,e){let s,o,i,a={};if("name"in t&&t.name){if(s=r.get(t.name),!s)throw Kt(1,{location:t});i=s.record.name,a=Et(function(t,e){let n={};for(let r of e)r in t&&(n[r]=t[r]);return n}(e.params,s.keys.filter((t=>!t.optional)).map((t=>t.name))),t.params),o=s.stringify(a)}else if("path"in t)o=t.path,s=n.find((t=>t.re.test(o))),s&&(a=s.parse(o),i=s.record.name);else{if(s=e.name?r.get(e.name):n.find((t=>t.re.test(e.path))),!s)throw Kt(1,{location:t,currentLocation:e});i=s.record.name,a=Et({},e.params,t.params),o=s.stringify(a)}const c=[];let u=s;for(;u;)c.unshift(u.record),u=u.parent;return{name:i,path:o,params:a,matched:c,meta:ue(c)}},removeRoute:o,getRoutes:function(){return n},getRecordMatcher:function(t){return r.get(t)}}}function ae(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(let r in t.components)e[r]="boolean"==typeof n?n:n[r];return e}function ce(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function ue(t){return t.reduce(((t,e)=>Et(t,e.meta)),{})}function le(t,e){let n={};for(let r in t)n[r]=r in e?e[r]:t[r];return n}const he=/#/g,fe=/&/g,de=/\//g,pe=/=/g,me=/\?/g,ge=/\+/g,ye=/%5B/g,be=/%5D/g,ve=/%5E/g,Oe=/%60/g,Te=/%7B/g,Ee=/%7C/g,Se=/%7D/g,we=/%20/g;function ke(t){return encodeURI(""+t).replace(Ee,"|").replace(ye,"[").replace(be,"]")}function xe(t){return ke(t).replace(ge,"%2B").replace(we,"+").replace(he,"%23").replace(fe,"%26").replace(Oe,"`").replace(Te,"{").replace(Se,"}").replace(ve,"^")}function Ae(t){return function(t){return ke(t).replace(he,"%23").replace(me,"%3F")}(t).replace(de,"%2F")}function Re(t){try{return decodeURIComponent(""+t)}catch(e){}return""+t}function je(t){const e={};if(""===t||"?"===t)return e;const n=("?"===t[0]?t.slice(1):t).split("&");for(let r=0;r<n.length;++r){const t=n[r].replace(ge," ");let s=t.indexOf("="),o=Re(s<0?t:t.slice(0,s)),i=s<0?null:Re(t.slice(s+1));if(o in e){let t=e[o];Array.isArray(t)||(t=e[o]=[t]),t.push(i)}else e[o]=i}return e}function Ce(t){let e="";for(let n in t){const r=t[n];if(n=xe(n).replace(pe,"%3D"),null==r){void 0!==r&&(e+=(e.length?"&":"")+n);continue}(Array.isArray(r)?r.map((t=>t&&xe(t))):[r&&xe(r)]).forEach((t=>{void 0!==t&&(e+=(e.length?"&":"")+n,null!=t&&(e+="="+t))}))}return e}function Pe(t){const e={};for(let n in t){let r=t[n];void 0!==r&&(e[n]=Array.isArray(r)?r.map((t=>null==t?null:""+t)):null==r?r:""+r)}return e}function Ie(){let t=[];return{add:function(e){return t.push(e),()=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)}},list:()=>t,reset:function(){t=[]}}}function De(t,e,n,r,s){const o=r&&(r.enterCallbacks[s]=r.enterCallbacks[s]||[]);return()=>new Promise(((i,a)=>{const c=t=>{var c;!1===t?a(Kt(4,{from:n,to:e})):t instanceof Error?a(t):"string"==typeof(c=t)||c&&"object"==typeof c?a(Kt(2,{from:e,to:t})):(o&&r.enterCallbacks[s]===o&&"function"==typeof t&&o.push(t),i())},u=t.call(r&&r.instances[s],e,n,c);let l=Promise.resolve(u);t.length<3&&(l=l.then(c)),l.catch((t=>a(t)))}))}function Me(t,e,n,r){const s=[];for(const i of t)for(const t in i.components){let a=i.components[t];if("beforeRouteEnter"===e||i.instances[t])if("object"==typeof(o=a)||"displayName"in o||"props"in o||"__vccOpts"in o){const o=(a.__vccOpts||a)[e];o&&s.push(De(o,n,r,i,t))}else{let o=a();s.push((()=>o.then((s=>{if(!s)return Promise.reject(new Error(`Couldn't resolve component "${t}" at "${i.path}"`));const o=(a=s).__esModule||pt&&"Module"===a[Symbol.toStringTag]?s.default:s;var a;i.components[t]=o;const c=(o.__vccOpts||o)[e];return c&&De(c,n,r,i,t)()}))))}}var o;return s}function _e(t){const r=i(bt),s=i(vt),o=n((()=>r.resolve(e(t.to)))),a=n((()=>{let{matched:t}=o.value,{length:e}=t;const n=t[e-1];let r=s.matched;if(!n||!r.length)return-1;let i=r.findIndex(Rt.bind(null,n));if(i>-1)return i;let a=Le(t[e-2]);return e>1&&Le(n)===a&&r[r.length-1].path!==a?r.findIndex(Rt.bind(null,t[e-2])):i})),c=n((()=>a.value>-1&&function(t,e){for(let n in e){let r=e[n],s=t[n];if("string"==typeof r){if(r!==s)return!1}else if(!Array.isArray(s)||s.length!==r.length||r.some(((t,e)=>t!==s[e])))return!1}return!0}(s.params,o.value.params))),u=n((()=>a.value>-1&&a.value===s.matched.length-1&&jt(s.params,o.value.params)));return{route:o,href:n((()=>o.value.href)),isActive:c,isExactActive:u,navigate:function(n={}){return function(t){if(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)return;if(t.defaultPrevented)return;if(void 0!==t.button&&0!==t.button)return;if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}t.preventDefault&&t.preventDefault();return!0}(n)?r[e(t.replace)?"replace":"push"](e(t.to)).catch(wt):Promise.resolve()}}}const Ne=o({name:"RouterLink",props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:_e,setup(t,{slots:e}){const s=r(_e(t)),{options:o}=i(bt),c=n((()=>({[Fe(t.activeClass,o.linkActiveClass,"router-link-active")]:s.isActive,[Fe(t.exactActiveClass,o.linkExactActiveClass,"router-link-exact-active")]:s.isExactActive})));return()=>{const n=e.default&&e.default(s);return t.custom?n:a("a",{"aria-current":s.isExactActive?t.ariaCurrentValue:null,href:s.href,onClick:s.navigate,class:c.value},n)}}});function Le(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const Fe=(t,e,n)=>null!=t?t:null!=e?e:n;function $e(t,e){if(!t)return null;const n=t(e);return 1===n.length?n[0]:n}const He=o({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},setup(t,{attrs:e,slots:r}){const s=i(Ot),o=n((()=>t.route||s.value)),h=i(yt,0),f=n((()=>o.value.matched[h]));c(yt,h+1),c(gt,f),c(Ot,o);const d=u();return l((()=>[d.value,f.value,t.name]),(([t,e,n],[r,s,o])=>{e&&(e.instances[n]=t,s&&s!==e&&t&&t===r&&(e.leaveGuards.size||(e.leaveGuards=s.leaveGuards),e.updateGuards.size||(e.updateGuards=s.updateGuards))),!t||!e||s&&Rt(e,s)&&r||(e.enterCallbacks[n]||[]).forEach((e=>e(t)))}),{flush:"post"}),()=>{const n=o.value,s=f.value,i=s&&s.components[t.name],c=t.name;if(!i)return $e(r.default,{Component:i,route:n});const u=s.props[t.name],l=u?!0===u?n.params:"function"==typeof u?u(n):u:null,h=a(i,Et({},l,e,{onVnodeUnmounted:t=>{t.component.isUnmounted&&(s.instances[c]=null)},ref:d}));return $e(r.default,{Component:h,route:n})||h}}});function Ve(t){return t.reduce(((t,e)=>t.then((()=>e()))),Promise.resolve())}const Ye=function(o){const i=ie(o.routes,o);let a=o.parseQuery||je,c=o.stringifyQuery||Ce,u=o.history;const l=Ie(),h=Ie(),f=Ie(),d=t(zt);let p=zt;Tt&&o.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const m=St.bind(null,(t=>""+t)),g=St.bind(null,Ae),y=St.bind(null,Re);function b(t,e){if(e=Et({},e||d.value),"string"==typeof t){let n=xt(a,t,e.path),r=i.resolve({path:n.path},e),s=u.createHref(n.fullPath);return Et(n,r,{params:y(r.params),hash:Re(n.hash),redirectedFrom:void 0,href:s})}let n;"path"in t?n=Et({},t,{path:xt(a,t.path,e.path).path}):(n=Et({},t,{params:g(t.params)}),e.params=g(e.params));let r=i.resolve(n,e);const s=t.hash||"";r.params=m(y(r.params));const o=function(t,e){let n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}(c,Et({},t,{hash:(l=s,ke(l).replace(Te,"{").replace(Se,"}").replace(ve,"^")),path:r.path}));var l;let h=u.createHref(o);return Et({fullPath:o,hash:s,query:c===Ce?Pe(t.query):t.query},r,{redirectedFrom:void 0,href:h})}function v(t){return"string"==typeof t?xt(a,t,d.value.path):Et({},t)}function O(t,e){if(p!==t)return Kt(8,{from:e,to:t})}function T(t){return S(t)}function E(t){const e=t.matched[t.matched.length-1];if(e&&e.redirect){const{redirect:n}=e;let r="function"==typeof n?n(t):n;return"string"==typeof r&&(r=r.includes("?")||r.includes("#")?r=v(r):{path:r},r.params={}),Et({query:t.query,hash:t.hash,params:t.params},r)}}function S(t,e){const n=p=b(t),r=d.value,s=t.state,o=t.force,i=!0===t.replace,a=E(n);if(a)return S(Et(v(a),{state:s,force:o,replace:i}),e||n);const u=n;let l;return u.redirectedFrom=e,!o&&function(t,e,n){let r=e.matched.length-1,s=n.matched.length-1;return r>-1&&r===s&&Rt(e.matched[r],n.matched[s])&&jt(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}(c,r,n)&&(l=Kt(16,{to:u,from:r}),_(r,r,!0,!1)),(l?Promise.resolve(l):k(u,r)).catch((t=>Zt(t)?t:D(t,u,r))).then((t=>{if(t){if(Zt(t,2))return S(Et(v(t.to),{state:s,force:o,replace:i}),e||u)}else t=A(u,r,!0,i,s);return x(u,r,t),t}))}function w(t,e){const n=O(t,e);return n?Promise.reject(n):Promise.resolve()}function k(t,e){let n;const[r,s,o]=function(t,e){const n=[],r=[],s=[],o=Math.max(e.matched.length,t.matched.length);for(let i=0;i<o;i++){const o=e.matched[i];o&&(t.matched.find((t=>Rt(t,o)))?r.push(o):n.push(o));const a=t.matched[i];a&&(e.matched.find((t=>Rt(t,a)))||s.push(a))}return[n,r,s]}(t,e);n=Me(r.reverse(),"beforeRouteLeave",t,e);for(const a of r)a.leaveGuards.forEach((r=>{n.push(De(r,t,e))}));const i=w.bind(null,t,e);return n.push(i),Ve(n).then((()=>{n=[];for(const r of l.list())n.push(De(r,t,e));return n.push(i),Ve(n)})).then((()=>{n=Me(s,"beforeRouteUpdate",t,e);for(const r of s)r.updateGuards.forEach((r=>{n.push(De(r,t,e))}));return n.push(i),Ve(n)})).then((()=>{n=[];for(const r of t.matched)if(r.beforeEnter&&!e.matched.includes(r))if(Array.isArray(r.beforeEnter))for(const s of r.beforeEnter)n.push(De(s,t,e));else n.push(De(r.beforeEnter,t,e));return n.push(i),Ve(n)})).then((()=>(t.matched.forEach((t=>t.enterCallbacks={})),n=Me(o,"beforeRouteEnter",t,e),n.push(i),Ve(n)))).then((()=>{n=[];for(const r of h.list())n.push(De(r,t,e));return n.push(i),Ve(n)})).catch((t=>Zt(t,8)?t:Promise.reject(t)))}function x(t,e,n){for(const r of f.list())r(t,e,n)}function A(t,e,n,r,s){const o=O(t,e);if(o)return o;const i=e===zt,a=Tt?history.state:{};n&&(r||i?u.replace(t.fullPath,Et({scroll:i&&a&&a.scroll},s)):u.push(t.fullPath,s)),d.value=t,_(t,e,n,i),M()}let R;function j(){R=u.listen(((t,e,n)=>{let r=b(t);const s=E(r);if(s)return void S(Et(s,{replace:!0}),r).catch(wt);p=r;const o=d.value;var i,a;Tt&&(i=Vt(o.fullPath,n.delta),a=$t(),Yt.set(i,a)),k(r,o).catch((t=>Zt(t,12)?t:Zt(t,2)?(S(t.to,r).then((t=>{Zt(t,20)&&!n.delta&&n.type===It.pop&&u.go(-1,!1)})).catch(wt),Promise.reject()):(n.delta&&u.go(-n.delta,!1),D(t,r,o)))).then((t=>{(t=t||A(r,o,!1))&&(n.delta?u.go(-n.delta,!1):n.type===It.pop&&Zt(t,20)&&u.go(-1,!1)),x(r,o,t)})).catch(wt)}))}let C,P=Ie(),I=Ie();function D(t,e,n){M(t);const r=I.list();return r.length?r.forEach((r=>r(t,e,n))):console.error(t),Promise.reject(t)}function M(t){C||(C=!0,j(),P.list().forEach((([e,n])=>t?n(t):e())),P.reset())}function _(t,e,n,r){const{scrollBehavior:i}=o;if(!Tt||!i)return Promise.resolve();let a=!n&&function(t){const e=Yt.get(t);return Yt.delete(t),e}(Vt(t.fullPath,0))||(r||!n)&&history.state&&history.state.scroll||null;return s().then((()=>i(t,e,a))).then((t=>t&&Ht(t))).catch((n=>D(n,t,e)))}const N=t=>u.go(t);let L;const F=new Set;return{currentRoute:d,addRoute:function(t,e){let n,r;return qt(t)?(n=i.getRecordMatcher(t),r=e):r=t,i.addRoute(r,n)},removeRoute:function(t){let e=i.getRecordMatcher(t);e&&i.removeRoute(e)},hasRoute:function(t){return!!i.getRecordMatcher(t)},getRoutes:function(){return i.getRoutes().map((t=>t.record))},resolve:b,options:o,push:T,replace:function(t){return T(Et(v(t),{replace:!0}))},go:N,back:()=>N(-1),forward:()=>N(1),beforeEach:l.add,beforeResolve:h.add,afterEach:f.add,onError:I.add,isReady:function(){return C&&d.value!==zt?Promise.resolve():new Promise(((t,e)=>{P.add([t,e])}))},install(t){t.component("RouterLink",Ne),t.component("RouterView",He),t.config.globalProperties.$router=this,Object.defineProperty(t.config.globalProperties,"$route",{enumerable:!0,get:()=>e(d)}),Tt&&!L&&d.value===zt&&(L=!0,T(u.location).catch((t=>{})));const s={};for(let e in zt)s[e]=n((()=>d.value[e]));t.provide(bt,this),t.provide(vt,r(s)),t.provide(Ot,d);let o=t.unmount;F.add(t),t.unmount=function(){F.delete(t),F.size<1&&(R(),d.value=zt,L=!1,C=!1),o()}}}}({history:function(t){const e=Gt(t=Nt(t)),n=function(t,e,n,r){let s=[],o=[],i=null;const a=({state:o})=>{const a=Ut(t,location),c=n.value,u=e.value;let l=0;if(o){if(n.value=a,e.value=o,i&&i===c)return void(i=null);l=u?o.position-u.position:0}else r(a);s.forEach((t=>{t(n.value,c,{delta:l,type:It.pop,direction:l?l>0?Mt.forward:Mt.back:Mt.unknown})}))};function c(){const{history:t}=window;t.state&&t.replaceState(Et({},t.state,{scroll:$t()}),"")}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",c),{pauseListeners:function(){i=n.value},listen:function(t){s.push(t);const e=()=>{const e=s.indexOf(t);e>-1&&s.splice(e,1)};return o.push(e),e},destroy:function(){for(const t of o)t();o=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",c)}}}(t,e.state,e.location,e.replace),r=Et({location:"",base:t,go:function(t,e=!0){e||n.pauseListeners(),history.go(t)},createHref:Ft.bind(null,t)},e,n);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>e.state.value}),r}(),routes:[{path:"/",component:{template:"<div><br>Login</div>"},props:!0},{path:"/home",component:"<div><h1>HOME</h1></div>",props:!0},{path:"/404",component:{template:"<h1>404</h1>"}},{path:"/:table",component:"<div><h1>TABLE</h1></div>"},{path:"/:table/:id",component:"<div><h1>FORM</h1></div>"}]});function Ue(t,e){const n=function(t,e){return new st(t,e,{mode:z})}(dt),r=ct(n);t.use(r),t.use(Ye)}"undefined"!=typeof window&&window.Vue&&Ue(window.Vue);var Be={version:"0.1.0",install:Ue};export{Be as default};
